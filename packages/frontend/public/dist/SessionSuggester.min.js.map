{"version":3,"sources":["webpack://SessionSuggester/webpack/universalModuleDefinition","webpack://SessionSuggester/webpack/bootstrap","webpack://SessionSuggester//Users/crusher/Desktop/experiment/test-v2/node_modules/.pnpm/rrweb@2.0.0-alpha.4/node_modules/rrweb/es/rrweb/_virtual/_rollup-plugin-web-worker-loader__helper__auto__isNodeJS.js","webpack://SessionSuggester//Users/crusher/Desktop/experiment/test-v2/node_modules/.pnpm/rrweb@2.0.0-alpha.4/node_modules/rrweb/es/rrweb/_virtual/_rollup-plugin-web-worker-loader__helper__node__createBase64WorkerFactory.js","webpack://SessionSuggester//Users/crusher/Desktop/experiment/test-v2/node_modules/.pnpm/rrweb@2.0.0-alpha.4/node_modules/rrweb/es/rrweb/_virtual/_rollup-plugin-web-worker-loader__helper__node__WorkerClass.js","webpack://SessionSuggester//Users/crusher/Desktop/experiment/test-v2/node_modules/.pnpm/process@0.11.10/node_modules/process/browser.js","webpack://SessionSuggester//Users/crusher/Desktop/experiment/test-v2/node_modules/.pnpm/buffer@4.9.2/node_modules/buffer/index.js","webpack://SessionSuggester/(webpack)/buildin/global.js","webpack://SessionSuggester//Users/crusher/Desktop/experiment/test-v2/node_modules/.pnpm/base64-js@1.5.1/node_modules/base64-js/index.js","webpack://SessionSuggester//Users/crusher/Desktop/experiment/test-v2/node_modules/.pnpm/ieee754@1.2.1/node_modules/ieee754/index.js","webpack://SessionSuggester//Users/crusher/Desktop/experiment/test-v2/node_modules/.pnpm/isarray@1.0.0/node_modules/isarray/index.js","webpack://SessionSuggester/(webpack)/buildin/harmony-module.js","webpack://SessionSuggester//Users/crusher/Desktop/experiment/test-v2/node_modules/.pnpm/rrweb@2.0.0-alpha.4/node_modules/rrweb/es/rrweb/packages/rrweb-snapshot/es/rrweb-snapshot.js","webpack://SessionSuggester//Users/crusher/Desktop/experiment/test-v2/node_modules/.pnpm/rrweb@2.0.0-alpha.4/node_modules/rrweb/es/rrweb/packages/rrweb/src/utils.js","webpack://SessionSuggester//Users/crusher/Desktop/experiment/test-v2/node_modules/.pnpm/rrweb@2.0.0-alpha.4/node_modules/rrweb/es/rrweb/packages/types/dist/types.js","webpack://SessionSuggester//Users/crusher/Desktop/experiment/test-v2/node_modules/.pnpm/rrweb@2.0.0-alpha.4/node_modules/rrweb/es/rrweb/packages/rrweb/src/record/mutation.js","webpack://SessionSuggester//Users/crusher/Desktop/experiment/test-v2/node_modules/.pnpm/rrweb@2.0.0-alpha.4/node_modules/rrweb/es/rrweb/packages/rrweb/src/record/observer.js","webpack://SessionSuggester//Users/crusher/Desktop/experiment/test-v2/node_modules/.pnpm/rrweb@2.0.0-alpha.4/node_modules/rrweb/es/rrweb/packages/rrweb/src/record/cross-origin-iframe-mirror.js","webpack://SessionSuggester//Users/crusher/Desktop/experiment/test-v2/node_modules/.pnpm/rrweb@2.0.0-alpha.4/node_modules/rrweb/es/rrweb/packages/rrweb/src/record/iframe-manager.js","webpack://SessionSuggester//Users/crusher/Desktop/experiment/test-v2/node_modules/.pnpm/rrweb@2.0.0-alpha.4/node_modules/rrweb/es/rrweb/packages/rrweb/src/record/shadow-dom-manager.js","webpack://SessionSuggester//Users/crusher/Desktop/experiment/test-v2/node_modules/.pnpm/rrweb@2.0.0-alpha.4/node_modules/rrweb/es/rrweb/ext/tslib/tslib.es6.js","webpack://SessionSuggester//Users/crusher/Desktop/experiment/test-v2/node_modules/.pnpm/rrweb@2.0.0-alpha.4/node_modules/rrweb/es/rrweb/ext/base64-arraybuffer/dist/base64-arraybuffer.es5.js","webpack://SessionSuggester//Users/crusher/Desktop/experiment/test-v2/node_modules/.pnpm/rrweb@2.0.0-alpha.4/node_modules/rrweb/es/rrweb/packages/rrweb/src/record/observers/canvas/serialize-args.js","webpack://SessionSuggester//Users/crusher/Desktop/experiment/test-v2/node_modules/.pnpm/rrweb@2.0.0-alpha.4/node_modules/rrweb/es/rrweb/packages/rrweb/src/record/observers/canvas/canvas.js","webpack://SessionSuggester//Users/crusher/Desktop/experiment/test-v2/node_modules/.pnpm/rrweb@2.0.0-alpha.4/node_modules/rrweb/es/rrweb/packages/rrweb/src/record/observers/canvas/webgl.js","webpack://SessionSuggester//Users/crusher/Desktop/experiment/test-v2/node_modules/.pnpm/rrweb@2.0.0-alpha.4/node_modules/rrweb/es/rrweb/_virtual/_rollup-plugin-web-worker-loader__helper__browser__createBase64WorkerFactory.js","webpack://SessionSuggester//Users/crusher/Desktop/experiment/test-v2/node_modules/.pnpm/rrweb@2.0.0-alpha.4/node_modules/rrweb/es/rrweb/_virtual/image-bitmap-data-url-worker.js","webpack://SessionSuggester//Users/crusher/Desktop/experiment/test-v2/node_modules/.pnpm/rrweb@2.0.0-alpha.4/node_modules/rrweb/es/rrweb/_virtual/_rollup-plugin-web-worker-loader__helper__auto__createBase64WorkerFactory.js","webpack://SessionSuggester//Users/crusher/Desktop/experiment/test-v2/node_modules/.pnpm/rrweb@2.0.0-alpha.4/node_modules/rrweb/es/rrweb/packages/rrweb/src/record/observers/canvas/canvas-manager.js","webpack://SessionSuggester//Users/crusher/Desktop/experiment/test-v2/node_modules/.pnpm/rrweb@2.0.0-alpha.4/node_modules/rrweb/es/rrweb/packages/rrweb/src/record/observers/canvas/2d.js","webpack://SessionSuggester//Users/crusher/Desktop/experiment/test-v2/node_modules/.pnpm/rrweb@2.0.0-alpha.4/node_modules/rrweb/es/rrweb/packages/rrweb/src/record/stylesheet-manager.js","webpack://SessionSuggester//Users/crusher/Desktop/experiment/test-v2/node_modules/.pnpm/rrweb@2.0.0-alpha.4/node_modules/rrweb/es/rrweb/packages/rrweb/src/record/index.js","webpack://SessionSuggester/./src/index.ts","webpack://SessionSuggester/./node_modules/nanoid/index.browser.js"],"names":["root","factory","exports","module","define","amd","self","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","kIsNodeJS","toString","process","isNodeJS","createBase64WorkerFactory","base64","sourcemapArg","enableUnicodeArg","sourcemap","undefined","source","enableUnicode","Buffer","from","decodeBase64","start","indexOf","body","substring","options","assign","eval","WorkerClass","WorkerThreads","require","Worker","e","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","Error","defaultClearTimeout","runTimeout","fun","setTimeout","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","length","concat","drainQueue","timeout","len","run","marker","runClearTimeout","Item","array","noop","nextTick","args","Array","arguments","push","apply","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","ieee754","isArray","kMaxLength","TYPED_ARRAY_SUPPORT","createBuffer","that","RangeError","Uint8Array","__proto__","arg","encodingOrOffset","allocUnsafe","TypeError","ArrayBuffer","byteOffset","byteLength","fromArrayLike","fromArrayBuffer","string","encoding","isEncoding","actual","write","slice","fromString","obj","isBuffer","checked","copy","buffer","val","type","data","fromObject","assertSize","size","isView","loweredCase","utf8ToBytes","base64ToBytes","toLowerCase","slowToString","end","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","b","bidirectionalIndexOf","isNaN","arrayIndexOf","lastIndexOf","arr","indexSize","arrLength","valLength","String","read","buf","readUInt16BE","foundIndex","found","j","hexWrite","offset","Number","remaining","strLen","parsed","parseInt","substr","utf8Write","blitBuffer","asciiWrite","str","byteArray","charCodeAt","asciiToBytes","latin1Write","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","fromByteArray","Math","min","res","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","fromCharCode","decodeCodePointsArray","SlowBuffer","alloc","INSPECT_MAX_BYTES","global","foo","subarray","typedArraySupport","poolSize","_augment","species","configurable","fill","allocUnsafeSlow","_isBuffer","compare","a","x","y","list","pos","swap16","swap32","swap64","equals","inspect","max","match","join","target","thisStart","thisEnd","thisCopy","targetCopy","includes","isFinite","toJSON","_arr","ret","out","toHex","bytes","checkOffset","ext","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","floor","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","set","code","INVALID_BASE64_RE","Infinity","leadSurrogate","toByteArray","trim","replace","stringtrim","base64clean","src","dst","g","Function","window","b64","lens","getLens","validLen","placeHoldersLen","tmp","Arr","_byteLength","curByte","revLookup","uint8","extraBytes","parts","len2","encodeChunk","lookup","num","output","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","rt","abs","log","LN2","originalModule","webpackPolyfill","children","NodeType","isElement","nodeType","ELEMENT_NODE","isShadowRoot","host","Boolean","shadowRoot","isNativeShadowDom","getCssRulesString","rules","cssRules","cssText","map","getCssRuleString","error","rule","cssStringified","isCSSImportRule","styleSheet","_a","Mirror","idNodeMap","Map","nodeMetaMap","WeakMap","getId","id","getMeta","getNode","getIds","keys","removeNodeFromMap","_this","childNodes","forEach","childNode","has","hasNode","node","add","meta","oldNode","reset","maskInputValue","maskInputOptions","tagName","maskInputFn","text","repeat","canvasService","canvasCtx","_id","tagNameRegex","RegExp","genId","URL_IN_CSS_REF","RELATIVE_PATH","DATA_URI","absoluteToStylesheet","href","origin","quote1","path1","quote2","path2","path3","url","filePath","maybeQuote","test","split","stack","pop","_i","parts_1","part","SRCSET_NOT_SPACES","SRCSET_COMMAS_OR_SPACES","absoluteToDoc","doc","attributeValue","createElement","getHref","document","transformAttribute","collectCharacters","regEx","chars","exec","descriptorsStr","inParens","charAt","getAbsoluteSrcsetString","classMatchesRegex","regex","checkAncestors","parentNode","eIndex","classList","className","needMaskingText","maskTextClass","maskTextSelector","el","parentElement","contains","closest","matches","serializeNode","mirror","blockClass","blockSelector","inlineStylesheet","maskTextFn","_b","dataURLOptions","inlineImages","recordCanvas","keepIframeSrcFn","_c","newlyAddedElement","rootId","docId","getRootId","DOCUMENT_NODE","compatMode","Document","DOCUMENT_TYPE_NODE","DocumentType","publicId","systemId","needBlock","element","_isBlockedElement","HTMLFormElement","processedTagName","getValidTagName","attributes","attr","stylesheet","styleSheets","find","rel","_cssText","sheet","innerText","textContent","selected","__context","canvas","ctx","getContext","width","height","getImageData","originalGetImageData","Uint32Array","some","pixel","is2DCanvasBlank","rr_dataURL","toDataURL","quality","canvasDataURL","blankCanvas","blankCanvasDataURL","image_1","oldValue_1","crossOrigin","recordInlineImage","naturalWidth","naturalHeight","drawImage","err","console","warn","currentSrc","removeAttribute","complete","onload","rr_mediaState","paused","rr_mediaCurrentTime","currentTime","scrollLeft","rr_scrollLeft","scrollTop","rr_scrollTop","_d","getBoundingClientRect","rr_width","rr_height","contentDocument","rr_src","Element","isSVG","ownerSVGElement","serializeElementNode","TEXT_NODE","parentTagName","isStyle","isScript","nextSibling","previousSibling","Text","serializeTextNode","CDATA_SECTION_NODE","CDATA","COMMENT_NODE","Comment","lowerIfExists","maybeAttr","serializeNodeWithId","skipChild","slimDOMOptions","_e","_f","onSerialize","onIframeLoad","_g","iframeLoadTimeout","onStylesheetLoad","_h","stylesheetLoadTimeout","_j","_k","_l","preserveWhiteSpace","_serializedNode","sn","comment","script","as","endsWith","headFavicon","headMetaDescKeywords","headMetaSocial","headMetaRobots","headMetaHttpEquiv","headMetaAuthorship","headMetaVerification","slimDOMExcluded","serializedNode","recordChild","isShadowHost","headWhitespace","bypassOptions","_m","serializedChildNode","_o","_p","isShadow","iframeEl","listener","win","contentWindow","readyState","fired","location","addEventListener","timer_1","onceIframeLoaded","iframeDoc","serializedIframeNode","link","styleSheetLoadTimeout","styleSheetLoaded","timer","onceStylesheetLoaded","serializedLinkNode","HOVER_SELECTOR","fn","capture","passive","removeEventListener","DEPARTED_MIRROR_ACCESS_WARNING","_mirror","throttle","func","wait","previous","now","Date","leading","context","trailing","hookSetter","isRevoked","original","getOwnPropertyDescriptor","patch","replacement","wrapped","defineProperties","__rrweb_original__","getWindowHeight","innerHeight","documentElement","clientHeight","getWindowWidth","innerWidth","clientWidth","isBlocked","isIgnored","isTouchEvent","event","changedTouches","isSerializedIframe","nodeName","isSerializedStylesheet","getAttribute","hasShadowRoot","Proxy","Reflect","prop","receiver","StyleSheetMirror","styleIDMap","idStyleMap","newId","EventType","EventType2","IncrementalSource","IncrementalSource2","MouseInteractions","MouseInteractions2","CanvasContext","CanvasContext2","isNodeInLinkedList","DoubleLinkedList","head","position","current","index","next","__ln","moveKey","parentId","frozen","locked","texts","removes","mapRemoves","movedMap","addedSet","Set","movedSet","droppedSet","processMutations","mutations","processMutation","adds","addList","getNextId","nextId","pushAdd","shadowHost","getRootNode","Node","DOCUMENT_FRAGMENT_NODE","rootShadowHost","notInDoc","addNode","currentN","iframeManager","addIframe","stylesheetManager","trackLinkElement","shadowDomManager","addShadowRoot","iframe","childSn","attachIframe","observeAttachShadow","attachLinkElement","shift","values","isParentRemoved","isAncestorInSet","candidate","_node","unhandledNode","removeNode","payload","filter","attribute","mutationCb","oldValue","attributeName","item","old","setAttribute","style","styleObj","pname","newValue","getPropertyValue","newPriority","getPropertyPriority","addedNodes","genAdds","removedNodes","nodeId","isSerialized","deepDelete","isAncestorRemoved","targetId","delete","childN","canvasManager","freeze","unfreeze","lock","unlock","addsSet","_isParentRemoved","_isAncestorInSet","mutationBuffers","isCSSGroupingRuleSupported","CSSGroupingRule","isCSSMediaRuleSupported","CSSMediaRule","isCSSSupportsRuleSupported","CSSSupportsRule","isCSSConditionRuleSupported","CSSConditionRule","getEventTarget","path","composedPath","initMutationObserver","rootEl","mutationBuffer","init","mutationObserverCtor","MutationObserver","__rrMutationObserver","angularZoneSymbol","Zone","__symbol__","observer","observe","attributeOldValue","characterData","characterDataOldValue","childList","subtree","initMouseInteractionObserver","mouseInteractionCb","sampling","mouseInteraction","disableMap","handlers","eventKey","eventName","handler","clientX","clientY","getHandler","h","initScrollObserver","scrollCb","evt","scrollEl","scrollingElement","scroll","wrapEventWithUserTriggeredFlag","v","enable","userTriggered","INPUT_TAGS","lastInputValueMap","getNestedCSSRulePositions","childRule","parentRule","unshift","parentStyleSheet","recurse","getIdAndStyleId","styleMirror","styleId","ownerNode","initAdoptedStyleSheetObserver","hostId","patchTarget","defaultView","ownerDocument","ShadowRoot","originalPropertyDescriptor","sheets","result","adoptStyleSheets","initObservers","hooks","currentWindow","mousemoveCb","viewportResizeCb","inputCb","mediaInteractionCb","styleSheetRuleCb","styleDeclarationCb","canvasMutationCb","fontCb","selectionCb","mutation","mousemove","viewportResize","input","mediaInteaction","styleSheetRule","styleDeclaration","canvasMutation","font","selection","mergeHooks","mutationObserver","mousemoveHandler","threshold","callbackThreshold","mousemoveCallback","timeBaseline","positions","wrappedCb","totalOffset","timeOffset","updatePosition","DragEvent","Drag","MouseEvent","MouseMove","TouchMove","initMoveObserver","mouseInteractionHandler","scrollHandler","viewportResizeHandler","lastH","lastW","initViewportResizeObserver","inputHandler","ignoreClass","userTriggeredOnInput","eventHandler","isTrusted","isChecked","cbWithDedup","querySelectorAll","lastInputValue","propertyDescriptor","HTMLInputElement","hookProperties","HTMLSelectElement","HTMLTextAreaElement","HTMLOptionElement","initInputObserver","mediaInteractionHandler","volume","muted","playbackRate","media","initMediaInteractionObserver","styleSheetObserver","insertRule","CSSStyleSheet","deleteRule","replaceSync","supportedNestedCSSRuleTypes","unmodifiedFunctions","entries","typeKey","initStyleSheetObserver","adoptedStyleSheetObserver","styleDeclarationObserver","ignoreCSSAttributes","setProperty","CSSStyleDeclaration","priority","removeProperty","remove","initStyleDeclarationObserver","fontObserver","collectFonts","fontMap","originalFontFace","FontFace","family","descriptors","fontFace","fontSource","JSON","stringify","restoreHandler","fonts","initFontObserver","selectionObserver","param","collapsed","updateSelection","getSelection","isCollapsed","ranges","count","rangeCount","range","getRangeAt","startContainer","startOffset","endContainer","endOffset","initSelectionObserver","pluginHandlers","plugin","plugins","callback","disconnect","CrossOriginIframeMirror","generateIdFn","iframeIdToRemoteIdMap","iframeRemoteIdToIdMap","remoteId","idToRemoteMap","remoteToIdMap","idToRemoteIdMap","getIdToRemoteIdMap","remoteIdToIdMap","getRemoteIdToIdMap","ids","getRemoteId","iframes","crossOriginIframeMap","crossOriginIframeMirror","wrappedEmit","recordCrossOriginIframes","crossOriginIframeStyleMirror","generateId","handleMessage","cb","loadListener","isAttachIframe","adoptedStyleSheets","message","transformedEvent","transformCrossOriginEvent","isCheckout","FullSnapshot","replaceIdOnNode","timestamp","IncrementalSnapshot","Mutation","Meta","Load","DomContentLoaded","Plugin","Custom","replaceIds","ViewportResize","MediaInteraction","MouseInteraction","Scroll","CanvasMutation","Input","StyleSheetRule","StyleDeclaration","replaceStyleIds","Font","Selection","AdoptedStyleSheet","styles","iframeMirror","child","shadowDoms","WeakSet","restorePatches","manager","option","iframeElement","HTMLElement","restorePatch","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","rejected","done","then","canvasVarMap","saveWebGLVar","isInstanceOfWebGLObject","ctor","contextMap","variableListFor","constructor","serializeArg","Float32Array","Float64Array","Int32Array","Uint16Array","Int16Array","Int8Array","Uint8ClampedArray","rr_type","arraybuffer","encode","DataView","HTMLImageElement","HTMLCanvasElement","ImageData","serializeArgs","supportedWebGLConstructorNames","initCanvasContextObserver","contextType","patchGLPrototype","props","getOwnPropertyNames","recordArgs","hookHandler","setter","createURL","binaryString","atob","binaryView","blob","Blob","URL","createObjectURL","WorkerFactory","pendingCanvasMutations","rafStamps","latestId","invokeId","initCanvasMutationObserver","initCanvasFPSObserver","clear","resetObservers","fps","canvasContextReset","snapshotInProgressMap","worker","onmessage","commands","timeBetweenSnapshots","rafId","lastSnapshotTime","takeCanvasSnapshots","matchedCanvas","getCanvas","getContextAttributes","preserveDrawingBuffer","COLOR_BUFFER_BIT","bitmap","createImageBitmap","postMessage","requestAnimationFrame","cancelAnimationFrame","startRAFTimestamping","startPendingCanvasMutationFlusher","canvas2DReset","props2D","CanvasRenderingContext2D","initCanvas2DMutationObserver","canvasWebGL1and2Reset","WebGLRenderingContext","WebGL","WebGL2RenderingContext","WebGL2","initCanvasWebGLMutationObserver","flushPendingCanvasMutations","setLatestRAFTimestamp","flushPendingCanvasMutationFor","valuesWithType","getOwnPropertySymbols","propertyIsEnumerable","__rest","trackedLinkElements","adoptedStyleSheetCb","linkEl","trackStylesheetInLinkElement","adoptedStyleSheetData","styleIds","CSSRule","wrapEvent","takeFullSnapshot","recording","record","checkoutEveryNms","checkoutEveryNth","maskAllInputs","_maskInputOptions","_slimDOMOptions","packFn","mousemoveWait","inEmittingFrame","parent","passEmitsToParent","color","date","email","month","number","search","tel","time","week","textarea","select","password","lastFullSnapshotEvent","NodeList","DOMTokenList","polyfill","incrementalSnapshotCount","eventProcessor","isFrozen","exceedCount","exceedTime","wrappedMutationEmit","wrappedScrollEmit","wrappedCanvasMutationEmit","getMirror","nodeMirror","slimDOM","snapshot","initialOffset","left","pageXOffset","top","pageYOffset","addLoadListener","addCustomEvent","tag","freezePage","SessionSuggester","startRecording","apiHost","recordingID","crypto","getRandomValues","reduce","byte","toUpperCase","nanoid","handleEvent","setInterval","saveEventINBE","events","fetch","method","headers","stopRecording"],"mappings":"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","file":"SessionSuggester.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"SessionSuggester\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"SessionSuggester\"] = factory();\n\telse\n\t\troot[\"SessionSuggester\"] = factory();\n})((typeof self !== 'undefined' ? self : this), function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n","var kIsNodeJS = Object.prototype.toString.call(typeof process !== 'undefined' ? process : 0) === '[object process]';\n\nfunction isNodeJS() {\n    return kIsNodeJS;\n}\n\nexport { isNodeJS };\n","import { WorkerClass } from './_rollup-plugin-web-worker-loader__helper__node__WorkerClass.js';\n\nfunction decodeBase64(base64, enableUnicode) {\n    return Buffer.from(base64, 'base64').toString(enableUnicode ? 'utf16' : 'utf8');\n}\n\nfunction createBase64WorkerFactory(base64, sourcemapArg, enableUnicodeArg) {\n    var sourcemap = sourcemapArg === undefined ? null : sourcemapArg;\n    var enableUnicode = enableUnicodeArg === undefined ? false : enableUnicodeArg;\n    var source = decodeBase64(base64, enableUnicode);\n    var start = source.indexOf('\\n', 10) + 1;\n    var body = source.substring(start) + (sourcemap ? '\\/\\/# sourceMappingURL=' + sourcemap : '');\n    return function WorkerFactory(options) {\n        return new WorkerClass(body, Object.assign({}, options, { eval: true }));\n    };\n}\n\nexport { createBase64WorkerFactory };\n","var WorkerClass = null;\n\ntry {\n    var WorkerThreads =\n        typeof module !== 'undefined' && typeof module.require === 'function' && module.require('worker_threads') ||\n        typeof __non_webpack_require__ === 'function' && __non_webpack_require__('worker_threads') ||\n        typeof require === 'function' && require('worker_threads');\n    WorkerClass = WorkerThreads.Worker;\n} catch(e) {} // eslint-disable-line\n\nexport { WorkerClass };\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","module.exports = function(originalModule) {\n\tif (!originalModule.webpackPolyfill) {\n\t\tvar module = Object.create(originalModule);\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"exports\", {\n\t\t\tenumerable: true\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","var NodeType;\r\n(function (NodeType) {\r\n    NodeType[NodeType[\"Document\"] = 0] = \"Document\";\r\n    NodeType[NodeType[\"DocumentType\"] = 1] = \"DocumentType\";\r\n    NodeType[NodeType[\"Element\"] = 2] = \"Element\";\r\n    NodeType[NodeType[\"Text\"] = 3] = \"Text\";\r\n    NodeType[NodeType[\"CDATA\"] = 4] = \"CDATA\";\r\n    NodeType[NodeType[\"Comment\"] = 5] = \"Comment\";\r\n})(NodeType || (NodeType = {}));\n\nfunction isElement(n) {\r\n    return n.nodeType === n.ELEMENT_NODE;\r\n}\r\nfunction isShadowRoot(n) {\r\n    var host = n === null || n === void 0 ? void 0 : n.host;\r\n    return Boolean((host === null || host === void 0 ? void 0 : host.shadowRoot) === n);\r\n}\r\nfunction isNativeShadowDom(shadowRoot) {\r\n    return Object.prototype.toString.call(shadowRoot) === '[object ShadowRoot]';\r\n}\r\nfunction fixBrowserCompatibilityIssuesInCSS(cssText) {\r\n    if (cssText.includes(' background-clip: text;') &&\r\n        !cssText.includes(' -webkit-background-clip: text;')) {\r\n        cssText = cssText.replace(' background-clip: text;', ' -webkit-background-clip: text; background-clip: text;');\r\n    }\r\n    return cssText;\r\n}\r\nfunction getCssRulesString(s) {\r\n    try {\r\n        var rules = s.rules || s.cssRules;\r\n        return rules\r\n            ? fixBrowserCompatibilityIssuesInCSS(Array.from(rules).map(getCssRuleString).join(''))\r\n            : null;\r\n    }\r\n    catch (error) {\r\n        return null;\r\n    }\r\n}\r\nfunction getCssRuleString(rule) {\r\n    var cssStringified = rule.cssText;\r\n    if (isCSSImportRule(rule)) {\r\n        try {\r\n            cssStringified = getCssRulesString(rule.styleSheet) || cssStringified;\r\n        }\r\n        catch (_a) {\r\n        }\r\n    }\r\n    return cssStringified;\r\n}\r\nfunction isCSSImportRule(rule) {\r\n    return 'styleSheet' in rule;\r\n}\r\nvar Mirror = (function () {\r\n    function Mirror() {\r\n        this.idNodeMap = new Map();\r\n        this.nodeMetaMap = new WeakMap();\r\n    }\r\n    Mirror.prototype.getId = function (n) {\r\n        var _a;\r\n        if (!n)\r\n            return -1;\r\n        var id = (_a = this.getMeta(n)) === null || _a === void 0 ? void 0 : _a.id;\r\n        return id !== null && id !== void 0 ? id : -1;\r\n    };\r\n    Mirror.prototype.getNode = function (id) {\r\n        return this.idNodeMap.get(id) || null;\r\n    };\r\n    Mirror.prototype.getIds = function () {\r\n        return Array.from(this.idNodeMap.keys());\r\n    };\r\n    Mirror.prototype.getMeta = function (n) {\r\n        return this.nodeMetaMap.get(n) || null;\r\n    };\r\n    Mirror.prototype.removeNodeFromMap = function (n) {\r\n        var _this = this;\r\n        var id = this.getId(n);\r\n        this.idNodeMap[\"delete\"](id);\r\n        if (n.childNodes) {\r\n            n.childNodes.forEach(function (childNode) {\r\n                return _this.removeNodeFromMap(childNode);\r\n            });\r\n        }\r\n    };\r\n    Mirror.prototype.has = function (id) {\r\n        return this.idNodeMap.has(id);\r\n    };\r\n    Mirror.prototype.hasNode = function (node) {\r\n        return this.nodeMetaMap.has(node);\r\n    };\r\n    Mirror.prototype.add = function (n, meta) {\r\n        var id = meta.id;\r\n        this.idNodeMap.set(id, n);\r\n        this.nodeMetaMap.set(n, meta);\r\n    };\r\n    Mirror.prototype.replace = function (id, n) {\r\n        var oldNode = this.getNode(id);\r\n        if (oldNode) {\r\n            var meta = this.nodeMetaMap.get(oldNode);\r\n            if (meta)\r\n                this.nodeMetaMap.set(n, meta);\r\n        }\r\n        this.idNodeMap.set(id, n);\r\n    };\r\n    Mirror.prototype.reset = function () {\r\n        this.idNodeMap = new Map();\r\n        this.nodeMetaMap = new WeakMap();\r\n    };\r\n    return Mirror;\r\n}());\r\nfunction createMirror() {\r\n    return new Mirror();\r\n}\r\nfunction maskInputValue(_a) {\r\n    var maskInputOptions = _a.maskInputOptions, tagName = _a.tagName, type = _a.type, value = _a.value, maskInputFn = _a.maskInputFn;\r\n    var text = value || '';\r\n    if (maskInputOptions[tagName.toLowerCase()] ||\r\n        maskInputOptions[type]) {\r\n        if (maskInputFn) {\r\n            text = maskInputFn(text);\r\n        }\r\n        else {\r\n            text = '*'.repeat(text.length);\r\n        }\r\n    }\r\n    return text;\r\n}\r\nvar ORIGINAL_ATTRIBUTE_NAME = '__rrweb_original__';\r\nfunction is2DCanvasBlank(canvas) {\r\n    var ctx = canvas.getContext('2d');\r\n    if (!ctx)\r\n        return true;\r\n    var chunkSize = 50;\r\n    for (var x = 0; x < canvas.width; x += chunkSize) {\r\n        for (var y = 0; y < canvas.height; y += chunkSize) {\r\n            var getImageData = ctx.getImageData;\r\n            var originalGetImageData = ORIGINAL_ATTRIBUTE_NAME in getImageData\r\n                ? getImageData[ORIGINAL_ATTRIBUTE_NAME]\r\n                : getImageData;\r\n            var pixelBuffer = new Uint32Array(originalGetImageData.call(ctx, x, y, Math.min(chunkSize, canvas.width - x), Math.min(chunkSize, canvas.height - y)).data.buffer);\r\n            if (pixelBuffer.some(function (pixel) { return pixel !== 0; }))\r\n                return false;\r\n        }\r\n    }\r\n    return true;\r\n}\n\nvar _id = 1;\r\nvar tagNameRegex = new RegExp('[^a-z0-9-_:]');\r\nvar IGNORED_NODE = -2;\r\nfunction genId() {\r\n    return _id++;\r\n}\r\nfunction getValidTagName(element) {\r\n    if (element instanceof HTMLFormElement) {\r\n        return 'form';\r\n    }\r\n    var processedTagName = element.tagName.toLowerCase().trim();\r\n    if (tagNameRegex.test(processedTagName)) {\r\n        return 'div';\r\n    }\r\n    return processedTagName;\r\n}\r\nfunction stringifyStyleSheet(sheet) {\r\n    return sheet.cssRules\r\n        ? Array.from(sheet.cssRules)\r\n            .map(function (rule) { return rule.cssText || ''; })\r\n            .join('')\r\n        : '';\r\n}\r\nfunction extractOrigin(url) {\r\n    var origin = '';\r\n    if (url.indexOf('//') > -1) {\r\n        origin = url.split('/').slice(0, 3).join('/');\r\n    }\r\n    else {\r\n        origin = url.split('/')[0];\r\n    }\r\n    origin = origin.split('?')[0];\r\n    return origin;\r\n}\r\nvar canvasService;\r\nvar canvasCtx;\r\nvar URL_IN_CSS_REF = /url\\((?:(')([^']*)'|(\")(.*?)\"|([^)]*))\\)/gm;\r\nvar RELATIVE_PATH = /^(?!www\\.|(?:http|ftp)s?:\\/\\/|[A-Za-z]:\\\\|\\/\\/|#).*/;\r\nvar DATA_URI = /^(data:)([^,]*),(.*)/i;\r\nfunction absoluteToStylesheet(cssText, href) {\r\n    return (cssText || '').replace(URL_IN_CSS_REF, function (origin, quote1, path1, quote2, path2, path3) {\r\n        var filePath = path1 || path2 || path3;\r\n        var maybeQuote = quote1 || quote2 || '';\r\n        if (!filePath) {\r\n            return origin;\r\n        }\r\n        if (!RELATIVE_PATH.test(filePath)) {\r\n            return \"url(\".concat(maybeQuote).concat(filePath).concat(maybeQuote, \")\");\r\n        }\r\n        if (DATA_URI.test(filePath)) {\r\n            return \"url(\".concat(maybeQuote).concat(filePath).concat(maybeQuote, \")\");\r\n        }\r\n        if (filePath[0] === '/') {\r\n            return \"url(\".concat(maybeQuote).concat(extractOrigin(href) + filePath).concat(maybeQuote, \")\");\r\n        }\r\n        var stack = href.split('/');\r\n        var parts = filePath.split('/');\r\n        stack.pop();\r\n        for (var _i = 0, parts_1 = parts; _i < parts_1.length; _i++) {\r\n            var part = parts_1[_i];\r\n            if (part === '.') {\r\n                continue;\r\n            }\r\n            else if (part === '..') {\r\n                stack.pop();\r\n            }\r\n            else {\r\n                stack.push(part);\r\n            }\r\n        }\r\n        return \"url(\".concat(maybeQuote).concat(stack.join('/')).concat(maybeQuote, \")\");\r\n    });\r\n}\r\nvar SRCSET_NOT_SPACES = /^[^ \\t\\n\\r\\u000c]+/;\r\nvar SRCSET_COMMAS_OR_SPACES = /^[, \\t\\n\\r\\u000c]+/;\r\nfunction getAbsoluteSrcsetString(doc, attributeValue) {\r\n    if (attributeValue.trim() === '') {\r\n        return attributeValue;\r\n    }\r\n    var pos = 0;\r\n    function collectCharacters(regEx) {\r\n        var chars;\r\n        var match = regEx.exec(attributeValue.substring(pos));\r\n        if (match) {\r\n            chars = match[0];\r\n            pos += chars.length;\r\n            return chars;\r\n        }\r\n        return '';\r\n    }\r\n    var output = [];\r\n    while (true) {\r\n        collectCharacters(SRCSET_COMMAS_OR_SPACES);\r\n        if (pos >= attributeValue.length) {\r\n            break;\r\n        }\r\n        var url = collectCharacters(SRCSET_NOT_SPACES);\r\n        if (url.slice(-1) === ',') {\r\n            url = absoluteToDoc(doc, url.substring(0, url.length - 1));\r\n            output.push(url);\r\n        }\r\n        else {\r\n            var descriptorsStr = '';\r\n            url = absoluteToDoc(doc, url);\r\n            var inParens = false;\r\n            while (true) {\r\n                var c = attributeValue.charAt(pos);\r\n                if (c === '') {\r\n                    output.push((url + descriptorsStr).trim());\r\n                    break;\r\n                }\r\n                else if (!inParens) {\r\n                    if (c === ',') {\r\n                        pos += 1;\r\n                        output.push((url + descriptorsStr).trim());\r\n                        break;\r\n                    }\r\n                    else if (c === '(') {\r\n                        inParens = true;\r\n                    }\r\n                }\r\n                else {\r\n                    if (c === ')') {\r\n                        inParens = false;\r\n                    }\r\n                }\r\n                descriptorsStr += c;\r\n                pos += 1;\r\n            }\r\n        }\r\n    }\r\n    return output.join(', ');\r\n}\r\nfunction absoluteToDoc(doc, attributeValue) {\r\n    if (!attributeValue || attributeValue.trim() === '') {\r\n        return attributeValue;\r\n    }\r\n    var a = doc.createElement('a');\r\n    a.href = attributeValue;\r\n    return a.href;\r\n}\r\nfunction isSVGElement(el) {\r\n    return Boolean(el.tagName === 'svg' || el.ownerSVGElement);\r\n}\r\nfunction getHref() {\r\n    var a = document.createElement('a');\r\n    a.href = '';\r\n    return a.href;\r\n}\r\nfunction transformAttribute(doc, tagName, name, value) {\r\n    if (name === 'src' ||\r\n        (name === 'href' && value && !(tagName === 'use' && value[0] === '#'))) {\r\n        return absoluteToDoc(doc, value);\r\n    }\r\n    else if (name === 'xlink:href' && value && value[0] !== '#') {\r\n        return absoluteToDoc(doc, value);\r\n    }\r\n    else if (name === 'background' &&\r\n        value &&\r\n        (tagName === 'table' || tagName === 'td' || tagName === 'th')) {\r\n        return absoluteToDoc(doc, value);\r\n    }\r\n    else if (name === 'srcset' && value) {\r\n        return getAbsoluteSrcsetString(doc, value);\r\n    }\r\n    else if (name === 'style' && value) {\r\n        return absoluteToStylesheet(value, getHref());\r\n    }\r\n    else if (tagName === 'object' && name === 'data' && value) {\r\n        return absoluteToDoc(doc, value);\r\n    }\r\n    else {\r\n        return value;\r\n    }\r\n}\r\nfunction _isBlockedElement(element, blockClass, blockSelector) {\r\n    if (typeof blockClass === 'string') {\r\n        if (element.classList.contains(blockClass)) {\r\n            return true;\r\n        }\r\n    }\r\n    else {\r\n        for (var eIndex = element.classList.length; eIndex--;) {\r\n            var className = element.classList[eIndex];\r\n            if (blockClass.test(className)) {\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n    if (blockSelector) {\r\n        return element.matches(blockSelector);\r\n    }\r\n    return false;\r\n}\r\nfunction classMatchesRegex(node, regex, checkAncestors) {\r\n    if (!node)\r\n        return false;\r\n    if (node.nodeType !== node.ELEMENT_NODE) {\r\n        if (!checkAncestors)\r\n            return false;\r\n        return classMatchesRegex(node.parentNode, regex, checkAncestors);\r\n    }\r\n    for (var eIndex = node.classList.length; eIndex--;) {\r\n        var className = node.classList[eIndex];\r\n        if (regex.test(className)) {\r\n            return true;\r\n        }\r\n    }\r\n    if (!checkAncestors)\r\n        return false;\r\n    return classMatchesRegex(node.parentNode, regex, checkAncestors);\r\n}\r\nfunction needMaskingText(node, maskTextClass, maskTextSelector) {\r\n    var el = node.nodeType === node.ELEMENT_NODE\r\n        ? node\r\n        : node.parentElement;\r\n    if (el === null)\r\n        return false;\r\n    if (typeof maskTextClass === 'string') {\r\n        if (el.classList.contains(maskTextClass))\r\n            return true;\r\n        if (el.closest(\".\".concat(maskTextClass)))\r\n            return true;\r\n    }\r\n    else {\r\n        if (classMatchesRegex(el, maskTextClass, true))\r\n            return true;\r\n    }\r\n    if (maskTextSelector) {\r\n        if (el.matches(maskTextSelector))\r\n            return true;\r\n        if (el.closest(maskTextSelector))\r\n            return true;\r\n    }\r\n    return false;\r\n}\r\nfunction onceIframeLoaded(iframeEl, listener, iframeLoadTimeout) {\r\n    var win = iframeEl.contentWindow;\r\n    if (!win) {\r\n        return;\r\n    }\r\n    var fired = false;\r\n    var readyState;\r\n    try {\r\n        readyState = win.document.readyState;\r\n    }\r\n    catch (error) {\r\n        return;\r\n    }\r\n    if (readyState !== 'complete') {\r\n        var timer_1 = setTimeout(function () {\r\n            if (!fired) {\r\n                listener();\r\n                fired = true;\r\n            }\r\n        }, iframeLoadTimeout);\r\n        iframeEl.addEventListener('load', function () {\r\n            clearTimeout(timer_1);\r\n            fired = true;\r\n            listener();\r\n        });\r\n        return;\r\n    }\r\n    var blankUrl = 'about:blank';\r\n    if (win.location.href !== blankUrl ||\r\n        iframeEl.src === blankUrl ||\r\n        iframeEl.src === '') {\r\n        setTimeout(listener, 0);\r\n        return iframeEl.addEventListener('load', listener);\r\n    }\r\n    iframeEl.addEventListener('load', listener);\r\n}\r\nfunction onceStylesheetLoaded(link, listener, styleSheetLoadTimeout) {\r\n    var fired = false;\r\n    var styleSheetLoaded;\r\n    try {\r\n        styleSheetLoaded = link.sheet;\r\n    }\r\n    catch (error) {\r\n        return;\r\n    }\r\n    if (styleSheetLoaded)\r\n        return;\r\n    var timer = setTimeout(function () {\r\n        if (!fired) {\r\n            listener();\r\n            fired = true;\r\n        }\r\n    }, styleSheetLoadTimeout);\r\n    link.addEventListener('load', function () {\r\n        clearTimeout(timer);\r\n        fired = true;\r\n        listener();\r\n    });\r\n}\r\nfunction serializeNode(n, options) {\r\n    var doc = options.doc, mirror = options.mirror, blockClass = options.blockClass, blockSelector = options.blockSelector, maskTextClass = options.maskTextClass, maskTextSelector = options.maskTextSelector, inlineStylesheet = options.inlineStylesheet, _a = options.maskInputOptions, maskInputOptions = _a === void 0 ? {} : _a, maskTextFn = options.maskTextFn, maskInputFn = options.maskInputFn, _b = options.dataURLOptions, dataURLOptions = _b === void 0 ? {} : _b, inlineImages = options.inlineImages, recordCanvas = options.recordCanvas, keepIframeSrcFn = options.keepIframeSrcFn, _c = options.newlyAddedElement, newlyAddedElement = _c === void 0 ? false : _c;\r\n    var rootId = getRootId(doc, mirror);\r\n    switch (n.nodeType) {\r\n        case n.DOCUMENT_NODE:\r\n            if (n.compatMode !== 'CSS1Compat') {\r\n                return {\r\n                    type: NodeType.Document,\r\n                    childNodes: [],\r\n                    compatMode: n.compatMode\r\n                };\r\n            }\r\n            else {\r\n                return {\r\n                    type: NodeType.Document,\r\n                    childNodes: []\r\n                };\r\n            }\r\n        case n.DOCUMENT_TYPE_NODE:\r\n            return {\r\n                type: NodeType.DocumentType,\r\n                name: n.name,\r\n                publicId: n.publicId,\r\n                systemId: n.systemId,\r\n                rootId: rootId\r\n            };\r\n        case n.ELEMENT_NODE:\r\n            return serializeElementNode(n, {\r\n                doc: doc,\r\n                blockClass: blockClass,\r\n                blockSelector: blockSelector,\r\n                inlineStylesheet: inlineStylesheet,\r\n                maskInputOptions: maskInputOptions,\r\n                maskInputFn: maskInputFn,\r\n                dataURLOptions: dataURLOptions,\r\n                inlineImages: inlineImages,\r\n                recordCanvas: recordCanvas,\r\n                keepIframeSrcFn: keepIframeSrcFn,\r\n                newlyAddedElement: newlyAddedElement,\r\n                rootId: rootId\r\n            });\r\n        case n.TEXT_NODE:\r\n            return serializeTextNode(n, {\r\n                maskTextClass: maskTextClass,\r\n                maskTextSelector: maskTextSelector,\r\n                maskTextFn: maskTextFn,\r\n                rootId: rootId\r\n            });\r\n        case n.CDATA_SECTION_NODE:\r\n            return {\r\n                type: NodeType.CDATA,\r\n                textContent: '',\r\n                rootId: rootId\r\n            };\r\n        case n.COMMENT_NODE:\r\n            return {\r\n                type: NodeType.Comment,\r\n                textContent: n.textContent || '',\r\n                rootId: rootId\r\n            };\r\n        default:\r\n            return false;\r\n    }\r\n}\r\nfunction getRootId(doc, mirror) {\r\n    if (!mirror.hasNode(doc))\r\n        return undefined;\r\n    var docId = mirror.getId(doc);\r\n    return docId === 1 ? undefined : docId;\r\n}\r\nfunction serializeTextNode(n, options) {\r\n    var _a;\r\n    var maskTextClass = options.maskTextClass, maskTextSelector = options.maskTextSelector, maskTextFn = options.maskTextFn, rootId = options.rootId;\r\n    var parentTagName = n.parentNode && n.parentNode.tagName;\r\n    var textContent = n.textContent;\r\n    var isStyle = parentTagName === 'STYLE' ? true : undefined;\r\n    var isScript = parentTagName === 'SCRIPT' ? true : undefined;\r\n    if (isStyle && textContent) {\r\n        try {\r\n            if (n.nextSibling || n.previousSibling) {\r\n            }\r\n            else if ((_a = n.parentNode.sheet) === null || _a === void 0 ? void 0 : _a.cssRules) {\r\n                textContent = stringifyStyleSheet(n.parentNode.sheet);\r\n            }\r\n        }\r\n        catch (err) {\r\n            console.warn(\"Cannot get CSS styles from text's parentNode. Error: \".concat(err), n);\r\n        }\r\n        textContent = absoluteToStylesheet(textContent, getHref());\r\n    }\r\n    if (isScript) {\r\n        textContent = 'SCRIPT_PLACEHOLDER';\r\n    }\r\n    if (!isStyle &&\r\n        !isScript &&\r\n        textContent &&\r\n        needMaskingText(n, maskTextClass, maskTextSelector)) {\r\n        textContent = maskTextFn\r\n            ? maskTextFn(textContent)\r\n            : textContent.replace(/[\\S]/g, '*');\r\n    }\r\n    return {\r\n        type: NodeType.Text,\r\n        textContent: textContent || '',\r\n        isStyle: isStyle,\r\n        rootId: rootId\r\n    };\r\n}\r\nfunction serializeElementNode(n, options) {\r\n    var doc = options.doc, blockClass = options.blockClass, blockSelector = options.blockSelector, inlineStylesheet = options.inlineStylesheet, _a = options.maskInputOptions, maskInputOptions = _a === void 0 ? {} : _a, maskInputFn = options.maskInputFn, _b = options.dataURLOptions, dataURLOptions = _b === void 0 ? {} : _b, inlineImages = options.inlineImages, recordCanvas = options.recordCanvas, keepIframeSrcFn = options.keepIframeSrcFn, _c = options.newlyAddedElement, newlyAddedElement = _c === void 0 ? false : _c, rootId = options.rootId;\r\n    var needBlock = _isBlockedElement(n, blockClass, blockSelector);\r\n    var tagName = getValidTagName(n);\r\n    var attributes = {};\r\n    var len = n.attributes.length;\r\n    for (var i = 0; i < len; i++) {\r\n        var attr = n.attributes[i];\r\n        attributes[attr.name] = transformAttribute(doc, tagName, attr.name, attr.value);\r\n    }\r\n    if (tagName === 'link' && inlineStylesheet) {\r\n        var stylesheet = Array.from(doc.styleSheets).find(function (s) {\r\n            return s.href === n.href;\r\n        });\r\n        var cssText = null;\r\n        if (stylesheet) {\r\n            cssText = getCssRulesString(stylesheet);\r\n        }\r\n        if (cssText) {\r\n            delete attributes.rel;\r\n            delete attributes.href;\r\n            attributes._cssText = absoluteToStylesheet(cssText, stylesheet.href);\r\n        }\r\n    }\r\n    if (tagName === 'style' &&\r\n        n.sheet &&\r\n        !(n.innerText || n.textContent || '').trim().length) {\r\n        var cssText = getCssRulesString(n.sheet);\r\n        if (cssText) {\r\n            attributes._cssText = absoluteToStylesheet(cssText, getHref());\r\n        }\r\n    }\r\n    if (tagName === 'input' || tagName === 'textarea' || tagName === 'select') {\r\n        var value = n.value;\r\n        var checked = n.checked;\r\n        if (attributes.type !== 'radio' &&\r\n            attributes.type !== 'checkbox' &&\r\n            attributes.type !== 'submit' &&\r\n            attributes.type !== 'button' &&\r\n            value) {\r\n            attributes.value = maskInputValue({\r\n                type: attributes.type,\r\n                tagName: tagName,\r\n                value: value,\r\n                maskInputOptions: maskInputOptions,\r\n                maskInputFn: maskInputFn\r\n            });\r\n        }\r\n        else if (checked) {\r\n            attributes.checked = checked;\r\n        }\r\n    }\r\n    if (tagName === 'option') {\r\n        if (n.selected && !maskInputOptions['select']) {\r\n            attributes.selected = true;\r\n        }\r\n        else {\r\n            delete attributes.selected;\r\n        }\r\n    }\r\n    if (tagName === 'canvas' && recordCanvas) {\r\n        if (n.__context === '2d') {\r\n            if (!is2DCanvasBlank(n)) {\r\n                attributes.rr_dataURL = n.toDataURL(dataURLOptions.type, dataURLOptions.quality);\r\n            }\r\n        }\r\n        else if (!('__context' in n)) {\r\n            var canvasDataURL = n.toDataURL(dataURLOptions.type, dataURLOptions.quality);\r\n            var blankCanvas = document.createElement('canvas');\r\n            blankCanvas.width = n.width;\r\n            blankCanvas.height = n.height;\r\n            var blankCanvasDataURL = blankCanvas.toDataURL(dataURLOptions.type, dataURLOptions.quality);\r\n            if (canvasDataURL !== blankCanvasDataURL) {\r\n                attributes.rr_dataURL = canvasDataURL;\r\n            }\r\n        }\r\n    }\r\n    if (tagName === 'img' && inlineImages) {\r\n        if (!canvasService) {\r\n            canvasService = doc.createElement('canvas');\r\n            canvasCtx = canvasService.getContext('2d');\r\n        }\r\n        var image_1 = n;\r\n        var oldValue_1 = image_1.crossOrigin;\r\n        image_1.crossOrigin = 'anonymous';\r\n        var recordInlineImage = function () {\r\n            try {\r\n                canvasService.width = image_1.naturalWidth;\r\n                canvasService.height = image_1.naturalHeight;\r\n                canvasCtx.drawImage(image_1, 0, 0);\r\n                attributes.rr_dataURL = canvasService.toDataURL(dataURLOptions.type, dataURLOptions.quality);\r\n            }\r\n            catch (err) {\r\n                console.warn(\"Cannot inline img src=\".concat(image_1.currentSrc, \"! Error: \").concat(err));\r\n            }\r\n            oldValue_1\r\n                ? (attributes.crossOrigin = oldValue_1)\r\n                : image_1.removeAttribute('crossorigin');\r\n        };\r\n        if (image_1.complete && image_1.naturalWidth !== 0)\r\n            recordInlineImage();\r\n        else\r\n            image_1.onload = recordInlineImage;\r\n    }\r\n    if (tagName === 'audio' || tagName === 'video') {\r\n        attributes.rr_mediaState = n.paused\r\n            ? 'paused'\r\n            : 'played';\r\n        attributes.rr_mediaCurrentTime = n.currentTime;\r\n    }\r\n    if (!newlyAddedElement) {\r\n        if (n.scrollLeft) {\r\n            attributes.rr_scrollLeft = n.scrollLeft;\r\n        }\r\n        if (n.scrollTop) {\r\n            attributes.rr_scrollTop = n.scrollTop;\r\n        }\r\n    }\r\n    if (needBlock) {\r\n        var _d = n.getBoundingClientRect(), width = _d.width, height = _d.height;\r\n        attributes = {\r\n            \"class\": attributes[\"class\"],\r\n            rr_width: \"\".concat(width, \"px\"),\r\n            rr_height: \"\".concat(height, \"px\")\r\n        };\r\n    }\r\n    if (tagName === 'iframe' && !keepIframeSrcFn(attributes.src)) {\r\n        if (!n.contentDocument) {\r\n            attributes.rr_src = attributes.src;\r\n        }\r\n        delete attributes.src;\r\n    }\r\n    return {\r\n        type: NodeType.Element,\r\n        tagName: tagName,\r\n        attributes: attributes,\r\n        childNodes: [],\r\n        isSVG: isSVGElement(n) || undefined,\r\n        needBlock: needBlock,\r\n        rootId: rootId\r\n    };\r\n}\r\nfunction lowerIfExists(maybeAttr) {\r\n    if (maybeAttr === undefined) {\r\n        return '';\r\n    }\r\n    else {\r\n        return maybeAttr.toLowerCase();\r\n    }\r\n}\r\nfunction slimDOMExcluded(sn, slimDOMOptions) {\r\n    if (slimDOMOptions.comment && sn.type === NodeType.Comment) {\r\n        return true;\r\n    }\r\n    else if (sn.type === NodeType.Element) {\r\n        if (slimDOMOptions.script &&\r\n            (sn.tagName === 'script' ||\r\n                (sn.tagName === 'link' &&\r\n                    sn.attributes.rel === 'preload' &&\r\n                    sn.attributes.as === 'script') ||\r\n                (sn.tagName === 'link' &&\r\n                    sn.attributes.rel === 'prefetch' &&\r\n                    typeof sn.attributes.href === 'string' &&\r\n                    sn.attributes.href.endsWith('.js')))) {\r\n            return true;\r\n        }\r\n        else if (slimDOMOptions.headFavicon &&\r\n            ((sn.tagName === 'link' && sn.attributes.rel === 'shortcut icon') ||\r\n                (sn.tagName === 'meta' &&\r\n                    (lowerIfExists(sn.attributes.name).match(/^msapplication-tile(image|color)$/) ||\r\n                        lowerIfExists(sn.attributes.name) === 'application-name' ||\r\n                        lowerIfExists(sn.attributes.rel) === 'icon' ||\r\n                        lowerIfExists(sn.attributes.rel) === 'apple-touch-icon' ||\r\n                        lowerIfExists(sn.attributes.rel) === 'shortcut icon')))) {\r\n            return true;\r\n        }\r\n        else if (sn.tagName === 'meta') {\r\n            if (slimDOMOptions.headMetaDescKeywords &&\r\n                lowerIfExists(sn.attributes.name).match(/^description|keywords$/)) {\r\n                return true;\r\n            }\r\n            else if (slimDOMOptions.headMetaSocial &&\r\n                (lowerIfExists(sn.attributes.property).match(/^(og|twitter|fb):/) ||\r\n                    lowerIfExists(sn.attributes.name).match(/^(og|twitter):/) ||\r\n                    lowerIfExists(sn.attributes.name) === 'pinterest')) {\r\n                return true;\r\n            }\r\n            else if (slimDOMOptions.headMetaRobots &&\r\n                (lowerIfExists(sn.attributes.name) === 'robots' ||\r\n                    lowerIfExists(sn.attributes.name) === 'googlebot' ||\r\n                    lowerIfExists(sn.attributes.name) === 'bingbot')) {\r\n                return true;\r\n            }\r\n            else if (slimDOMOptions.headMetaHttpEquiv &&\r\n                sn.attributes['http-equiv'] !== undefined) {\r\n                return true;\r\n            }\r\n            else if (slimDOMOptions.headMetaAuthorship &&\r\n                (lowerIfExists(sn.attributes.name) === 'author' ||\r\n                    lowerIfExists(sn.attributes.name) === 'generator' ||\r\n                    lowerIfExists(sn.attributes.name) === 'framework' ||\r\n                    lowerIfExists(sn.attributes.name) === 'publisher' ||\r\n                    lowerIfExists(sn.attributes.name) === 'progid' ||\r\n                    lowerIfExists(sn.attributes.property).match(/^article:/) ||\r\n                    lowerIfExists(sn.attributes.property).match(/^product:/))) {\r\n                return true;\r\n            }\r\n            else if (slimDOMOptions.headMetaVerification &&\r\n                (lowerIfExists(sn.attributes.name) === 'google-site-verification' ||\r\n                    lowerIfExists(sn.attributes.name) === 'yandex-verification' ||\r\n                    lowerIfExists(sn.attributes.name) === 'csrf-token' ||\r\n                    lowerIfExists(sn.attributes.name) === 'p:domain_verify' ||\r\n                    lowerIfExists(sn.attributes.name) === 'verify-v1' ||\r\n                    lowerIfExists(sn.attributes.name) === 'verification' ||\r\n                    lowerIfExists(sn.attributes.name) === 'shopify-checkout-api-token')) {\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n    return false;\r\n}\r\nfunction serializeNodeWithId(n, options) {\r\n    var doc = options.doc, mirror = options.mirror, blockClass = options.blockClass, blockSelector = options.blockSelector, maskTextClass = options.maskTextClass, maskTextSelector = options.maskTextSelector, _a = options.skipChild, skipChild = _a === void 0 ? false : _a, _b = options.inlineStylesheet, inlineStylesheet = _b === void 0 ? true : _b, _c = options.maskInputOptions, maskInputOptions = _c === void 0 ? {} : _c, maskTextFn = options.maskTextFn, maskInputFn = options.maskInputFn, slimDOMOptions = options.slimDOMOptions, _d = options.dataURLOptions, dataURLOptions = _d === void 0 ? {} : _d, _e = options.inlineImages, inlineImages = _e === void 0 ? false : _e, _f = options.recordCanvas, recordCanvas = _f === void 0 ? false : _f, onSerialize = options.onSerialize, onIframeLoad = options.onIframeLoad, _g = options.iframeLoadTimeout, iframeLoadTimeout = _g === void 0 ? 5000 : _g, onStylesheetLoad = options.onStylesheetLoad, _h = options.stylesheetLoadTimeout, stylesheetLoadTimeout = _h === void 0 ? 5000 : _h, _j = options.keepIframeSrcFn, keepIframeSrcFn = _j === void 0 ? function () { return false; } : _j, _k = options.newlyAddedElement, newlyAddedElement = _k === void 0 ? false : _k;\r\n    var _l = options.preserveWhiteSpace, preserveWhiteSpace = _l === void 0 ? true : _l;\r\n    var _serializedNode = serializeNode(n, {\r\n        doc: doc,\r\n        mirror: mirror,\r\n        blockClass: blockClass,\r\n        blockSelector: blockSelector,\r\n        maskTextClass: maskTextClass,\r\n        maskTextSelector: maskTextSelector,\r\n        inlineStylesheet: inlineStylesheet,\r\n        maskInputOptions: maskInputOptions,\r\n        maskTextFn: maskTextFn,\r\n        maskInputFn: maskInputFn,\r\n        dataURLOptions: dataURLOptions,\r\n        inlineImages: inlineImages,\r\n        recordCanvas: recordCanvas,\r\n        keepIframeSrcFn: keepIframeSrcFn,\r\n        newlyAddedElement: newlyAddedElement\r\n    });\r\n    if (!_serializedNode) {\r\n        console.warn(n, 'not serialized');\r\n        return null;\r\n    }\r\n    var id;\r\n    if (mirror.hasNode(n)) {\r\n        id = mirror.getId(n);\r\n    }\r\n    else if (slimDOMExcluded(_serializedNode, slimDOMOptions) ||\r\n        (!preserveWhiteSpace &&\r\n            _serializedNode.type === NodeType.Text &&\r\n            !_serializedNode.isStyle &&\r\n            !_serializedNode.textContent.replace(/^\\s+|\\s+$/gm, '').length)) {\r\n        id = IGNORED_NODE;\r\n    }\r\n    else {\r\n        id = genId();\r\n    }\r\n    var serializedNode = Object.assign(_serializedNode, { id: id });\r\n    mirror.add(n, serializedNode);\r\n    if (id === IGNORED_NODE) {\r\n        return null;\r\n    }\r\n    if (onSerialize) {\r\n        onSerialize(n);\r\n    }\r\n    var recordChild = !skipChild;\r\n    if (serializedNode.type === NodeType.Element) {\r\n        recordChild = recordChild && !serializedNode.needBlock;\r\n        delete serializedNode.needBlock;\r\n        var shadowRoot = n.shadowRoot;\r\n        if (shadowRoot && isNativeShadowDom(shadowRoot))\r\n            serializedNode.isShadowHost = true;\r\n    }\r\n    if ((serializedNode.type === NodeType.Document ||\r\n        serializedNode.type === NodeType.Element) &&\r\n        recordChild) {\r\n        if (slimDOMOptions.headWhitespace &&\r\n            serializedNode.type === NodeType.Element &&\r\n            serializedNode.tagName === 'head') {\r\n            preserveWhiteSpace = false;\r\n        }\r\n        var bypassOptions = {\r\n            doc: doc,\r\n            mirror: mirror,\r\n            blockClass: blockClass,\r\n            blockSelector: blockSelector,\r\n            maskTextClass: maskTextClass,\r\n            maskTextSelector: maskTextSelector,\r\n            skipChild: skipChild,\r\n            inlineStylesheet: inlineStylesheet,\r\n            maskInputOptions: maskInputOptions,\r\n            maskTextFn: maskTextFn,\r\n            maskInputFn: maskInputFn,\r\n            slimDOMOptions: slimDOMOptions,\r\n            dataURLOptions: dataURLOptions,\r\n            inlineImages: inlineImages,\r\n            recordCanvas: recordCanvas,\r\n            preserveWhiteSpace: preserveWhiteSpace,\r\n            onSerialize: onSerialize,\r\n            onIframeLoad: onIframeLoad,\r\n            iframeLoadTimeout: iframeLoadTimeout,\r\n            onStylesheetLoad: onStylesheetLoad,\r\n            stylesheetLoadTimeout: stylesheetLoadTimeout,\r\n            keepIframeSrcFn: keepIframeSrcFn\r\n        };\r\n        for (var _i = 0, _m = Array.from(n.childNodes); _i < _m.length; _i++) {\r\n            var childN = _m[_i];\r\n            var serializedChildNode = serializeNodeWithId(childN, bypassOptions);\r\n            if (serializedChildNode) {\r\n                serializedNode.childNodes.push(serializedChildNode);\r\n            }\r\n        }\r\n        if (isElement(n) && n.shadowRoot) {\r\n            for (var _o = 0, _p = Array.from(n.shadowRoot.childNodes); _o < _p.length; _o++) {\r\n                var childN = _p[_o];\r\n                var serializedChildNode = serializeNodeWithId(childN, bypassOptions);\r\n                if (serializedChildNode) {\r\n                    isNativeShadowDom(n.shadowRoot) &&\r\n                        (serializedChildNode.isShadow = true);\r\n                    serializedNode.childNodes.push(serializedChildNode);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    if (n.parentNode &&\r\n        isShadowRoot(n.parentNode) &&\r\n        isNativeShadowDom(n.parentNode)) {\r\n        serializedNode.isShadow = true;\r\n    }\r\n    if (serializedNode.type === NodeType.Element &&\r\n        serializedNode.tagName === 'iframe') {\r\n        onceIframeLoaded(n, function () {\r\n            var iframeDoc = n.contentDocument;\r\n            if (iframeDoc && onIframeLoad) {\r\n                var serializedIframeNode = serializeNodeWithId(iframeDoc, {\r\n                    doc: iframeDoc,\r\n                    mirror: mirror,\r\n                    blockClass: blockClass,\r\n                    blockSelector: blockSelector,\r\n                    maskTextClass: maskTextClass,\r\n                    maskTextSelector: maskTextSelector,\r\n                    skipChild: false,\r\n                    inlineStylesheet: inlineStylesheet,\r\n                    maskInputOptions: maskInputOptions,\r\n                    maskTextFn: maskTextFn,\r\n                    maskInputFn: maskInputFn,\r\n                    slimDOMOptions: slimDOMOptions,\r\n                    dataURLOptions: dataURLOptions,\r\n                    inlineImages: inlineImages,\r\n                    recordCanvas: recordCanvas,\r\n                    preserveWhiteSpace: preserveWhiteSpace,\r\n                    onSerialize: onSerialize,\r\n                    onIframeLoad: onIframeLoad,\r\n                    iframeLoadTimeout: iframeLoadTimeout,\r\n                    onStylesheetLoad: onStylesheetLoad,\r\n                    stylesheetLoadTimeout: stylesheetLoadTimeout,\r\n                    keepIframeSrcFn: keepIframeSrcFn\r\n                });\r\n                if (serializedIframeNode) {\r\n                    onIframeLoad(n, serializedIframeNode);\r\n                }\r\n            }\r\n        }, iframeLoadTimeout);\r\n    }\r\n    if (serializedNode.type === NodeType.Element &&\r\n        serializedNode.tagName === 'link' &&\r\n        serializedNode.attributes.rel === 'stylesheet') {\r\n        onceStylesheetLoaded(n, function () {\r\n            if (onStylesheetLoad) {\r\n                var serializedLinkNode = serializeNodeWithId(n, {\r\n                    doc: doc,\r\n                    mirror: mirror,\r\n                    blockClass: blockClass,\r\n                    blockSelector: blockSelector,\r\n                    maskTextClass: maskTextClass,\r\n                    maskTextSelector: maskTextSelector,\r\n                    skipChild: false,\r\n                    inlineStylesheet: inlineStylesheet,\r\n                    maskInputOptions: maskInputOptions,\r\n                    maskTextFn: maskTextFn,\r\n                    maskInputFn: maskInputFn,\r\n                    slimDOMOptions: slimDOMOptions,\r\n                    dataURLOptions: dataURLOptions,\r\n                    inlineImages: inlineImages,\r\n                    recordCanvas: recordCanvas,\r\n                    preserveWhiteSpace: preserveWhiteSpace,\r\n                    onSerialize: onSerialize,\r\n                    onIframeLoad: onIframeLoad,\r\n                    iframeLoadTimeout: iframeLoadTimeout,\r\n                    onStylesheetLoad: onStylesheetLoad,\r\n                    stylesheetLoadTimeout: stylesheetLoadTimeout,\r\n                    keepIframeSrcFn: keepIframeSrcFn\r\n                });\r\n                if (serializedLinkNode) {\r\n                    onStylesheetLoad(n, serializedLinkNode);\r\n                }\r\n            }\r\n        }, stylesheetLoadTimeout);\r\n    }\r\n    return serializedNode;\r\n}\r\nfunction snapshot(n, options) {\r\n    var _a = options || {}, _b = _a.mirror, mirror = _b === void 0 ? new Mirror() : _b, _c = _a.blockClass, blockClass = _c === void 0 ? 'rr-block' : _c, _d = _a.blockSelector, blockSelector = _d === void 0 ? null : _d, _e = _a.maskTextClass, maskTextClass = _e === void 0 ? 'rr-mask' : _e, _f = _a.maskTextSelector, maskTextSelector = _f === void 0 ? null : _f, _g = _a.inlineStylesheet, inlineStylesheet = _g === void 0 ? true : _g, _h = _a.inlineImages, inlineImages = _h === void 0 ? false : _h, _j = _a.recordCanvas, recordCanvas = _j === void 0 ? false : _j, _k = _a.maskAllInputs, maskAllInputs = _k === void 0 ? false : _k, maskTextFn = _a.maskTextFn, maskInputFn = _a.maskInputFn, _l = _a.slimDOM, slimDOM = _l === void 0 ? false : _l, dataURLOptions = _a.dataURLOptions, preserveWhiteSpace = _a.preserveWhiteSpace, onSerialize = _a.onSerialize, onIframeLoad = _a.onIframeLoad, iframeLoadTimeout = _a.iframeLoadTimeout, onStylesheetLoad = _a.onStylesheetLoad, stylesheetLoadTimeout = _a.stylesheetLoadTimeout, _m = _a.keepIframeSrcFn, keepIframeSrcFn = _m === void 0 ? function () { return false; } : _m;\r\n    var maskInputOptions = maskAllInputs === true\r\n        ? {\r\n            color: true,\r\n            date: true,\r\n            'datetime-local': true,\r\n            email: true,\r\n            month: true,\r\n            number: true,\r\n            range: true,\r\n            search: true,\r\n            tel: true,\r\n            text: true,\r\n            time: true,\r\n            url: true,\r\n            week: true,\r\n            textarea: true,\r\n            select: true,\r\n            password: true\r\n        }\r\n        : maskAllInputs === false\r\n            ? {\r\n                password: true\r\n            }\r\n            : maskAllInputs;\r\n    var slimDOMOptions = slimDOM === true || slimDOM === 'all'\r\n        ?\r\n            {\r\n                script: true,\r\n                comment: true,\r\n                headFavicon: true,\r\n                headWhitespace: true,\r\n                headMetaDescKeywords: slimDOM === 'all',\r\n                headMetaSocial: true,\r\n                headMetaRobots: true,\r\n                headMetaHttpEquiv: true,\r\n                headMetaAuthorship: true,\r\n                headMetaVerification: true\r\n            }\r\n        : slimDOM === false\r\n            ? {}\r\n            : slimDOM;\r\n    return serializeNodeWithId(n, {\r\n        doc: n,\r\n        mirror: mirror,\r\n        blockClass: blockClass,\r\n        blockSelector: blockSelector,\r\n        maskTextClass: maskTextClass,\r\n        maskTextSelector: maskTextSelector,\r\n        skipChild: false,\r\n        inlineStylesheet: inlineStylesheet,\r\n        maskInputOptions: maskInputOptions,\r\n        maskTextFn: maskTextFn,\r\n        maskInputFn: maskInputFn,\r\n        slimDOMOptions: slimDOMOptions,\r\n        dataURLOptions: dataURLOptions,\r\n        inlineImages: inlineImages,\r\n        recordCanvas: recordCanvas,\r\n        preserveWhiteSpace: preserveWhiteSpace,\r\n        onSerialize: onSerialize,\r\n        onIframeLoad: onIframeLoad,\r\n        iframeLoadTimeout: iframeLoadTimeout,\r\n        onStylesheetLoad: onStylesheetLoad,\r\n        stylesheetLoadTimeout: stylesheetLoadTimeout,\r\n        keepIframeSrcFn: keepIframeSrcFn,\r\n        newlyAddedElement: false\r\n    });\r\n}\r\n\nvar commentre = /\\/\\*[^*]*\\*+([^/*][^*]*\\*+)*\\//g;\r\nfunction parse(css, options) {\r\n    if (options === void 0) { options = {}; }\r\n    var lineno = 1;\r\n    var column = 1;\r\n    function updatePosition(str) {\r\n        var lines = str.match(/\\n/g);\r\n        if (lines) {\r\n            lineno += lines.length;\r\n        }\r\n        var i = str.lastIndexOf('\\n');\r\n        column = i === -1 ? column + str.length : str.length - i;\r\n    }\r\n    function position() {\r\n        var start = { line: lineno, column: column };\r\n        return function (node) {\r\n            node.position = new Position(start);\r\n            whitespace();\r\n            return node;\r\n        };\r\n    }\r\n    var Position = (function () {\r\n        function Position(start) {\r\n            this.start = start;\r\n            this.end = { line: lineno, column: column };\r\n            this.source = options.source;\r\n        }\r\n        return Position;\r\n    }());\r\n    Position.prototype.content = css;\r\n    var errorsList = [];\r\n    function error(msg) {\r\n        var err = new Error(\"\".concat(options.source || '', \":\").concat(lineno, \":\").concat(column, \": \").concat(msg));\r\n        err.reason = msg;\r\n        err.filename = options.source;\r\n        err.line = lineno;\r\n        err.column = column;\r\n        err.source = css;\r\n        if (options.silent) {\r\n            errorsList.push(err);\r\n        }\r\n        else {\r\n            throw err;\r\n        }\r\n    }\r\n    function stylesheet() {\r\n        var rulesList = rules();\r\n        return {\r\n            type: 'stylesheet',\r\n            stylesheet: {\r\n                source: options.source,\r\n                rules: rulesList,\r\n                parsingErrors: errorsList\r\n            }\r\n        };\r\n    }\r\n    function open() {\r\n        return match(/^{\\s*/);\r\n    }\r\n    function close() {\r\n        return match(/^}/);\r\n    }\r\n    function rules() {\r\n        var node;\r\n        var rules = [];\r\n        whitespace();\r\n        comments(rules);\r\n        while (css.length && css.charAt(0) !== '}' && (node = atrule() || rule())) {\r\n            if (node !== false) {\r\n                rules.push(node);\r\n                comments(rules);\r\n            }\r\n        }\r\n        return rules;\r\n    }\r\n    function match(re) {\r\n        var m = re.exec(css);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        var str = m[0];\r\n        updatePosition(str);\r\n        css = css.slice(str.length);\r\n        return m;\r\n    }\r\n    function whitespace() {\r\n        match(/^\\s*/);\r\n    }\r\n    function comments(rules) {\r\n        if (rules === void 0) { rules = []; }\r\n        var c;\r\n        while ((c = comment())) {\r\n            if (c !== false) {\r\n                rules.push(c);\r\n            }\r\n            c = comment();\r\n        }\r\n        return rules;\r\n    }\r\n    function comment() {\r\n        var pos = position();\r\n        if ('/' !== css.charAt(0) || '*' !== css.charAt(1)) {\r\n            return;\r\n        }\r\n        var i = 2;\r\n        while ('' !== css.charAt(i) &&\r\n            ('*' !== css.charAt(i) || '/' !== css.charAt(i + 1))) {\r\n            ++i;\r\n        }\r\n        i += 2;\r\n        if ('' === css.charAt(i - 1)) {\r\n            return error('End of comment missing');\r\n        }\r\n        var str = css.slice(2, i - 2);\r\n        column += 2;\r\n        updatePosition(str);\r\n        css = css.slice(i);\r\n        column += 2;\r\n        return pos({\r\n            type: 'comment',\r\n            comment: str\r\n        });\r\n    }\r\n    function selector() {\r\n        var m = match(/^([^{]+)/);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        return trim(m[0])\r\n            .replace(/\\/\\*([^*]|[\\r\\n]|(\\*+([^*/]|[\\r\\n])))*\\*\\/+/g, '')\r\n            .replace(/\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'/g, function (m) {\r\n            return m.replace(/,/g, '\\u200C');\r\n        })\r\n            .split(/\\s*(?![^(]*\\)),\\s*/)\r\n            .map(function (s) {\r\n            return s.replace(/\\u200C/g, ',');\r\n        });\r\n    }\r\n    function declaration() {\r\n        var pos = position();\r\n        var propMatch = match(/^(\\*?[-#\\/\\*\\\\\\w]+(\\[[0-9a-z_-]+\\])?)\\s*/);\r\n        if (!propMatch) {\r\n            return;\r\n        }\r\n        var prop = trim(propMatch[0]);\r\n        if (!match(/^:\\s*/)) {\r\n            return error(\"property missing ':'\");\r\n        }\r\n        var val = match(/^((?:'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\([^\\)]*?\\)|[^};])+)/);\r\n        var ret = pos({\r\n            type: 'declaration',\r\n            property: prop.replace(commentre, ''),\r\n            value: val ? trim(val[0]).replace(commentre, '') : ''\r\n        });\r\n        match(/^[;\\s]*/);\r\n        return ret;\r\n    }\r\n    function declarations() {\r\n        var decls = [];\r\n        if (!open()) {\r\n            return error(\"missing '{'\");\r\n        }\r\n        comments(decls);\r\n        var decl;\r\n        while ((decl = declaration())) {\r\n            if (decl !== false) {\r\n                decls.push(decl);\r\n                comments(decls);\r\n            }\r\n            decl = declaration();\r\n        }\r\n        if (!close()) {\r\n            return error(\"missing '}'\");\r\n        }\r\n        return decls;\r\n    }\r\n    function keyframe() {\r\n        var m;\r\n        var vals = [];\r\n        var pos = position();\r\n        while ((m = match(/^((\\d+\\.\\d+|\\.\\d+|\\d+)%?|[a-z]+)\\s*/))) {\r\n            vals.push(m[1]);\r\n            match(/^,\\s*/);\r\n        }\r\n        if (!vals.length) {\r\n            return;\r\n        }\r\n        return pos({\r\n            type: 'keyframe',\r\n            values: vals,\r\n            declarations: declarations()\r\n        });\r\n    }\r\n    function atkeyframes() {\r\n        var pos = position();\r\n        var m = match(/^@([-\\w]+)?keyframes\\s*/);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        var vendor = m[1];\r\n        m = match(/^([-\\w]+)\\s*/);\r\n        if (!m) {\r\n            return error('@keyframes missing name');\r\n        }\r\n        var name = m[1];\r\n        if (!open()) {\r\n            return error(\"@keyframes missing '{'\");\r\n        }\r\n        var frame;\r\n        var frames = comments();\r\n        while ((frame = keyframe())) {\r\n            frames.push(frame);\r\n            frames = frames.concat(comments());\r\n        }\r\n        if (!close()) {\r\n            return error(\"@keyframes missing '}'\");\r\n        }\r\n        return pos({\r\n            type: 'keyframes',\r\n            name: name,\r\n            vendor: vendor,\r\n            keyframes: frames\r\n        });\r\n    }\r\n    function atsupports() {\r\n        var pos = position();\r\n        var m = match(/^@supports *([^{]+)/);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        var supports = trim(m[1]);\r\n        if (!open()) {\r\n            return error(\"@supports missing '{'\");\r\n        }\r\n        var style = comments().concat(rules());\r\n        if (!close()) {\r\n            return error(\"@supports missing '}'\");\r\n        }\r\n        return pos({\r\n            type: 'supports',\r\n            supports: supports,\r\n            rules: style\r\n        });\r\n    }\r\n    function athost() {\r\n        var pos = position();\r\n        var m = match(/^@host\\s*/);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        if (!open()) {\r\n            return error(\"@host missing '{'\");\r\n        }\r\n        var style = comments().concat(rules());\r\n        if (!close()) {\r\n            return error(\"@host missing '}'\");\r\n        }\r\n        return pos({\r\n            type: 'host',\r\n            rules: style\r\n        });\r\n    }\r\n    function atmedia() {\r\n        var pos = position();\r\n        var m = match(/^@media *([^{]+)/);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        var media = trim(m[1]);\r\n        if (!open()) {\r\n            return error(\"@media missing '{'\");\r\n        }\r\n        var style = comments().concat(rules());\r\n        if (!close()) {\r\n            return error(\"@media missing '}'\");\r\n        }\r\n        return pos({\r\n            type: 'media',\r\n            media: media,\r\n            rules: style\r\n        });\r\n    }\r\n    function atcustommedia() {\r\n        var pos = position();\r\n        var m = match(/^@custom-media\\s+(--[^\\s]+)\\s*([^{;]+);/);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        return pos({\r\n            type: 'custom-media',\r\n            name: trim(m[1]),\r\n            media: trim(m[2])\r\n        });\r\n    }\r\n    function atpage() {\r\n        var pos = position();\r\n        var m = match(/^@page */);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        var sel = selector() || [];\r\n        if (!open()) {\r\n            return error(\"@page missing '{'\");\r\n        }\r\n        var decls = comments();\r\n        var decl;\r\n        while ((decl = declaration())) {\r\n            decls.push(decl);\r\n            decls = decls.concat(comments());\r\n        }\r\n        if (!close()) {\r\n            return error(\"@page missing '}'\");\r\n        }\r\n        return pos({\r\n            type: 'page',\r\n            selectors: sel,\r\n            declarations: decls\r\n        });\r\n    }\r\n    function atdocument() {\r\n        var pos = position();\r\n        var m = match(/^@([-\\w]+)?document *([^{]+)/);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        var vendor = trim(m[1]);\r\n        var doc = trim(m[2]);\r\n        if (!open()) {\r\n            return error(\"@document missing '{'\");\r\n        }\r\n        var style = comments().concat(rules());\r\n        if (!close()) {\r\n            return error(\"@document missing '}'\");\r\n        }\r\n        return pos({\r\n            type: 'document',\r\n            document: doc,\r\n            vendor: vendor,\r\n            rules: style\r\n        });\r\n    }\r\n    function atfontface() {\r\n        var pos = position();\r\n        var m = match(/^@font-face\\s*/);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        if (!open()) {\r\n            return error(\"@font-face missing '{'\");\r\n        }\r\n        var decls = comments();\r\n        var decl;\r\n        while ((decl = declaration())) {\r\n            decls.push(decl);\r\n            decls = decls.concat(comments());\r\n        }\r\n        if (!close()) {\r\n            return error(\"@font-face missing '}'\");\r\n        }\r\n        return pos({\r\n            type: 'font-face',\r\n            declarations: decls\r\n        });\r\n    }\r\n    var atimport = _compileAtrule('import');\r\n    var atcharset = _compileAtrule('charset');\r\n    var atnamespace = _compileAtrule('namespace');\r\n    function _compileAtrule(name) {\r\n        var re = new RegExp('^@' + name + '\\\\s*([^;]+);');\r\n        return function () {\r\n            var pos = position();\r\n            var m = match(re);\r\n            if (!m) {\r\n                return;\r\n            }\r\n            var ret = { type: name };\r\n            ret[name] = m[1].trim();\r\n            return pos(ret);\r\n        };\r\n    }\r\n    function atrule() {\r\n        if (css[0] !== '@') {\r\n            return;\r\n        }\r\n        return (atkeyframes() ||\r\n            atmedia() ||\r\n            atcustommedia() ||\r\n            atsupports() ||\r\n            atimport() ||\r\n            atcharset() ||\r\n            atnamespace() ||\r\n            atdocument() ||\r\n            atpage() ||\r\n            athost() ||\r\n            atfontface());\r\n    }\r\n    function rule() {\r\n        var pos = position();\r\n        var sel = selector();\r\n        if (!sel) {\r\n            return error('selector missing');\r\n        }\r\n        comments();\r\n        return pos({\r\n            type: 'rule',\r\n            selectors: sel,\r\n            declarations: declarations()\r\n        });\r\n    }\r\n    return addParent(stylesheet());\r\n}\r\nfunction trim(str) {\r\n    return str ? str.replace(/^\\s+|\\s+$/g, '') : '';\r\n}\r\nfunction addParent(obj, parent) {\r\n    var isNode = obj && typeof obj.type === 'string';\r\n    var childParent = isNode ? obj : parent;\r\n    for (var _i = 0, _a = Object.keys(obj); _i < _a.length; _i++) {\r\n        var k = _a[_i];\r\n        var value = obj[k];\r\n        if (Array.isArray(value)) {\r\n            value.forEach(function (v) {\r\n                addParent(v, childParent);\r\n            });\r\n        }\r\n        else if (value && typeof value === 'object') {\r\n            addParent(value, childParent);\r\n        }\r\n    }\r\n    if (isNode) {\r\n        Object.defineProperty(obj, 'parent', {\r\n            configurable: true,\r\n            writable: true,\r\n            enumerable: false,\r\n            value: parent || null\r\n        });\r\n    }\r\n    return obj;\r\n}\n\nvar tagMap = {\r\n    script: 'noscript',\r\n    altglyph: 'altGlyph',\r\n    altglyphdef: 'altGlyphDef',\r\n    altglyphitem: 'altGlyphItem',\r\n    animatecolor: 'animateColor',\r\n    animatemotion: 'animateMotion',\r\n    animatetransform: 'animateTransform',\r\n    clippath: 'clipPath',\r\n    feblend: 'feBlend',\r\n    fecolormatrix: 'feColorMatrix',\r\n    fecomponenttransfer: 'feComponentTransfer',\r\n    fecomposite: 'feComposite',\r\n    feconvolvematrix: 'feConvolveMatrix',\r\n    fediffuselighting: 'feDiffuseLighting',\r\n    fedisplacementmap: 'feDisplacementMap',\r\n    fedistantlight: 'feDistantLight',\r\n    fedropshadow: 'feDropShadow',\r\n    feflood: 'feFlood',\r\n    fefunca: 'feFuncA',\r\n    fefuncb: 'feFuncB',\r\n    fefuncg: 'feFuncG',\r\n    fefuncr: 'feFuncR',\r\n    fegaussianblur: 'feGaussianBlur',\r\n    feimage: 'feImage',\r\n    femerge: 'feMerge',\r\n    femergenode: 'feMergeNode',\r\n    femorphology: 'feMorphology',\r\n    feoffset: 'feOffset',\r\n    fepointlight: 'fePointLight',\r\n    fespecularlighting: 'feSpecularLighting',\r\n    fespotlight: 'feSpotLight',\r\n    fetile: 'feTile',\r\n    feturbulence: 'feTurbulence',\r\n    foreignobject: 'foreignObject',\r\n    glyphref: 'glyphRef',\r\n    lineargradient: 'linearGradient',\r\n    radialgradient: 'radialGradient'\r\n};\r\nfunction getTagName(n) {\r\n    var tagName = tagMap[n.tagName] ? tagMap[n.tagName] : n.tagName;\r\n    if (tagName === 'link' && n.attributes._cssText) {\r\n        tagName = 'style';\r\n    }\r\n    return tagName;\r\n}\r\nfunction escapeRegExp(str) {\r\n    return str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\r\n}\r\nvar HOVER_SELECTOR = /([^\\\\]):hover/;\r\nvar HOVER_SELECTOR_GLOBAL = new RegExp(HOVER_SELECTOR.source, 'g');\r\nfunction addHoverClass(cssText, cache) {\r\n    var cachedStyle = cache === null || cache === void 0 ? void 0 : cache.stylesWithHoverClass.get(cssText);\r\n    if (cachedStyle)\r\n        return cachedStyle;\r\n    var ast = parse(cssText, {\r\n        silent: true\r\n    });\r\n    if (!ast.stylesheet) {\r\n        return cssText;\r\n    }\r\n    var selectors = [];\r\n    ast.stylesheet.rules.forEach(function (rule) {\r\n        if ('selectors' in rule) {\r\n            (rule.selectors || []).forEach(function (selector) {\r\n                if (HOVER_SELECTOR.test(selector)) {\r\n                    selectors.push(selector);\r\n                }\r\n            });\r\n        }\r\n    });\r\n    if (selectors.length === 0) {\r\n        return cssText;\r\n    }\r\n    var selectorMatcher = new RegExp(selectors\r\n        .filter(function (selector, index) { return selectors.indexOf(selector) === index; })\r\n        .sort(function (a, b) { return b.length - a.length; })\r\n        .map(function (selector) {\r\n        return escapeRegExp(selector);\r\n    })\r\n        .join('|'), 'g');\r\n    var result = cssText.replace(selectorMatcher, function (selector) {\r\n        var newSelector = selector.replace(HOVER_SELECTOR_GLOBAL, '$1.\\\\:hover');\r\n        return \"\".concat(selector, \", \").concat(newSelector);\r\n    });\r\n    cache === null || cache === void 0 ? void 0 : cache.stylesWithHoverClass.set(cssText, result);\r\n    return result;\r\n}\r\nfunction createCache() {\r\n    var stylesWithHoverClass = new Map();\r\n    return {\r\n        stylesWithHoverClass: stylesWithHoverClass\r\n    };\r\n}\r\nfunction buildNode(n, options) {\r\n    var doc = options.doc, hackCss = options.hackCss, cache = options.cache;\r\n    switch (n.type) {\r\n        case NodeType.Document:\r\n            return doc.implementation.createDocument(null, '', null);\r\n        case NodeType.DocumentType:\r\n            return doc.implementation.createDocumentType(n.name || 'html', n.publicId, n.systemId);\r\n        case NodeType.Element: {\r\n            var tagName = getTagName(n);\r\n            var node_1;\r\n            if (n.isSVG) {\r\n                node_1 = doc.createElementNS('http://www.w3.org/2000/svg', tagName);\r\n            }\r\n            else {\r\n                node_1 = doc.createElement(tagName);\r\n            }\r\n            var specialAttributes = {};\r\n            for (var name_1 in n.attributes) {\r\n                if (!Object.prototype.hasOwnProperty.call(n.attributes, name_1)) {\r\n                    continue;\r\n                }\r\n                var value = n.attributes[name_1];\r\n                if (tagName === 'option' &&\r\n                    name_1 === 'selected' &&\r\n                    value === false) {\r\n                    continue;\r\n                }\r\n                if (value === true)\r\n                    value = '';\r\n                if (name_1.startsWith('rr_')) {\r\n                    specialAttributes[name_1] = value;\r\n                    continue;\r\n                }\r\n                var isTextarea = tagName === 'textarea' && name_1 === 'value';\r\n                var isRemoteOrDynamicCss = tagName === 'style' && name_1 === '_cssText';\r\n                if (isRemoteOrDynamicCss && hackCss && typeof value === 'string') {\r\n                    value = addHoverClass(value, cache);\r\n                }\r\n                if ((isTextarea || isRemoteOrDynamicCss) && typeof value === 'string') {\r\n                    var child = doc.createTextNode(value);\r\n                    for (var _i = 0, _a = Array.from(node_1.childNodes); _i < _a.length; _i++) {\r\n                        var c = _a[_i];\r\n                        if (c.nodeType === node_1.TEXT_NODE) {\r\n                            node_1.removeChild(c);\r\n                        }\r\n                    }\r\n                    node_1.appendChild(child);\r\n                    continue;\r\n                }\r\n                try {\r\n                    if (n.isSVG && name_1 === 'xlink:href') {\r\n                        node_1.setAttributeNS('http://www.w3.org/1999/xlink', name_1, value.toString());\r\n                    }\r\n                    else if (name_1 === 'onload' ||\r\n                        name_1 === 'onclick' ||\r\n                        name_1.substring(0, 7) === 'onmouse') {\r\n                        node_1.setAttribute('_' + name_1, value.toString());\r\n                    }\r\n                    else if (tagName === 'meta' &&\r\n                        n.attributes['http-equiv'] === 'Content-Security-Policy' &&\r\n                        name_1 === 'content') {\r\n                        node_1.setAttribute('csp-content', value.toString());\r\n                        continue;\r\n                    }\r\n                    else if (tagName === 'link' &&\r\n                        n.attributes.rel === 'preload' &&\r\n                        n.attributes.as === 'script') {\r\n                    }\r\n                    else if (tagName === 'link' &&\r\n                        n.attributes.rel === 'prefetch' &&\r\n                        typeof n.attributes.href === 'string' &&\r\n                        n.attributes.href.endsWith('.js')) {\r\n                    }\r\n                    else if (tagName === 'img' &&\r\n                        n.attributes.srcset &&\r\n                        n.attributes.rr_dataURL) {\r\n                        node_1.setAttribute('rrweb-original-srcset', n.attributes.srcset);\r\n                    }\r\n                    else {\r\n                        node_1.setAttribute(name_1, value.toString());\r\n                    }\r\n                }\r\n                catch (error) {\r\n                }\r\n            }\r\n            var _loop_1 = function (name_2) {\r\n                var value = specialAttributes[name_2];\r\n                if (tagName === 'canvas' && name_2 === 'rr_dataURL') {\r\n                    var image_1 = document.createElement('img');\r\n                    image_1.onload = function () {\r\n                        var ctx = node_1.getContext('2d');\r\n                        if (ctx) {\r\n                            ctx.drawImage(image_1, 0, 0, image_1.width, image_1.height);\r\n                        }\r\n                    };\r\n                    image_1.src = value.toString();\r\n                    if (node_1.RRNodeType)\r\n                        node_1.rr_dataURL = value.toString();\r\n                }\r\n                else if (tagName === 'img' && name_2 === 'rr_dataURL') {\r\n                    var image = node_1;\r\n                    if (!image.currentSrc.startsWith('data:')) {\r\n                        image.setAttribute('rrweb-original-src', n.attributes.src);\r\n                        image.src = value.toString();\r\n                    }\r\n                }\r\n                if (name_2 === 'rr_width') {\r\n                    node_1.style.width = value.toString();\r\n                }\r\n                else if (name_2 === 'rr_height') {\r\n                    node_1.style.height = value.toString();\r\n                }\r\n                else if (name_2 === 'rr_mediaCurrentTime' &&\r\n                    typeof value === 'number') {\r\n                    node_1.currentTime = value;\r\n                }\r\n                else if (name_2 === 'rr_mediaState') {\r\n                    switch (value) {\r\n                        case 'played':\r\n                            node_1\r\n                                .play()[\"catch\"](function (e) { return console.warn('media playback error', e); });\r\n                            break;\r\n                        case 'paused':\r\n                            node_1.pause();\r\n                            break;\r\n                    }\r\n                }\r\n            };\r\n            for (var name_2 in specialAttributes) {\r\n                _loop_1(name_2);\r\n            }\r\n            if (n.isShadowHost) {\r\n                if (!node_1.shadowRoot) {\r\n                    node_1.attachShadow({ mode: 'open' });\r\n                }\r\n                else {\r\n                    while (node_1.shadowRoot.firstChild) {\r\n                        node_1.shadowRoot.removeChild(node_1.shadowRoot.firstChild);\r\n                    }\r\n                }\r\n            }\r\n            return node_1;\r\n        }\r\n        case NodeType.Text:\r\n            return doc.createTextNode(n.isStyle && hackCss\r\n                ? addHoverClass(n.textContent, cache)\r\n                : n.textContent);\r\n        case NodeType.CDATA:\r\n            return doc.createCDATASection(n.textContent);\r\n        case NodeType.Comment:\r\n            return doc.createComment(n.textContent);\r\n        default:\r\n            return null;\r\n    }\r\n}\r\nfunction buildNodeWithSN(n, options) {\r\n    var doc = options.doc, mirror = options.mirror, _a = options.skipChild, skipChild = _a === void 0 ? false : _a, _b = options.hackCss, hackCss = _b === void 0 ? true : _b, afterAppend = options.afterAppend, cache = options.cache;\r\n    var node = buildNode(n, { doc: doc, hackCss: hackCss, cache: cache });\r\n    if (!node) {\r\n        return null;\r\n    }\r\n    if (n.rootId && mirror.getNode(n.rootId) !== doc) {\r\n        mirror.replace(n.rootId, doc);\r\n    }\r\n    if (n.type === NodeType.Document) {\r\n        doc.close();\r\n        doc.open();\r\n        if (n.compatMode === 'BackCompat' &&\r\n            n.childNodes &&\r\n            n.childNodes[0].type !== NodeType.DocumentType) {\r\n            if (n.childNodes[0].type === NodeType.Element &&\r\n                'xmlns' in n.childNodes[0].attributes &&\r\n                n.childNodes[0].attributes.xmlns === 'http://www.w3.org/1999/xhtml') {\r\n                doc.write('<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"\">');\r\n            }\r\n            else {\r\n                doc.write('<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\" \"\">');\r\n            }\r\n        }\r\n        node = doc;\r\n    }\r\n    mirror.add(node, n);\r\n    if ((n.type === NodeType.Document || n.type === NodeType.Element) &&\r\n        !skipChild) {\r\n        for (var _i = 0, _c = n.childNodes; _i < _c.length; _i++) {\r\n            var childN = _c[_i];\r\n            var childNode = buildNodeWithSN(childN, {\r\n                doc: doc,\r\n                mirror: mirror,\r\n                skipChild: false,\r\n                hackCss: hackCss,\r\n                afterAppend: afterAppend,\r\n                cache: cache\r\n            });\r\n            if (!childNode) {\r\n                console.warn('Failed to rebuild', childN);\r\n                continue;\r\n            }\r\n            if (childN.isShadow && isElement(node) && node.shadowRoot) {\r\n                node.shadowRoot.appendChild(childNode);\r\n            }\r\n            else {\r\n                node.appendChild(childNode);\r\n            }\r\n            if (afterAppend) {\r\n                afterAppend(childNode, childN.id);\r\n            }\r\n        }\r\n    }\r\n    return node;\r\n}\r\nfunction visit(mirror, onVisit) {\r\n    function walk(node) {\r\n        onVisit(node);\r\n    }\r\n    for (var _i = 0, _a = mirror.getIds(); _i < _a.length; _i++) {\r\n        var id = _a[_i];\r\n        if (mirror.has(id)) {\r\n            walk(mirror.getNode(id));\r\n        }\r\n    }\r\n}\r\nfunction handleScroll(node, mirror) {\r\n    var n = mirror.getMeta(node);\r\n    if ((n === null || n === void 0 ? void 0 : n.type) !== NodeType.Element) {\r\n        return;\r\n    }\r\n    var el = node;\r\n    for (var name_3 in n.attributes) {\r\n        if (!(Object.prototype.hasOwnProperty.call(n.attributes, name_3) &&\r\n            name_3.startsWith('rr_'))) {\r\n            continue;\r\n        }\r\n        var value = n.attributes[name_3];\r\n        if (name_3 === 'rr_scrollLeft') {\r\n            el.scrollLeft = value;\r\n        }\r\n        if (name_3 === 'rr_scrollTop') {\r\n            el.scrollTop = value;\r\n        }\r\n    }\r\n}\r\nfunction rebuild(n, options) {\r\n    var doc = options.doc, onVisit = options.onVisit, _a = options.hackCss, hackCss = _a === void 0 ? true : _a, afterAppend = options.afterAppend, cache = options.cache, _b = options.mirror, mirror = _b === void 0 ? new Mirror() : _b;\r\n    var node = buildNodeWithSN(n, {\r\n        doc: doc,\r\n        mirror: mirror,\r\n        skipChild: false,\r\n        hackCss: hackCss,\r\n        afterAppend: afterAppend,\r\n        cache: cache\r\n    });\r\n    visit(mirror, function (visitedNode) {\r\n        if (onVisit) {\r\n            onVisit(visitedNode);\r\n        }\r\n        handleScroll(visitedNode, mirror);\r\n    });\r\n    return node;\r\n}\n\nexport { IGNORED_NODE, Mirror, NodeType, addHoverClass, buildNodeWithSN, classMatchesRegex, createCache, createMirror, genId, getCssRuleString, getCssRulesString, is2DCanvasBlank, isCSSImportRule, isElement, isNativeShadowDom, isShadowRoot, maskInputValue, needMaskingText, rebuild, serializeNodeWithId, snapshot, transformAttribute };\n","import { classMatchesRegex, IGNORED_NODE, isShadowRoot } from '../../rrweb-snapshot/es/rrweb-snapshot.js';\n\nfunction on(type, fn, target = document) {\r\n    const options = { capture: true, passive: true };\r\n    target.addEventListener(type, fn, options);\r\n    return () => target.removeEventListener(type, fn, options);\r\n}\r\nconst DEPARTED_MIRROR_ACCESS_WARNING = 'Please stop import mirror directly. Instead of that,' +\r\n    '\\r\\n' +\r\n    'now you can use replayer.getMirror() to access the mirror instance of a replayer,' +\r\n    '\\r\\n' +\r\n    'or you can use record.mirror to access the mirror instance during recording.';\r\nlet _mirror = {\r\n    map: {},\r\n    getId() {\r\n        console.error(DEPARTED_MIRROR_ACCESS_WARNING);\r\n        return -1;\r\n    },\r\n    getNode() {\r\n        console.error(DEPARTED_MIRROR_ACCESS_WARNING);\r\n        return null;\r\n    },\r\n    removeNodeFromMap() {\r\n        console.error(DEPARTED_MIRROR_ACCESS_WARNING);\r\n    },\r\n    has() {\r\n        console.error(DEPARTED_MIRROR_ACCESS_WARNING);\r\n        return false;\r\n    },\r\n    reset() {\r\n        console.error(DEPARTED_MIRROR_ACCESS_WARNING);\r\n    },\r\n};\r\nif (typeof window !== 'undefined' && window.Proxy && window.Reflect) {\r\n    _mirror = new Proxy(_mirror, {\r\n        get(target, prop, receiver) {\r\n            if (prop === 'map') {\r\n                console.error(DEPARTED_MIRROR_ACCESS_WARNING);\r\n            }\r\n            return Reflect.get(target, prop, receiver);\r\n        },\r\n    });\r\n}\r\nfunction throttle(func, wait, options = {}) {\r\n    let timeout = null;\r\n    let previous = 0;\r\n    return function (...args) {\r\n        const now = Date.now();\r\n        if (!previous && options.leading === false) {\r\n            previous = now;\r\n        }\r\n        const remaining = wait - (now - previous);\r\n        const context = this;\r\n        if (remaining <= 0 || remaining > wait) {\r\n            if (timeout) {\r\n                clearTimeout(timeout);\r\n                timeout = null;\r\n            }\r\n            previous = now;\r\n            func.apply(context, args);\r\n        }\r\n        else if (!timeout && options.trailing !== false) {\r\n            timeout = setTimeout(() => {\r\n                previous = options.leading === false ? 0 : Date.now();\r\n                timeout = null;\r\n                func.apply(context, args);\r\n            }, remaining);\r\n        }\r\n    };\r\n}\r\nfunction hookSetter(target, key, d, isRevoked, win = window) {\r\n    const original = win.Object.getOwnPropertyDescriptor(target, key);\r\n    win.Object.defineProperty(target, key, isRevoked\r\n        ? d\r\n        : {\r\n            set(value) {\r\n                setTimeout(() => {\r\n                    d.set.call(this, value);\r\n                }, 0);\r\n                if (original && original.set) {\r\n                    original.set.call(this, value);\r\n                }\r\n            },\r\n        });\r\n    return () => hookSetter(target, key, original || {}, true);\r\n}\r\nfunction patch(source, name, replacement) {\r\n    try {\r\n        if (!(name in source)) {\r\n            return () => {\r\n            };\r\n        }\r\n        const original = source[name];\r\n        const wrapped = replacement(original);\r\n        if (typeof wrapped === 'function') {\r\n            wrapped.prototype = wrapped.prototype || {};\r\n            Object.defineProperties(wrapped, {\r\n                __rrweb_original__: {\r\n                    enumerable: false,\r\n                    value: original,\r\n                },\r\n            });\r\n        }\r\n        source[name] = wrapped;\r\n        return () => {\r\n            source[name] = original;\r\n        };\r\n    }\r\n    catch (_a) {\r\n        return () => {\r\n        };\r\n    }\r\n}\r\nfunction getWindowHeight() {\r\n    return (window.innerHeight ||\r\n        (document.documentElement && document.documentElement.clientHeight) ||\r\n        (document.body && document.body.clientHeight));\r\n}\r\nfunction getWindowWidth() {\r\n    return (window.innerWidth ||\r\n        (document.documentElement && document.documentElement.clientWidth) ||\r\n        (document.body && document.body.clientWidth));\r\n}\r\nfunction isBlocked(node, blockClass, blockSelector, checkAncestors) {\r\n    if (!node) {\r\n        return false;\r\n    }\r\n    const el = node.nodeType === node.ELEMENT_NODE\r\n        ? node\r\n        : node.parentElement;\r\n    if (!el)\r\n        return false;\r\n    if (typeof blockClass === 'string') {\r\n        if (el.classList.contains(blockClass))\r\n            return true;\r\n        if (checkAncestors && el.closest('.' + blockClass) !== null)\r\n            return true;\r\n    }\r\n    else {\r\n        if (classMatchesRegex(el, blockClass, checkAncestors))\r\n            return true;\r\n    }\r\n    if (blockSelector) {\r\n        if (node.matches(blockSelector))\r\n            return true;\r\n        if (checkAncestors && el.closest(blockSelector) !== null)\r\n            return true;\r\n    }\r\n    return false;\r\n}\r\nfunction isSerialized(n, mirror) {\r\n    return mirror.getId(n) !== -1;\r\n}\r\nfunction isIgnored(n, mirror) {\r\n    return mirror.getId(n) === IGNORED_NODE;\r\n}\r\nfunction isAncestorRemoved(target, mirror) {\r\n    if (isShadowRoot(target)) {\r\n        return false;\r\n    }\r\n    const id = mirror.getId(target);\r\n    if (!mirror.has(id)) {\r\n        return true;\r\n    }\r\n    if (target.parentNode &&\r\n        target.parentNode.nodeType === target.DOCUMENT_NODE) {\r\n        return false;\r\n    }\r\n    if (!target.parentNode) {\r\n        return true;\r\n    }\r\n    return isAncestorRemoved(target.parentNode, mirror);\r\n}\r\nfunction isTouchEvent(event) {\r\n    return Boolean(event.changedTouches);\r\n}\r\nfunction polyfill(win = window) {\r\n    if ('NodeList' in win && !win.NodeList.prototype.forEach) {\r\n        win.NodeList.prototype.forEach = Array.prototype\r\n            .forEach;\r\n    }\r\n    if ('DOMTokenList' in win && !win.DOMTokenList.prototype.forEach) {\r\n        win.DOMTokenList.prototype.forEach = Array.prototype\r\n            .forEach;\r\n    }\r\n    if (!Node.prototype.contains) {\r\n        Node.prototype.contains = (...args) => {\r\n            let node = args[0];\r\n            if (!(0 in args)) {\r\n                throw new TypeError('1 argument is required');\r\n            }\r\n            do {\r\n                if (this === node) {\r\n                    return true;\r\n                }\r\n            } while ((node = node && node.parentNode));\r\n            return false;\r\n        };\r\n    }\r\n}\r\nfunction queueToResolveTrees(queue) {\r\n    const queueNodeMap = {};\r\n    const putIntoMap = (m, parent) => {\r\n        const nodeInTree = {\r\n            value: m,\r\n            parent,\r\n            children: [],\r\n        };\r\n        queueNodeMap[m.node.id] = nodeInTree;\r\n        return nodeInTree;\r\n    };\r\n    const queueNodeTrees = [];\r\n    for (const mutation of queue) {\r\n        const { nextId, parentId } = mutation;\r\n        if (nextId && nextId in queueNodeMap) {\r\n            const nextInTree = queueNodeMap[nextId];\r\n            if (nextInTree.parent) {\r\n                const idx = nextInTree.parent.children.indexOf(nextInTree);\r\n                nextInTree.parent.children.splice(idx, 0, putIntoMap(mutation, nextInTree.parent));\r\n            }\r\n            else {\r\n                const idx = queueNodeTrees.indexOf(nextInTree);\r\n                queueNodeTrees.splice(idx, 0, putIntoMap(mutation, null));\r\n            }\r\n            continue;\r\n        }\r\n        if (parentId in queueNodeMap) {\r\n            const parentInTree = queueNodeMap[parentId];\r\n            parentInTree.children.push(putIntoMap(mutation, parentInTree));\r\n            continue;\r\n        }\r\n        queueNodeTrees.push(putIntoMap(mutation, null));\r\n    }\r\n    return queueNodeTrees;\r\n}\r\nfunction iterateResolveTree(tree, cb) {\r\n    cb(tree.value);\r\n    for (let i = tree.children.length - 1; i >= 0; i--) {\r\n        iterateResolveTree(tree.children[i], cb);\r\n    }\r\n}\r\nfunction isSerializedIframe(n, mirror) {\r\n    return Boolean(n.nodeName === 'IFRAME' && mirror.getMeta(n));\r\n}\r\nfunction isSerializedStylesheet(n, mirror) {\r\n    return Boolean(n.nodeName === 'LINK' &&\r\n        n.nodeType === n.ELEMENT_NODE &&\r\n        n.getAttribute &&\r\n        n.getAttribute('rel') === 'stylesheet' &&\r\n        mirror.getMeta(n));\r\n}\r\nfunction getBaseDimension(node, rootIframe) {\r\n    var _a, _b;\r\n    const frameElement = (_b = (_a = node.ownerDocument) === null || _a === void 0 ? void 0 : _a.defaultView) === null || _b === void 0 ? void 0 : _b.frameElement;\r\n    if (!frameElement || frameElement === rootIframe) {\r\n        return {\r\n            x: 0,\r\n            y: 0,\r\n            relativeScale: 1,\r\n            absoluteScale: 1,\r\n        };\r\n    }\r\n    const frameDimension = frameElement.getBoundingClientRect();\r\n    const frameBaseDimension = getBaseDimension(frameElement, rootIframe);\r\n    const relativeScale = frameDimension.height / frameElement.clientHeight;\r\n    return {\r\n        x: frameDimension.x * frameBaseDimension.relativeScale +\r\n            frameBaseDimension.x,\r\n        y: frameDimension.y * frameBaseDimension.relativeScale +\r\n            frameBaseDimension.y,\r\n        relativeScale,\r\n        absoluteScale: frameBaseDimension.absoluteScale * relativeScale,\r\n    };\r\n}\r\nfunction hasShadowRoot(n) {\r\n    return Boolean(n === null || n === void 0 ? void 0 : n.shadowRoot);\r\n}\r\nfunction getNestedRule(rules, position) {\r\n    const rule = rules[position[0]];\r\n    if (position.length === 1) {\r\n        return rule;\r\n    }\r\n    else {\r\n        return getNestedRule(rule.cssRules[position[1]].cssRules, position.slice(2));\r\n    }\r\n}\r\nfunction getPositionsAndIndex(nestedIndex) {\r\n    const positions = [...nestedIndex];\r\n    const index = positions.pop();\r\n    return { positions, index };\r\n}\r\nfunction uniqueTextMutations(mutations) {\r\n    const idSet = new Set();\r\n    const uniqueMutations = [];\r\n    for (let i = mutations.length; i--;) {\r\n        const mutation = mutations[i];\r\n        if (!idSet.has(mutation.id)) {\r\n            uniqueMutations.push(mutation);\r\n            idSet.add(mutation.id);\r\n        }\r\n    }\r\n    return uniqueMutations;\r\n}\r\nclass StyleSheetMirror {\r\n    constructor() {\r\n        this.id = 1;\r\n        this.styleIDMap = new WeakMap();\r\n        this.idStyleMap = new Map();\r\n    }\r\n    getId(stylesheet) {\r\n        var _a;\r\n        return (_a = this.styleIDMap.get(stylesheet)) !== null && _a !== void 0 ? _a : -1;\r\n    }\r\n    has(stylesheet) {\r\n        return this.styleIDMap.has(stylesheet);\r\n    }\r\n    add(stylesheet, id) {\r\n        if (this.has(stylesheet))\r\n            return this.getId(stylesheet);\r\n        let newId;\r\n        if (id === undefined) {\r\n            newId = this.id++;\r\n        }\r\n        else\r\n            newId = id;\r\n        this.styleIDMap.set(stylesheet, newId);\r\n        this.idStyleMap.set(newId, stylesheet);\r\n        return newId;\r\n    }\r\n    getStyle(id) {\r\n        return this.idStyleMap.get(id) || null;\r\n    }\r\n    reset() {\r\n        this.styleIDMap = new WeakMap();\r\n        this.idStyleMap = new Map();\r\n        this.id = 1;\r\n    }\r\n    generateId() {\r\n        return this.id++;\r\n    }\r\n}\n\nexport { StyleSheetMirror, _mirror, getBaseDimension, getNestedRule, getPositionsAndIndex, getWindowHeight, getWindowWidth, hasShadowRoot, hookSetter, isAncestorRemoved, isBlocked, isIgnored, isSerialized, isSerializedIframe, isSerializedStylesheet, isTouchEvent, iterateResolveTree, on, patch, polyfill, queueToResolveTrees, throttle, uniqueTextMutations };\n","var EventType = /* @__PURE__ */ ((EventType2) => {\n  EventType2[EventType2[\"DomContentLoaded\"] = 0] = \"DomContentLoaded\";\n  EventType2[EventType2[\"Load\"] = 1] = \"Load\";\n  EventType2[EventType2[\"FullSnapshot\"] = 2] = \"FullSnapshot\";\n  EventType2[EventType2[\"IncrementalSnapshot\"] = 3] = \"IncrementalSnapshot\";\n  EventType2[EventType2[\"Meta\"] = 4] = \"Meta\";\n  EventType2[EventType2[\"Custom\"] = 5] = \"Custom\";\n  EventType2[EventType2[\"Plugin\"] = 6] = \"Plugin\";\n  return EventType2;\n})(EventType || {});\nvar IncrementalSource = /* @__PURE__ */ ((IncrementalSource2) => {\n  IncrementalSource2[IncrementalSource2[\"Mutation\"] = 0] = \"Mutation\";\n  IncrementalSource2[IncrementalSource2[\"MouseMove\"] = 1] = \"MouseMove\";\n  IncrementalSource2[IncrementalSource2[\"MouseInteraction\"] = 2] = \"MouseInteraction\";\n  IncrementalSource2[IncrementalSource2[\"Scroll\"] = 3] = \"Scroll\";\n  IncrementalSource2[IncrementalSource2[\"ViewportResize\"] = 4] = \"ViewportResize\";\n  IncrementalSource2[IncrementalSource2[\"Input\"] = 5] = \"Input\";\n  IncrementalSource2[IncrementalSource2[\"TouchMove\"] = 6] = \"TouchMove\";\n  IncrementalSource2[IncrementalSource2[\"MediaInteraction\"] = 7] = \"MediaInteraction\";\n  IncrementalSource2[IncrementalSource2[\"StyleSheetRule\"] = 8] = \"StyleSheetRule\";\n  IncrementalSource2[IncrementalSource2[\"CanvasMutation\"] = 9] = \"CanvasMutation\";\n  IncrementalSource2[IncrementalSource2[\"Font\"] = 10] = \"Font\";\n  IncrementalSource2[IncrementalSource2[\"Log\"] = 11] = \"Log\";\n  IncrementalSource2[IncrementalSource2[\"Drag\"] = 12] = \"Drag\";\n  IncrementalSource2[IncrementalSource2[\"StyleDeclaration\"] = 13] = \"StyleDeclaration\";\n  IncrementalSource2[IncrementalSource2[\"Selection\"] = 14] = \"Selection\";\n  IncrementalSource2[IncrementalSource2[\"AdoptedStyleSheet\"] = 15] = \"AdoptedStyleSheet\";\n  return IncrementalSource2;\n})(IncrementalSource || {});\nvar MouseInteractions = /* @__PURE__ */ ((MouseInteractions2) => {\n  MouseInteractions2[MouseInteractions2[\"MouseUp\"] = 0] = \"MouseUp\";\n  MouseInteractions2[MouseInteractions2[\"MouseDown\"] = 1] = \"MouseDown\";\n  MouseInteractions2[MouseInteractions2[\"Click\"] = 2] = \"Click\";\n  MouseInteractions2[MouseInteractions2[\"ContextMenu\"] = 3] = \"ContextMenu\";\n  MouseInteractions2[MouseInteractions2[\"DblClick\"] = 4] = \"DblClick\";\n  MouseInteractions2[MouseInteractions2[\"Focus\"] = 5] = \"Focus\";\n  MouseInteractions2[MouseInteractions2[\"Blur\"] = 6] = \"Blur\";\n  MouseInteractions2[MouseInteractions2[\"TouchStart\"] = 7] = \"TouchStart\";\n  MouseInteractions2[MouseInteractions2[\"TouchMove_Departed\"] = 8] = \"TouchMove_Departed\";\n  MouseInteractions2[MouseInteractions2[\"TouchEnd\"] = 9] = \"TouchEnd\";\n  MouseInteractions2[MouseInteractions2[\"TouchCancel\"] = 10] = \"TouchCancel\";\n  return MouseInteractions2;\n})(MouseInteractions || {});\nvar CanvasContext = /* @__PURE__ */ ((CanvasContext2) => {\n  CanvasContext2[CanvasContext2[\"2D\"] = 0] = \"2D\";\n  CanvasContext2[CanvasContext2[\"WebGL\"] = 1] = \"WebGL\";\n  CanvasContext2[CanvasContext2[\"WebGL2\"] = 2] = \"WebGL2\";\n  return CanvasContext2;\n})(CanvasContext || {});\nvar ReplayerEvents = /* @__PURE__ */ ((ReplayerEvents2) => {\n  ReplayerEvents2[\"Start\"] = \"start\";\n  ReplayerEvents2[\"Pause\"] = \"pause\";\n  ReplayerEvents2[\"Resume\"] = \"resume\";\n  ReplayerEvents2[\"Resize\"] = \"resize\";\n  ReplayerEvents2[\"Finish\"] = \"finish\";\n  ReplayerEvents2[\"FullsnapshotRebuilded\"] = \"fullsnapshot-rebuilded\";\n  ReplayerEvents2[\"LoadStylesheetStart\"] = \"load-stylesheet-start\";\n  ReplayerEvents2[\"LoadStylesheetEnd\"] = \"load-stylesheet-end\";\n  ReplayerEvents2[\"SkipStart\"] = \"skip-start\";\n  ReplayerEvents2[\"SkipEnd\"] = \"skip-end\";\n  ReplayerEvents2[\"MouseInteraction\"] = \"mouse-interaction\";\n  ReplayerEvents2[\"EventCast\"] = \"event-cast\";\n  ReplayerEvents2[\"CustomEvent\"] = \"custom-event\";\n  ReplayerEvents2[\"Flush\"] = \"flush\";\n  ReplayerEvents2[\"StateChange\"] = \"state-change\";\n  ReplayerEvents2[\"PlayBack\"] = \"play-back\";\n  ReplayerEvents2[\"Destroy\"] = \"destroy\";\n  return ReplayerEvents2;\n})(ReplayerEvents || {});\n\nexport { CanvasContext, EventType, IncrementalSource, MouseInteractions, ReplayerEvents };\n","import { isShadowRoot, isNativeShadowDom, maskInputValue, transformAttribute, needMaskingText, IGNORED_NODE, serializeNodeWithId } from '../../../rrweb-snapshot/es/rrweb-snapshot.js';\nimport { isIgnored, isBlocked, isSerialized, isAncestorRemoved, isSerializedIframe, isSerializedStylesheet, hasShadowRoot } from '../utils.js';\n\nfunction isNodeInLinkedList(n) {\r\n    return '__ln' in n;\r\n}\r\nclass DoubleLinkedList {\r\n    constructor() {\r\n        this.length = 0;\r\n        this.head = null;\r\n    }\r\n    get(position) {\r\n        if (position >= this.length) {\r\n            throw new Error('Position outside of list range');\r\n        }\r\n        let current = this.head;\r\n        for (let index = 0; index < position; index++) {\r\n            current = (current === null || current === void 0 ? void 0 : current.next) || null;\r\n        }\r\n        return current;\r\n    }\r\n    addNode(n) {\r\n        const node = {\r\n            value: n,\r\n            previous: null,\r\n            next: null,\r\n        };\r\n        n.__ln = node;\r\n        if (n.previousSibling && isNodeInLinkedList(n.previousSibling)) {\r\n            const current = n.previousSibling.__ln.next;\r\n            node.next = current;\r\n            node.previous = n.previousSibling.__ln;\r\n            n.previousSibling.__ln.next = node;\r\n            if (current) {\r\n                current.previous = node;\r\n            }\r\n        }\r\n        else if (n.nextSibling &&\r\n            isNodeInLinkedList(n.nextSibling) &&\r\n            n.nextSibling.__ln.previous) {\r\n            const current = n.nextSibling.__ln.previous;\r\n            node.previous = current;\r\n            node.next = n.nextSibling.__ln;\r\n            n.nextSibling.__ln.previous = node;\r\n            if (current) {\r\n                current.next = node;\r\n            }\r\n        }\r\n        else {\r\n            if (this.head) {\r\n                this.head.previous = node;\r\n            }\r\n            node.next = this.head;\r\n            this.head = node;\r\n        }\r\n        this.length++;\r\n    }\r\n    removeNode(n) {\r\n        const current = n.__ln;\r\n        if (!this.head) {\r\n            return;\r\n        }\r\n        if (!current.previous) {\r\n            this.head = current.next;\r\n            if (this.head) {\r\n                this.head.previous = null;\r\n            }\r\n        }\r\n        else {\r\n            current.previous.next = current.next;\r\n            if (current.next) {\r\n                current.next.previous = current.previous;\r\n            }\r\n        }\r\n        if (n.__ln) {\r\n            delete n.__ln;\r\n        }\r\n        this.length--;\r\n    }\r\n}\r\nconst moveKey = (id, parentId) => `${id}@${parentId}`;\r\nclass MutationBuffer {\r\n    constructor() {\r\n        this.frozen = false;\r\n        this.locked = false;\r\n        this.texts = [];\r\n        this.attributes = [];\r\n        this.removes = [];\r\n        this.mapRemoves = [];\r\n        this.movedMap = {};\r\n        this.addedSet = new Set();\r\n        this.movedSet = new Set();\r\n        this.droppedSet = new Set();\r\n        this.processMutations = (mutations) => {\r\n            mutations.forEach(this.processMutation);\r\n            this.emit();\r\n        };\r\n        this.emit = () => {\r\n            if (this.frozen || this.locked) {\r\n                return;\r\n            }\r\n            const adds = [];\r\n            const addList = new DoubleLinkedList();\r\n            const getNextId = (n) => {\r\n                let ns = n;\r\n                let nextId = IGNORED_NODE;\r\n                while (nextId === IGNORED_NODE) {\r\n                    ns = ns && ns.nextSibling;\r\n                    nextId = ns && this.mirror.getId(ns);\r\n                }\r\n                return nextId;\r\n            };\r\n            const pushAdd = (n) => {\r\n                var _a, _b, _c, _d;\r\n                let shadowHost = null;\r\n                if (((_b = (_a = n.getRootNode) === null || _a === void 0 ? void 0 : _a.call(n)) === null || _b === void 0 ? void 0 : _b.nodeType) === Node.DOCUMENT_FRAGMENT_NODE &&\r\n                    n.getRootNode().host)\r\n                    shadowHost = n.getRootNode().host;\r\n                let rootShadowHost = shadowHost;\r\n                while (((_d = (_c = rootShadowHost === null || rootShadowHost === void 0 ? void 0 : rootShadowHost.getRootNode) === null || _c === void 0 ? void 0 : _c.call(rootShadowHost)) === null || _d === void 0 ? void 0 : _d.nodeType) ===\r\n                    Node.DOCUMENT_FRAGMENT_NODE &&\r\n                    rootShadowHost.getRootNode().host)\r\n                    rootShadowHost = rootShadowHost.getRootNode().host;\r\n                const notInDoc = !this.doc.contains(n) &&\r\n                    (!rootShadowHost || !this.doc.contains(rootShadowHost));\r\n                if (!n.parentNode || notInDoc) {\r\n                    return;\r\n                }\r\n                const parentId = isShadowRoot(n.parentNode)\r\n                    ? this.mirror.getId(shadowHost)\r\n                    : this.mirror.getId(n.parentNode);\r\n                const nextId = getNextId(n);\r\n                if (parentId === -1 || nextId === -1) {\r\n                    return addList.addNode(n);\r\n                }\r\n                const sn = serializeNodeWithId(n, {\r\n                    doc: this.doc,\r\n                    mirror: this.mirror,\r\n                    blockClass: this.blockClass,\r\n                    blockSelector: this.blockSelector,\r\n                    maskTextClass: this.maskTextClass,\r\n                    maskTextSelector: this.maskTextSelector,\r\n                    skipChild: true,\r\n                    newlyAddedElement: true,\r\n                    inlineStylesheet: this.inlineStylesheet,\r\n                    maskInputOptions: this.maskInputOptions,\r\n                    maskTextFn: this.maskTextFn,\r\n                    maskInputFn: this.maskInputFn,\r\n                    slimDOMOptions: this.slimDOMOptions,\r\n                    dataURLOptions: this.dataURLOptions,\r\n                    recordCanvas: this.recordCanvas,\r\n                    inlineImages: this.inlineImages,\r\n                    onSerialize: (currentN) => {\r\n                        if (isSerializedIframe(currentN, this.mirror)) {\r\n                            this.iframeManager.addIframe(currentN);\r\n                        }\r\n                        if (isSerializedStylesheet(currentN, this.mirror)) {\r\n                            this.stylesheetManager.trackLinkElement(currentN);\r\n                        }\r\n                        if (hasShadowRoot(n)) {\r\n                            this.shadowDomManager.addShadowRoot(n.shadowRoot, this.doc);\r\n                        }\r\n                    },\r\n                    onIframeLoad: (iframe, childSn) => {\r\n                        this.iframeManager.attachIframe(iframe, childSn);\r\n                        this.shadowDomManager.observeAttachShadow(iframe);\r\n                    },\r\n                    onStylesheetLoad: (link, childSn) => {\r\n                        this.stylesheetManager.attachLinkElement(link, childSn);\r\n                    },\r\n                });\r\n                if (sn) {\r\n                    adds.push({\r\n                        parentId,\r\n                        nextId,\r\n                        node: sn,\r\n                    });\r\n                }\r\n            };\r\n            while (this.mapRemoves.length) {\r\n                this.mirror.removeNodeFromMap(this.mapRemoves.shift());\r\n            }\r\n            for (const n of Array.from(this.movedSet.values())) {\r\n                if (isParentRemoved(this.removes, n, this.mirror) &&\r\n                    !this.movedSet.has(n.parentNode)) {\r\n                    continue;\r\n                }\r\n                pushAdd(n);\r\n            }\r\n            for (const n of Array.from(this.addedSet.values())) {\r\n                if (!isAncestorInSet(this.droppedSet, n) &&\r\n                    !isParentRemoved(this.removes, n, this.mirror)) {\r\n                    pushAdd(n);\r\n                }\r\n                else if (isAncestorInSet(this.movedSet, n)) {\r\n                    pushAdd(n);\r\n                }\r\n                else {\r\n                    this.droppedSet.add(n);\r\n                }\r\n            }\r\n            let candidate = null;\r\n            while (addList.length) {\r\n                let node = null;\r\n                if (candidate) {\r\n                    const parentId = this.mirror.getId(candidate.value.parentNode);\r\n                    const nextId = getNextId(candidate.value);\r\n                    if (parentId !== -1 && nextId !== -1) {\r\n                        node = candidate;\r\n                    }\r\n                }\r\n                if (!node) {\r\n                    for (let index = addList.length - 1; index >= 0; index--) {\r\n                        const _node = addList.get(index);\r\n                        if (_node) {\r\n                            const parentId = this.mirror.getId(_node.value.parentNode);\r\n                            const nextId = getNextId(_node.value);\r\n                            if (nextId === -1)\r\n                                continue;\r\n                            else if (parentId !== -1) {\r\n                                node = _node;\r\n                                break;\r\n                            }\r\n                            else {\r\n                                const unhandledNode = _node.value;\r\n                                if (unhandledNode.parentNode &&\r\n                                    unhandledNode.parentNode.nodeType ===\r\n                                        Node.DOCUMENT_FRAGMENT_NODE) {\r\n                                    const shadowHost = unhandledNode.parentNode\r\n                                        .host;\r\n                                    const parentId = this.mirror.getId(shadowHost);\r\n                                    if (parentId !== -1) {\r\n                                        node = _node;\r\n                                        break;\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                if (!node) {\r\n                    while (addList.head) {\r\n                        addList.removeNode(addList.head.value);\r\n                    }\r\n                    break;\r\n                }\r\n                candidate = node.previous;\r\n                addList.removeNode(node.value);\r\n                pushAdd(node.value);\r\n            }\r\n            const payload = {\r\n                texts: this.texts\r\n                    .map((text) => ({\r\n                    id: this.mirror.getId(text.node),\r\n                    value: text.value,\r\n                }))\r\n                    .filter((text) => this.mirror.has(text.id)),\r\n                attributes: this.attributes\r\n                    .map((attribute) => ({\r\n                    id: this.mirror.getId(attribute.node),\r\n                    attributes: attribute.attributes,\r\n                }))\r\n                    .filter((attribute) => this.mirror.has(attribute.id)),\r\n                removes: this.removes,\r\n                adds,\r\n            };\r\n            if (!payload.texts.length &&\r\n                !payload.attributes.length &&\r\n                !payload.removes.length &&\r\n                !payload.adds.length) {\r\n                return;\r\n            }\r\n            this.texts = [];\r\n            this.attributes = [];\r\n            this.removes = [];\r\n            this.addedSet = new Set();\r\n            this.movedSet = new Set();\r\n            this.droppedSet = new Set();\r\n            this.movedMap = {};\r\n            this.mutationCb(payload);\r\n        };\r\n        this.processMutation = (m) => {\r\n            if (isIgnored(m.target, this.mirror)) {\r\n                return;\r\n            }\r\n            switch (m.type) {\r\n                case 'characterData': {\r\n                    const value = m.target.textContent;\r\n                    if (!isBlocked(m.target, this.blockClass, this.blockSelector, false) &&\r\n                        value !== m.oldValue) {\r\n                        this.texts.push({\r\n                            value: needMaskingText(m.target, this.maskTextClass, this.maskTextSelector) && value\r\n                                ? this.maskTextFn\r\n                                    ? this.maskTextFn(value)\r\n                                    : value.replace(/[\\S]/g, '*')\r\n                                : value,\r\n                            node: m.target,\r\n                        });\r\n                    }\r\n                    break;\r\n                }\r\n                case 'attributes': {\r\n                    const target = m.target;\r\n                    let value = m.target.getAttribute(m.attributeName);\r\n                    if (m.attributeName === 'value') {\r\n                        value = maskInputValue({\r\n                            maskInputOptions: this.maskInputOptions,\r\n                            tagName: m.target.tagName,\r\n                            type: m.target.getAttribute('type'),\r\n                            value,\r\n                            maskInputFn: this.maskInputFn,\r\n                        });\r\n                    }\r\n                    if (isBlocked(m.target, this.blockClass, this.blockSelector, false) ||\r\n                        value === m.oldValue) {\r\n                        return;\r\n                    }\r\n                    let item = this.attributes.find((a) => a.node === m.target);\r\n                    if (target.tagName === 'IFRAME' &&\r\n                        m.attributeName === 'src' &&\r\n                        !this.keepIframeSrcFn(value)) {\r\n                        if (!target.contentDocument) {\r\n                            m.attributeName = 'rr_src';\r\n                        }\r\n                        else {\r\n                            return;\r\n                        }\r\n                    }\r\n                    if (!item) {\r\n                        item = {\r\n                            node: m.target,\r\n                            attributes: {},\r\n                        };\r\n                        this.attributes.push(item);\r\n                    }\r\n                    if (m.attributeName === 'style') {\r\n                        const old = this.doc.createElement('span');\r\n                        if (m.oldValue) {\r\n                            old.setAttribute('style', m.oldValue);\r\n                        }\r\n                        if (item.attributes.style === undefined ||\r\n                            item.attributes.style === null) {\r\n                            item.attributes.style = {};\r\n                        }\r\n                        const styleObj = item.attributes.style;\r\n                        for (const pname of Array.from(target.style)) {\r\n                            const newValue = target.style.getPropertyValue(pname);\r\n                            const newPriority = target.style.getPropertyPriority(pname);\r\n                            if (newValue !== old.style.getPropertyValue(pname) ||\r\n                                newPriority !== old.style.getPropertyPriority(pname)) {\r\n                                if (newPriority === '') {\r\n                                    styleObj[pname] = newValue;\r\n                                }\r\n                                else {\r\n                                    styleObj[pname] = [newValue, newPriority];\r\n                                }\r\n                            }\r\n                        }\r\n                        for (const pname of Array.from(old.style)) {\r\n                            if (target.style.getPropertyValue(pname) === '') {\r\n                                styleObj[pname] = false;\r\n                            }\r\n                        }\r\n                    }\r\n                    else {\r\n                        item.attributes[m.attributeName] = transformAttribute(this.doc, target.tagName, m.attributeName, value);\r\n                    }\r\n                    break;\r\n                }\r\n                case 'childList': {\r\n                    if (isBlocked(m.target, this.blockClass, this.blockSelector, true))\r\n                        return;\r\n                    m.addedNodes.forEach((n) => this.genAdds(n, m.target));\r\n                    m.removedNodes.forEach((n) => {\r\n                        const nodeId = this.mirror.getId(n);\r\n                        const parentId = isShadowRoot(m.target)\r\n                            ? this.mirror.getId(m.target.host)\r\n                            : this.mirror.getId(m.target);\r\n                        if (isBlocked(m.target, this.blockClass, this.blockSelector, false) ||\r\n                            isIgnored(n, this.mirror) ||\r\n                            !isSerialized(n, this.mirror)) {\r\n                            return;\r\n                        }\r\n                        if (this.addedSet.has(n)) {\r\n                            deepDelete(this.addedSet, n);\r\n                            this.droppedSet.add(n);\r\n                        }\r\n                        else if (this.addedSet.has(m.target) && nodeId === -1) ;\r\n                        else if (isAncestorRemoved(m.target, this.mirror)) ;\r\n                        else if (this.movedSet.has(n) &&\r\n                            this.movedMap[moveKey(nodeId, parentId)]) {\r\n                            deepDelete(this.movedSet, n);\r\n                        }\r\n                        else {\r\n                            this.removes.push({\r\n                                parentId,\r\n                                id: nodeId,\r\n                                isShadow: isShadowRoot(m.target) && isNativeShadowDom(m.target)\r\n                                    ? true\r\n                                    : undefined,\r\n                            });\r\n                        }\r\n                        this.mapRemoves.push(n);\r\n                    });\r\n                    break;\r\n                }\r\n            }\r\n        };\r\n        this.genAdds = (n, target) => {\r\n            if (this.mirror.hasNode(n)) {\r\n                if (isIgnored(n, this.mirror)) {\r\n                    return;\r\n                }\r\n                this.movedSet.add(n);\r\n                let targetId = null;\r\n                if (target && this.mirror.hasNode(target)) {\r\n                    targetId = this.mirror.getId(target);\r\n                }\r\n                if (targetId && targetId !== -1) {\r\n                    this.movedMap[moveKey(this.mirror.getId(n), targetId)] = true;\r\n                }\r\n            }\r\n            else {\r\n                this.addedSet.add(n);\r\n                this.droppedSet.delete(n);\r\n            }\r\n            if (!isBlocked(n, this.blockClass, this.blockSelector, false))\r\n                n.childNodes.forEach((childN) => this.genAdds(childN));\r\n        };\r\n    }\r\n    init(options) {\r\n        [\r\n            'mutationCb',\r\n            'blockClass',\r\n            'blockSelector',\r\n            'maskTextClass',\r\n            'maskTextSelector',\r\n            'inlineStylesheet',\r\n            'maskInputOptions',\r\n            'maskTextFn',\r\n            'maskInputFn',\r\n            'keepIframeSrcFn',\r\n            'recordCanvas',\r\n            'inlineImages',\r\n            'slimDOMOptions',\r\n            'dataURLOptions',\r\n            'doc',\r\n            'mirror',\r\n            'iframeManager',\r\n            'stylesheetManager',\r\n            'shadowDomManager',\r\n            'canvasManager',\r\n        ].forEach((key) => {\r\n            this[key] = options[key];\r\n        });\r\n    }\r\n    freeze() {\r\n        this.frozen = true;\r\n        this.canvasManager.freeze();\r\n    }\r\n    unfreeze() {\r\n        this.frozen = false;\r\n        this.canvasManager.unfreeze();\r\n        this.emit();\r\n    }\r\n    isFrozen() {\r\n        return this.frozen;\r\n    }\r\n    lock() {\r\n        this.locked = true;\r\n        this.canvasManager.lock();\r\n    }\r\n    unlock() {\r\n        this.locked = false;\r\n        this.canvasManager.unlock();\r\n        this.emit();\r\n    }\r\n    reset() {\r\n        this.shadowDomManager.reset();\r\n        this.canvasManager.reset();\r\n    }\r\n}\r\nfunction deepDelete(addsSet, n) {\r\n    addsSet.delete(n);\r\n    n.childNodes.forEach((childN) => deepDelete(addsSet, childN));\r\n}\r\nfunction isParentRemoved(removes, n, mirror) {\r\n    if (removes.length === 0)\r\n        return false;\r\n    return _isParentRemoved(removes, n, mirror);\r\n}\r\nfunction _isParentRemoved(removes, n, mirror) {\r\n    const { parentNode } = n;\r\n    if (!parentNode) {\r\n        return false;\r\n    }\r\n    const parentId = mirror.getId(parentNode);\r\n    if (removes.some((r) => r.id === parentId)) {\r\n        return true;\r\n    }\r\n    return _isParentRemoved(removes, parentNode, mirror);\r\n}\r\nfunction isAncestorInSet(set, n) {\r\n    if (set.size === 0)\r\n        return false;\r\n    return _isAncestorInSet(set, n);\r\n}\r\nfunction _isAncestorInSet(set, n) {\r\n    const { parentNode } = n;\r\n    if (!parentNode) {\r\n        return false;\r\n    }\r\n    if (set.has(parentNode)) {\r\n        return true;\r\n    }\r\n    return _isAncestorInSet(set, parentNode);\r\n}\n\nexport { MutationBuffer as default };\n","import { maskInputValue } from '../../../rrweb-snapshot/es/rrweb-snapshot.js';\nimport { on, throttle, isBlocked, getWindowHeight, getWindowWidth, hookSetter, patch, isTouchEvent } from '../utils.js';\nimport { MouseInteractions, IncrementalSource } from '../../../types/dist/types.js';\nimport MutationBuffer from './mutation.js';\n\nconst mutationBuffers = [];\r\nconst isCSSGroupingRuleSupported = typeof CSSGroupingRule !== 'undefined';\r\nconst isCSSMediaRuleSupported = typeof CSSMediaRule !== 'undefined';\r\nconst isCSSSupportsRuleSupported = typeof CSSSupportsRule !== 'undefined';\r\nconst isCSSConditionRuleSupported = typeof CSSConditionRule !== 'undefined';\r\nfunction getEventTarget(event) {\r\n    try {\r\n        if ('composedPath' in event) {\r\n            const path = event.composedPath();\r\n            if (path.length) {\r\n                return path[0];\r\n            }\r\n        }\r\n        else if ('path' in event && event.path.length) {\r\n            return event.path[0];\r\n        }\r\n        return event.target;\r\n    }\r\n    catch (_a) {\r\n        return event.target;\r\n    }\r\n}\r\nfunction initMutationObserver(options, rootEl) {\r\n    var _a, _b;\r\n    const mutationBuffer = new MutationBuffer();\r\n    mutationBuffers.push(mutationBuffer);\r\n    mutationBuffer.init(options);\r\n    let mutationObserverCtor = window.MutationObserver ||\r\n        window.__rrMutationObserver;\r\n    const angularZoneSymbol = (_b = (_a = window === null || window === void 0 ? void 0 : window.Zone) === null || _a === void 0 ? void 0 : _a.__symbol__) === null || _b === void 0 ? void 0 : _b.call(_a, 'MutationObserver');\r\n    if (angularZoneSymbol &&\r\n        window[angularZoneSymbol]) {\r\n        mutationObserverCtor = window[angularZoneSymbol];\r\n    }\r\n    const observer = new mutationObserverCtor(mutationBuffer.processMutations.bind(mutationBuffer));\r\n    observer.observe(rootEl, {\r\n        attributes: true,\r\n        attributeOldValue: true,\r\n        characterData: true,\r\n        characterDataOldValue: true,\r\n        childList: true,\r\n        subtree: true,\r\n    });\r\n    return observer;\r\n}\r\nfunction initMoveObserver({ mousemoveCb, sampling, doc, mirror, }) {\r\n    if (sampling.mousemove === false) {\r\n        return () => {\r\n        };\r\n    }\r\n    const threshold = typeof sampling.mousemove === 'number' ? sampling.mousemove : 50;\r\n    const callbackThreshold = typeof sampling.mousemoveCallback === 'number'\r\n        ? sampling.mousemoveCallback\r\n        : 500;\r\n    let positions = [];\r\n    let timeBaseline;\r\n    const wrappedCb = throttle((source) => {\r\n        const totalOffset = Date.now() - timeBaseline;\r\n        mousemoveCb(positions.map((p) => {\r\n            p.timeOffset -= totalOffset;\r\n            return p;\r\n        }), source);\r\n        positions = [];\r\n        timeBaseline = null;\r\n    }, callbackThreshold);\r\n    const updatePosition = throttle((evt) => {\r\n        const target = getEventTarget(evt);\r\n        const { clientX, clientY } = isTouchEvent(evt)\r\n            ? evt.changedTouches[0]\r\n            : evt;\r\n        if (!timeBaseline) {\r\n            timeBaseline = Date.now();\r\n        }\r\n        positions.push({\r\n            x: clientX,\r\n            y: clientY,\r\n            id: mirror.getId(target),\r\n            timeOffset: Date.now() - timeBaseline,\r\n        });\r\n        wrappedCb(typeof DragEvent !== 'undefined' && evt instanceof DragEvent\r\n            ? IncrementalSource.Drag\r\n            : evt instanceof MouseEvent\r\n                ? IncrementalSource.MouseMove\r\n                : IncrementalSource.TouchMove);\r\n    }, threshold, {\r\n        trailing: false,\r\n    });\r\n    const handlers = [\r\n        on('mousemove', updatePosition, doc),\r\n        on('touchmove', updatePosition, doc),\r\n        on('drag', updatePosition, doc),\r\n    ];\r\n    return () => {\r\n        handlers.forEach((h) => h());\r\n    };\r\n}\r\nfunction initMouseInteractionObserver({ mouseInteractionCb, doc, mirror, blockClass, blockSelector, sampling, }) {\r\n    if (sampling.mouseInteraction === false) {\r\n        return () => {\r\n        };\r\n    }\r\n    const disableMap = sampling.mouseInteraction === true ||\r\n        sampling.mouseInteraction === undefined\r\n        ? {}\r\n        : sampling.mouseInteraction;\r\n    const handlers = [];\r\n    const getHandler = (eventKey) => {\r\n        return (event) => {\r\n            const target = getEventTarget(event);\r\n            if (isBlocked(target, blockClass, blockSelector, true)) {\r\n                return;\r\n            }\r\n            const e = isTouchEvent(event) ? event.changedTouches[0] : event;\r\n            if (!e) {\r\n                return;\r\n            }\r\n            const id = mirror.getId(target);\r\n            const { clientX, clientY } = e;\r\n            mouseInteractionCb({\r\n                type: MouseInteractions[eventKey],\r\n                id,\r\n                x: clientX,\r\n                y: clientY,\r\n            });\r\n        };\r\n    };\r\n    Object.keys(MouseInteractions)\r\n        .filter((key) => Number.isNaN(Number(key)) &&\r\n        !key.endsWith('_Departed') &&\r\n        disableMap[key] !== false)\r\n        .forEach((eventKey) => {\r\n        const eventName = eventKey.toLowerCase();\r\n        const handler = getHandler(eventKey);\r\n        handlers.push(on(eventName, handler, doc));\r\n    });\r\n    return () => {\r\n        handlers.forEach((h) => h());\r\n    };\r\n}\r\nfunction initScrollObserver({ scrollCb, doc, mirror, blockClass, blockSelector, sampling, }) {\r\n    const updatePosition = throttle((evt) => {\r\n        const target = getEventTarget(evt);\r\n        if (!target || isBlocked(target, blockClass, blockSelector, true)) {\r\n            return;\r\n        }\r\n        const id = mirror.getId(target);\r\n        if (target === doc) {\r\n            const scrollEl = (doc.scrollingElement || doc.documentElement);\r\n            scrollCb({\r\n                id,\r\n                x: scrollEl.scrollLeft,\r\n                y: scrollEl.scrollTop,\r\n            });\r\n        }\r\n        else {\r\n            scrollCb({\r\n                id,\r\n                x: target.scrollLeft,\r\n                y: target.scrollTop,\r\n            });\r\n        }\r\n    }, sampling.scroll || 100);\r\n    return on('scroll', updatePosition, doc);\r\n}\r\nfunction initViewportResizeObserver({ viewportResizeCb, }) {\r\n    let lastH = -1;\r\n    let lastW = -1;\r\n    const updateDimension = throttle(() => {\r\n        const height = getWindowHeight();\r\n        const width = getWindowWidth();\r\n        if (lastH !== height || lastW !== width) {\r\n            viewportResizeCb({\r\n                width: Number(width),\r\n                height: Number(height),\r\n            });\r\n            lastH = height;\r\n            lastW = width;\r\n        }\r\n    }, 200);\r\n    return on('resize', updateDimension, window);\r\n}\r\nfunction wrapEventWithUserTriggeredFlag(v, enable) {\r\n    const value = Object.assign({}, v);\r\n    if (!enable)\r\n        delete value.userTriggered;\r\n    return value;\r\n}\r\nconst INPUT_TAGS = ['INPUT', 'TEXTAREA', 'SELECT'];\r\nconst lastInputValueMap = new WeakMap();\r\nfunction initInputObserver({ inputCb, doc, mirror, blockClass, blockSelector, ignoreClass, maskInputOptions, maskInputFn, sampling, userTriggeredOnInput, }) {\r\n    function eventHandler(event) {\r\n        let target = getEventTarget(event);\r\n        const userTriggered = event.isTrusted;\r\n        if (target && target.tagName === 'OPTION')\r\n            target = target.parentElement;\r\n        if (!target ||\r\n            !target.tagName ||\r\n            INPUT_TAGS.indexOf(target.tagName) < 0 ||\r\n            isBlocked(target, blockClass, blockSelector, true)) {\r\n            return;\r\n        }\r\n        const type = target.type;\r\n        if (target.classList.contains(ignoreClass)) {\r\n            return;\r\n        }\r\n        let text = target.value;\r\n        let isChecked = false;\r\n        if (type === 'radio' || type === 'checkbox') {\r\n            isChecked = target.checked;\r\n        }\r\n        else if (maskInputOptions[target.tagName.toLowerCase()] ||\r\n            maskInputOptions[type]) {\r\n            text = maskInputValue({\r\n                maskInputOptions,\r\n                tagName: target.tagName,\r\n                type,\r\n                value: text,\r\n                maskInputFn,\r\n            });\r\n        }\r\n        cbWithDedup(target, wrapEventWithUserTriggeredFlag({ text, isChecked, userTriggered }, userTriggeredOnInput));\r\n        const name = target.name;\r\n        if (type === 'radio' && name && isChecked) {\r\n            doc\r\n                .querySelectorAll(`input[type=\"radio\"][name=\"${name}\"]`)\r\n                .forEach((el) => {\r\n                if (el !== target) {\r\n                    cbWithDedup(el, wrapEventWithUserTriggeredFlag({\r\n                        text: el.value,\r\n                        isChecked: !isChecked,\r\n                        userTriggered: false,\r\n                    }, userTriggeredOnInput));\r\n                }\r\n            });\r\n        }\r\n    }\r\n    function cbWithDedup(target, v) {\r\n        const lastInputValue = lastInputValueMap.get(target);\r\n        if (!lastInputValue ||\r\n            lastInputValue.text !== v.text ||\r\n            lastInputValue.isChecked !== v.isChecked) {\r\n            lastInputValueMap.set(target, v);\r\n            const id = mirror.getId(target);\r\n            inputCb(Object.assign(Object.assign({}, v), { id }));\r\n        }\r\n    }\r\n    const events = sampling.input === 'last' ? ['change'] : ['input', 'change'];\r\n    const handlers = events.map((eventName) => on(eventName, eventHandler, doc));\r\n    const currentWindow = doc.defaultView;\r\n    if (!currentWindow) {\r\n        return () => {\r\n            handlers.forEach((h) => h());\r\n        };\r\n    }\r\n    const propertyDescriptor = currentWindow.Object.getOwnPropertyDescriptor(currentWindow.HTMLInputElement.prototype, 'value');\r\n    const hookProperties = [\r\n        [currentWindow.HTMLInputElement.prototype, 'value'],\r\n        [currentWindow.HTMLInputElement.prototype, 'checked'],\r\n        [currentWindow.HTMLSelectElement.prototype, 'value'],\r\n        [currentWindow.HTMLTextAreaElement.prototype, 'value'],\r\n        [currentWindow.HTMLSelectElement.prototype, 'selectedIndex'],\r\n        [currentWindow.HTMLOptionElement.prototype, 'selected'],\r\n    ];\r\n    if (propertyDescriptor && propertyDescriptor.set) {\r\n        handlers.push(...hookProperties.map((p) => hookSetter(p[0], p[1], {\r\n            set() {\r\n                eventHandler({ target: this });\r\n            },\r\n        }, false, currentWindow)));\r\n    }\r\n    return () => {\r\n        handlers.forEach((h) => h());\r\n    };\r\n}\r\nfunction getNestedCSSRulePositions(rule) {\r\n    const positions = [];\r\n    function recurse(childRule, pos) {\r\n        if ((isCSSGroupingRuleSupported &&\r\n            childRule.parentRule instanceof CSSGroupingRule) ||\r\n            (isCSSMediaRuleSupported &&\r\n                childRule.parentRule instanceof CSSMediaRule) ||\r\n            (isCSSSupportsRuleSupported &&\r\n                childRule.parentRule instanceof CSSSupportsRule) ||\r\n            (isCSSConditionRuleSupported &&\r\n                childRule.parentRule instanceof CSSConditionRule)) {\r\n            const rules = Array.from(childRule.parentRule.cssRules);\r\n            const index = rules.indexOf(childRule);\r\n            pos.unshift(index);\r\n        }\r\n        else if (childRule.parentStyleSheet) {\r\n            const rules = Array.from(childRule.parentStyleSheet.cssRules);\r\n            const index = rules.indexOf(childRule);\r\n            pos.unshift(index);\r\n        }\r\n        return pos;\r\n    }\r\n    return recurse(rule, positions);\r\n}\r\nfunction getIdAndStyleId(sheet, mirror, styleMirror) {\r\n    let id, styleId;\r\n    if (!sheet)\r\n        return {};\r\n    if (sheet.ownerNode)\r\n        id = mirror.getId(sheet.ownerNode);\r\n    else\r\n        styleId = styleMirror.getId(sheet);\r\n    return {\r\n        styleId,\r\n        id,\r\n    };\r\n}\r\nfunction initStyleSheetObserver({ styleSheetRuleCb, mirror, stylesheetManager }, { win }) {\r\n    const insertRule = win.CSSStyleSheet.prototype.insertRule;\r\n    win.CSSStyleSheet.prototype.insertRule = function (rule, index) {\r\n        const { id, styleId } = getIdAndStyleId(this, mirror, stylesheetManager.styleMirror);\r\n        if ((id && id !== -1) || (styleId && styleId !== -1)) {\r\n            styleSheetRuleCb({\r\n                id,\r\n                styleId,\r\n                adds: [{ rule, index }],\r\n            });\r\n        }\r\n        return insertRule.apply(this, [rule, index]);\r\n    };\r\n    const deleteRule = win.CSSStyleSheet.prototype.deleteRule;\r\n    win.CSSStyleSheet.prototype.deleteRule = function (index) {\r\n        const { id, styleId } = getIdAndStyleId(this, mirror, stylesheetManager.styleMirror);\r\n        if ((id && id !== -1) || (styleId && styleId !== -1)) {\r\n            styleSheetRuleCb({\r\n                id,\r\n                styleId,\r\n                removes: [{ index }],\r\n            });\r\n        }\r\n        return deleteRule.apply(this, [index]);\r\n    };\r\n    let replace;\r\n    if (win.CSSStyleSheet.prototype.replace) {\r\n        replace = win.CSSStyleSheet.prototype.replace;\r\n        win.CSSStyleSheet.prototype.replace = function (text) {\r\n            const { id, styleId } = getIdAndStyleId(this, mirror, stylesheetManager.styleMirror);\r\n            if ((id && id !== -1) || (styleId && styleId !== -1)) {\r\n                styleSheetRuleCb({\r\n                    id,\r\n                    styleId,\r\n                    replace: text,\r\n                });\r\n            }\r\n            return replace.apply(this, [text]);\r\n        };\r\n    }\r\n    let replaceSync;\r\n    if (win.CSSStyleSheet.prototype.replaceSync) {\r\n        replaceSync = win.CSSStyleSheet.prototype.replaceSync;\r\n        win.CSSStyleSheet.prototype.replaceSync = function (text) {\r\n            const { id, styleId } = getIdAndStyleId(this, mirror, stylesheetManager.styleMirror);\r\n            if ((id && id !== -1) || (styleId && styleId !== -1)) {\r\n                styleSheetRuleCb({\r\n                    id,\r\n                    styleId,\r\n                    replaceSync: text,\r\n                });\r\n            }\r\n            return replaceSync.apply(this, [text]);\r\n        };\r\n    }\r\n    const supportedNestedCSSRuleTypes = {};\r\n    if (isCSSGroupingRuleSupported) {\r\n        supportedNestedCSSRuleTypes.CSSGroupingRule = win.CSSGroupingRule;\r\n    }\r\n    else {\r\n        if (isCSSMediaRuleSupported) {\r\n            supportedNestedCSSRuleTypes.CSSMediaRule = win.CSSMediaRule;\r\n        }\r\n        if (isCSSConditionRuleSupported) {\r\n            supportedNestedCSSRuleTypes.CSSConditionRule = win.CSSConditionRule;\r\n        }\r\n        if (isCSSSupportsRuleSupported) {\r\n            supportedNestedCSSRuleTypes.CSSSupportsRule = win.CSSSupportsRule;\r\n        }\r\n    }\r\n    const unmodifiedFunctions = {};\r\n    Object.entries(supportedNestedCSSRuleTypes).forEach(([typeKey, type]) => {\r\n        unmodifiedFunctions[typeKey] = {\r\n            insertRule: type.prototype.insertRule,\r\n            deleteRule: type.prototype.deleteRule,\r\n        };\r\n        type.prototype.insertRule = function (rule, index) {\r\n            const { id, styleId } = getIdAndStyleId(this.parentStyleSheet, mirror, stylesheetManager.styleMirror);\r\n            if ((id && id !== -1) || (styleId && styleId !== -1)) {\r\n                styleSheetRuleCb({\r\n                    id,\r\n                    styleId,\r\n                    adds: [\r\n                        {\r\n                            rule,\r\n                            index: [\r\n                                ...getNestedCSSRulePositions(this),\r\n                                index || 0,\r\n                            ],\r\n                        },\r\n                    ],\r\n                });\r\n            }\r\n            return unmodifiedFunctions[typeKey].insertRule.apply(this, [rule, index]);\r\n        };\r\n        type.prototype.deleteRule = function (index) {\r\n            const { id, styleId } = getIdAndStyleId(this.parentStyleSheet, mirror, stylesheetManager.styleMirror);\r\n            if ((id && id !== -1) || (styleId && styleId !== -1)) {\r\n                styleSheetRuleCb({\r\n                    id,\r\n                    styleId,\r\n                    removes: [\r\n                        { index: [...getNestedCSSRulePositions(this), index] },\r\n                    ],\r\n                });\r\n            }\r\n            return unmodifiedFunctions[typeKey].deleteRule.apply(this, [index]);\r\n        };\r\n    });\r\n    return () => {\r\n        win.CSSStyleSheet.prototype.insertRule = insertRule;\r\n        win.CSSStyleSheet.prototype.deleteRule = deleteRule;\r\n        replace && (win.CSSStyleSheet.prototype.replace = replace);\r\n        replaceSync && (win.CSSStyleSheet.prototype.replaceSync = replaceSync);\r\n        Object.entries(supportedNestedCSSRuleTypes).forEach(([typeKey, type]) => {\r\n            type.prototype.insertRule = unmodifiedFunctions[typeKey].insertRule;\r\n            type.prototype.deleteRule = unmodifiedFunctions[typeKey].deleteRule;\r\n        });\r\n    };\r\n}\r\nfunction initAdoptedStyleSheetObserver({ mirror, stylesheetManager, }, host) {\r\n    var _a, _b, _c;\r\n    let hostId = null;\r\n    if (host.nodeName === '#document')\r\n        hostId = mirror.getId(host);\r\n    else\r\n        hostId = mirror.getId(host.host);\r\n    const patchTarget = host.nodeName === '#document'\r\n        ? (_a = host.defaultView) === null || _a === void 0 ? void 0 : _a.Document\r\n        : (_c = (_b = host.ownerDocument) === null || _b === void 0 ? void 0 : _b.defaultView) === null || _c === void 0 ? void 0 : _c.ShadowRoot;\r\n    const originalPropertyDescriptor = Object.getOwnPropertyDescriptor(patchTarget === null || patchTarget === void 0 ? void 0 : patchTarget.prototype, 'adoptedStyleSheets');\r\n    if (hostId === null ||\r\n        hostId === -1 ||\r\n        !patchTarget ||\r\n        !originalPropertyDescriptor)\r\n        return () => {\r\n        };\r\n    Object.defineProperty(host, 'adoptedStyleSheets', {\r\n        configurable: originalPropertyDescriptor.configurable,\r\n        enumerable: originalPropertyDescriptor.enumerable,\r\n        get() {\r\n            var _a;\r\n            return (_a = originalPropertyDescriptor.get) === null || _a === void 0 ? void 0 : _a.call(this);\r\n        },\r\n        set(sheets) {\r\n            var _a;\r\n            const result = (_a = originalPropertyDescriptor.set) === null || _a === void 0 ? void 0 : _a.call(this, sheets);\r\n            if (hostId !== null && hostId !== -1) {\r\n                try {\r\n                    stylesheetManager.adoptStyleSheets(sheets, hostId);\r\n                }\r\n                catch (e) {\r\n                }\r\n            }\r\n            return result;\r\n        },\r\n    });\r\n    return () => {\r\n        Object.defineProperty(host, 'adoptedStyleSheets', {\r\n            configurable: originalPropertyDescriptor.configurable,\r\n            enumerable: originalPropertyDescriptor.enumerable,\r\n            get: originalPropertyDescriptor.get,\r\n            set: originalPropertyDescriptor.set,\r\n        });\r\n    };\r\n}\r\nfunction initStyleDeclarationObserver({ styleDeclarationCb, mirror, ignoreCSSAttributes, stylesheetManager, }, { win }) {\r\n    const setProperty = win.CSSStyleDeclaration.prototype.setProperty;\r\n    win.CSSStyleDeclaration.prototype.setProperty = function (property, value, priority) {\r\n        var _a;\r\n        if (ignoreCSSAttributes.has(property)) {\r\n            return setProperty.apply(this, [property, value, priority]);\r\n        }\r\n        const { id, styleId } = getIdAndStyleId((_a = this.parentRule) === null || _a === void 0 ? void 0 : _a.parentStyleSheet, mirror, stylesheetManager.styleMirror);\r\n        if ((id && id !== -1) || (styleId && styleId !== -1)) {\r\n            styleDeclarationCb({\r\n                id,\r\n                styleId,\r\n                set: {\r\n                    property,\r\n                    value,\r\n                    priority,\r\n                },\r\n                index: getNestedCSSRulePositions(this.parentRule),\r\n            });\r\n        }\r\n        return setProperty.apply(this, [property, value, priority]);\r\n    };\r\n    const removeProperty = win.CSSStyleDeclaration.prototype.removeProperty;\r\n    win.CSSStyleDeclaration.prototype.removeProperty = function (property) {\r\n        var _a;\r\n        if (ignoreCSSAttributes.has(property)) {\r\n            return removeProperty.apply(this, [property]);\r\n        }\r\n        const { id, styleId } = getIdAndStyleId((_a = this.parentRule) === null || _a === void 0 ? void 0 : _a.parentStyleSheet, mirror, stylesheetManager.styleMirror);\r\n        if ((id && id !== -1) || (styleId && styleId !== -1)) {\r\n            styleDeclarationCb({\r\n                id,\r\n                styleId,\r\n                remove: {\r\n                    property,\r\n                },\r\n                index: getNestedCSSRulePositions(this.parentRule),\r\n            });\r\n        }\r\n        return removeProperty.apply(this, [property]);\r\n    };\r\n    return () => {\r\n        win.CSSStyleDeclaration.prototype.setProperty = setProperty;\r\n        win.CSSStyleDeclaration.prototype.removeProperty = removeProperty;\r\n    };\r\n}\r\nfunction initMediaInteractionObserver({ mediaInteractionCb, blockClass, blockSelector, mirror, sampling, }) {\r\n    const handler = (type) => throttle((event) => {\r\n        const target = getEventTarget(event);\r\n        if (!target ||\r\n            isBlocked(target, blockClass, blockSelector, true)) {\r\n            return;\r\n        }\r\n        const { currentTime, volume, muted, playbackRate, } = target;\r\n        mediaInteractionCb({\r\n            type,\r\n            id: mirror.getId(target),\r\n            currentTime,\r\n            volume,\r\n            muted,\r\n            playbackRate,\r\n        });\r\n    }, sampling.media || 500);\r\n    const handlers = [\r\n        on('play', handler(0)),\r\n        on('pause', handler(1)),\r\n        on('seeked', handler(2)),\r\n        on('volumechange', handler(3)),\r\n        on('ratechange', handler(4)),\r\n    ];\r\n    return () => {\r\n        handlers.forEach((h) => h());\r\n    };\r\n}\r\nfunction initFontObserver({ fontCb, doc }) {\r\n    const win = doc.defaultView;\r\n    if (!win) {\r\n        return () => {\r\n        };\r\n    }\r\n    const handlers = [];\r\n    const fontMap = new WeakMap();\r\n    const originalFontFace = win.FontFace;\r\n    win.FontFace = function FontFace(family, source, descriptors) {\r\n        const fontFace = new originalFontFace(family, source, descriptors);\r\n        fontMap.set(fontFace, {\r\n            family,\r\n            buffer: typeof source !== 'string',\r\n            descriptors,\r\n            fontSource: typeof source === 'string'\r\n                ? source\r\n                : JSON.stringify(Array.from(new Uint8Array(source))),\r\n        });\r\n        return fontFace;\r\n    };\r\n    const restoreHandler = patch(doc.fonts, 'add', function (original) {\r\n        return function (fontFace) {\r\n            setTimeout(() => {\r\n                const p = fontMap.get(fontFace);\r\n                if (p) {\r\n                    fontCb(p);\r\n                    fontMap.delete(fontFace);\r\n                }\r\n            }, 0);\r\n            return original.apply(this, [fontFace]);\r\n        };\r\n    });\r\n    handlers.push(() => {\r\n        win.FontFace = originalFontFace;\r\n    });\r\n    handlers.push(restoreHandler);\r\n    return () => {\r\n        handlers.forEach((h) => h());\r\n    };\r\n}\r\nfunction initSelectionObserver(param) {\r\n    const { doc, mirror, blockClass, blockSelector, selectionCb } = param;\r\n    let collapsed = true;\r\n    const updateSelection = () => {\r\n        const selection = doc.getSelection();\r\n        if (!selection || (collapsed && (selection === null || selection === void 0 ? void 0 : selection.isCollapsed)))\r\n            return;\r\n        collapsed = selection.isCollapsed || false;\r\n        const ranges = [];\r\n        const count = selection.rangeCount || 0;\r\n        for (let i = 0; i < count; i++) {\r\n            const range = selection.getRangeAt(i);\r\n            const { startContainer, startOffset, endContainer, endOffset } = range;\r\n            const blocked = isBlocked(startContainer, blockClass, blockSelector, true) ||\r\n                isBlocked(endContainer, blockClass, blockSelector, true);\r\n            if (blocked)\r\n                continue;\r\n            ranges.push({\r\n                start: mirror.getId(startContainer),\r\n                startOffset,\r\n                end: mirror.getId(endContainer),\r\n                endOffset,\r\n            });\r\n        }\r\n        selectionCb({ ranges });\r\n    };\r\n    updateSelection();\r\n    return on('selectionchange', updateSelection);\r\n}\r\nfunction mergeHooks(o, hooks) {\r\n    const { mutationCb, mousemoveCb, mouseInteractionCb, scrollCb, viewportResizeCb, inputCb, mediaInteractionCb, styleSheetRuleCb, styleDeclarationCb, canvasMutationCb, fontCb, selectionCb, } = o;\r\n    o.mutationCb = (...p) => {\r\n        if (hooks.mutation) {\r\n            hooks.mutation(...p);\r\n        }\r\n        mutationCb(...p);\r\n    };\r\n    o.mousemoveCb = (...p) => {\r\n        if (hooks.mousemove) {\r\n            hooks.mousemove(...p);\r\n        }\r\n        mousemoveCb(...p);\r\n    };\r\n    o.mouseInteractionCb = (...p) => {\r\n        if (hooks.mouseInteraction) {\r\n            hooks.mouseInteraction(...p);\r\n        }\r\n        mouseInteractionCb(...p);\r\n    };\r\n    o.scrollCb = (...p) => {\r\n        if (hooks.scroll) {\r\n            hooks.scroll(...p);\r\n        }\r\n        scrollCb(...p);\r\n    };\r\n    o.viewportResizeCb = (...p) => {\r\n        if (hooks.viewportResize) {\r\n            hooks.viewportResize(...p);\r\n        }\r\n        viewportResizeCb(...p);\r\n    };\r\n    o.inputCb = (...p) => {\r\n        if (hooks.input) {\r\n            hooks.input(...p);\r\n        }\r\n        inputCb(...p);\r\n    };\r\n    o.mediaInteractionCb = (...p) => {\r\n        if (hooks.mediaInteaction) {\r\n            hooks.mediaInteaction(...p);\r\n        }\r\n        mediaInteractionCb(...p);\r\n    };\r\n    o.styleSheetRuleCb = (...p) => {\r\n        if (hooks.styleSheetRule) {\r\n            hooks.styleSheetRule(...p);\r\n        }\r\n        styleSheetRuleCb(...p);\r\n    };\r\n    o.styleDeclarationCb = (...p) => {\r\n        if (hooks.styleDeclaration) {\r\n            hooks.styleDeclaration(...p);\r\n        }\r\n        styleDeclarationCb(...p);\r\n    };\r\n    o.canvasMutationCb = (...p) => {\r\n        if (hooks.canvasMutation) {\r\n            hooks.canvasMutation(...p);\r\n        }\r\n        canvasMutationCb(...p);\r\n    };\r\n    o.fontCb = (...p) => {\r\n        if (hooks.font) {\r\n            hooks.font(...p);\r\n        }\r\n        fontCb(...p);\r\n    };\r\n    o.selectionCb = (...p) => {\r\n        if (hooks.selection) {\r\n            hooks.selection(...p);\r\n        }\r\n        selectionCb(...p);\r\n    };\r\n}\r\nfunction initObservers(o, hooks = {}) {\r\n    const currentWindow = o.doc.defaultView;\r\n    if (!currentWindow) {\r\n        return () => {\r\n        };\r\n    }\r\n    mergeHooks(o, hooks);\r\n    const mutationObserver = initMutationObserver(o, o.doc);\r\n    const mousemoveHandler = initMoveObserver(o);\r\n    const mouseInteractionHandler = initMouseInteractionObserver(o);\r\n    const scrollHandler = initScrollObserver(o);\r\n    const viewportResizeHandler = initViewportResizeObserver(o);\r\n    const inputHandler = initInputObserver(o);\r\n    const mediaInteractionHandler = initMediaInteractionObserver(o);\r\n    const styleSheetObserver = initStyleSheetObserver(o, { win: currentWindow });\r\n    const adoptedStyleSheetObserver = initAdoptedStyleSheetObserver(o, o.doc);\r\n    const styleDeclarationObserver = initStyleDeclarationObserver(o, {\r\n        win: currentWindow,\r\n    });\r\n    const fontObserver = o.collectFonts\r\n        ? initFontObserver(o)\r\n        : () => {\r\n        };\r\n    const selectionObserver = initSelectionObserver(o);\r\n    const pluginHandlers = [];\r\n    for (const plugin of o.plugins) {\r\n        pluginHandlers.push(plugin.observer(plugin.callback, currentWindow, plugin.options));\r\n    }\r\n    return () => {\r\n        mutationBuffers.forEach((b) => b.reset());\r\n        mutationObserver.disconnect();\r\n        mousemoveHandler();\r\n        mouseInteractionHandler();\r\n        scrollHandler();\r\n        viewportResizeHandler();\r\n        inputHandler();\r\n        mediaInteractionHandler();\r\n        styleSheetObserver();\r\n        adoptedStyleSheetObserver();\r\n        styleDeclarationObserver();\r\n        fontObserver();\r\n        selectionObserver();\r\n        pluginHandlers.forEach((h) => h());\r\n    };\r\n}\n\nexport { INPUT_TAGS, initAdoptedStyleSheetObserver, initMutationObserver, initObservers, initScrollObserver, mutationBuffers };\n","class CrossOriginIframeMirror {\r\n    constructor(generateIdFn) {\r\n        this.generateIdFn = generateIdFn;\r\n        this.iframeIdToRemoteIdMap = new WeakMap();\r\n        this.iframeRemoteIdToIdMap = new WeakMap();\r\n    }\r\n    getId(iframe, remoteId, idToRemoteMap, remoteToIdMap) {\r\n        const idToRemoteIdMap = idToRemoteMap || this.getIdToRemoteIdMap(iframe);\r\n        const remoteIdToIdMap = remoteToIdMap || this.getRemoteIdToIdMap(iframe);\r\n        let id = idToRemoteIdMap.get(remoteId);\r\n        if (!id) {\r\n            id = this.generateIdFn();\r\n            idToRemoteIdMap.set(remoteId, id);\r\n            remoteIdToIdMap.set(id, remoteId);\r\n        }\r\n        return id;\r\n    }\r\n    getIds(iframe, remoteId) {\r\n        const idToRemoteIdMap = this.getIdToRemoteIdMap(iframe);\r\n        const remoteIdToIdMap = this.getRemoteIdToIdMap(iframe);\r\n        return remoteId.map((id) => this.getId(iframe, id, idToRemoteIdMap, remoteIdToIdMap));\r\n    }\r\n    getRemoteId(iframe, id, map) {\r\n        const remoteIdToIdMap = map || this.getRemoteIdToIdMap(iframe);\r\n        if (typeof id !== 'number')\r\n            return id;\r\n        const remoteId = remoteIdToIdMap.get(id);\r\n        if (!remoteId)\r\n            return -1;\r\n        return remoteId;\r\n    }\r\n    getRemoteIds(iframe, ids) {\r\n        const remoteIdToIdMap = this.getRemoteIdToIdMap(iframe);\r\n        return ids.map((id) => this.getRemoteId(iframe, id, remoteIdToIdMap));\r\n    }\r\n    reset(iframe) {\r\n        if (!iframe) {\r\n            this.iframeIdToRemoteIdMap = new WeakMap();\r\n            this.iframeRemoteIdToIdMap = new WeakMap();\r\n            return;\r\n        }\r\n        this.iframeIdToRemoteIdMap.delete(iframe);\r\n        this.iframeRemoteIdToIdMap.delete(iframe);\r\n    }\r\n    getIdToRemoteIdMap(iframe) {\r\n        let idToRemoteIdMap = this.iframeIdToRemoteIdMap.get(iframe);\r\n        if (!idToRemoteIdMap) {\r\n            idToRemoteIdMap = new Map();\r\n            this.iframeIdToRemoteIdMap.set(iframe, idToRemoteIdMap);\r\n        }\r\n        return idToRemoteIdMap;\r\n    }\r\n    getRemoteIdToIdMap(iframe) {\r\n        let remoteIdToIdMap = this.iframeRemoteIdToIdMap.get(iframe);\r\n        if (!remoteIdToIdMap) {\r\n            remoteIdToIdMap = new Map();\r\n            this.iframeRemoteIdToIdMap.set(iframe, remoteIdToIdMap);\r\n        }\r\n        return remoteIdToIdMap;\r\n    }\r\n}\n\nexport { CrossOriginIframeMirror as default };\n","import { genId } from '../../../rrweb-snapshot/es/rrweb-snapshot.js';\nimport CrossOriginIframeMirror from './cross-origin-iframe-mirror.js';\nimport { EventType, IncrementalSource } from '../../../types/dist/types.js';\n\nclass IframeManager {\r\n    constructor(options) {\r\n        this.iframes = new WeakMap();\r\n        this.crossOriginIframeMap = new WeakMap();\r\n        this.crossOriginIframeMirror = new CrossOriginIframeMirror(genId);\r\n        this.mutationCb = options.mutationCb;\r\n        this.wrappedEmit = options.wrappedEmit;\r\n        this.stylesheetManager = options.stylesheetManager;\r\n        this.recordCrossOriginIframes = options.recordCrossOriginIframes;\r\n        this.crossOriginIframeStyleMirror = new CrossOriginIframeMirror(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror));\r\n        this.mirror = options.mirror;\r\n        if (this.recordCrossOriginIframes) {\r\n            window.addEventListener('message', this.handleMessage.bind(this));\r\n        }\r\n    }\r\n    addIframe(iframeEl) {\r\n        this.iframes.set(iframeEl, true);\r\n        if (iframeEl.contentWindow)\r\n            this.crossOriginIframeMap.set(iframeEl.contentWindow, iframeEl);\r\n    }\r\n    addLoadListener(cb) {\r\n        this.loadListener = cb;\r\n    }\r\n    attachIframe(iframeEl, childSn) {\r\n        var _a;\r\n        this.mutationCb({\r\n            adds: [\r\n                {\r\n                    parentId: this.mirror.getId(iframeEl),\r\n                    nextId: null,\r\n                    node: childSn,\r\n                },\r\n            ],\r\n            removes: [],\r\n            texts: [],\r\n            attributes: [],\r\n            isAttachIframe: true,\r\n        });\r\n        (_a = this.loadListener) === null || _a === void 0 ? void 0 : _a.call(this, iframeEl);\r\n        if (iframeEl.contentDocument &&\r\n            iframeEl.contentDocument.adoptedStyleSheets &&\r\n            iframeEl.contentDocument.adoptedStyleSheets.length > 0)\r\n            this.stylesheetManager.adoptStyleSheets(iframeEl.contentDocument.adoptedStyleSheets, this.mirror.getId(iframeEl.contentDocument));\r\n    }\r\n    handleMessage(message) {\r\n        if (message.data.type === 'rrweb') {\r\n            const iframeSourceWindow = message.source;\r\n            if (!iframeSourceWindow)\r\n                return;\r\n            const iframeEl = this.crossOriginIframeMap.get(message.source);\r\n            if (!iframeEl)\r\n                return;\r\n            const transformedEvent = this.transformCrossOriginEvent(iframeEl, message.data.event);\r\n            if (transformedEvent)\r\n                this.wrappedEmit(transformedEvent, message.data.isCheckout);\r\n        }\r\n    }\r\n    transformCrossOriginEvent(iframeEl, e) {\r\n        var _a;\r\n        switch (e.type) {\r\n            case EventType.FullSnapshot: {\r\n                this.crossOriginIframeMirror.reset(iframeEl);\r\n                this.crossOriginIframeStyleMirror.reset(iframeEl);\r\n                this.replaceIdOnNode(e.data.node, iframeEl);\r\n                return {\r\n                    timestamp: e.timestamp,\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: {\r\n                        source: IncrementalSource.Mutation,\r\n                        adds: [\r\n                            {\r\n                                parentId: this.mirror.getId(iframeEl),\r\n                                nextId: null,\r\n                                node: e.data.node,\r\n                            },\r\n                        ],\r\n                        removes: [],\r\n                        texts: [],\r\n                        attributes: [],\r\n                        isAttachIframe: true,\r\n                    },\r\n                };\r\n            }\r\n            case EventType.Meta:\r\n            case EventType.Load:\r\n            case EventType.DomContentLoaded: {\r\n                return false;\r\n            }\r\n            case EventType.Plugin: {\r\n                return e;\r\n            }\r\n            case EventType.Custom: {\r\n                this.replaceIds(e.data.payload, iframeEl, ['id', 'parentId', 'previousId', 'nextId']);\r\n                return e;\r\n            }\r\n            case EventType.IncrementalSnapshot: {\r\n                switch (e.data.source) {\r\n                    case IncrementalSource.Mutation: {\r\n                        e.data.adds.forEach((n) => {\r\n                            this.replaceIds(n, iframeEl, [\r\n                                'parentId',\r\n                                'nextId',\r\n                                'previousId',\r\n                            ]);\r\n                            this.replaceIdOnNode(n.node, iframeEl);\r\n                        });\r\n                        e.data.removes.forEach((n) => {\r\n                            this.replaceIds(n, iframeEl, ['parentId', 'id']);\r\n                        });\r\n                        e.data.attributes.forEach((n) => {\r\n                            this.replaceIds(n, iframeEl, ['id']);\r\n                        });\r\n                        e.data.texts.forEach((n) => {\r\n                            this.replaceIds(n, iframeEl, ['id']);\r\n                        });\r\n                        return e;\r\n                    }\r\n                    case IncrementalSource.Drag:\r\n                    case IncrementalSource.TouchMove:\r\n                    case IncrementalSource.MouseMove: {\r\n                        e.data.positions.forEach((p) => {\r\n                            this.replaceIds(p, iframeEl, ['id']);\r\n                        });\r\n                        return e;\r\n                    }\r\n                    case IncrementalSource.ViewportResize: {\r\n                        return false;\r\n                    }\r\n                    case IncrementalSource.MediaInteraction:\r\n                    case IncrementalSource.MouseInteraction:\r\n                    case IncrementalSource.Scroll:\r\n                    case IncrementalSource.CanvasMutation:\r\n                    case IncrementalSource.Input: {\r\n                        this.replaceIds(e.data, iframeEl, ['id']);\r\n                        return e;\r\n                    }\r\n                    case IncrementalSource.StyleSheetRule:\r\n                    case IncrementalSource.StyleDeclaration: {\r\n                        this.replaceIds(e.data, iframeEl, ['id']);\r\n                        this.replaceStyleIds(e.data, iframeEl, ['styleId']);\r\n                        return e;\r\n                    }\r\n                    case IncrementalSource.Font: {\r\n                        return e;\r\n                    }\r\n                    case IncrementalSource.Selection: {\r\n                        e.data.ranges.forEach((range) => {\r\n                            this.replaceIds(range, iframeEl, ['start', 'end']);\r\n                        });\r\n                        return e;\r\n                    }\r\n                    case IncrementalSource.AdoptedStyleSheet: {\r\n                        this.replaceIds(e.data, iframeEl, ['id']);\r\n                        this.replaceStyleIds(e.data, iframeEl, ['styleIds']);\r\n                        (_a = e.data.styles) === null || _a === void 0 ? void 0 : _a.forEach((style) => {\r\n                            this.replaceStyleIds(style, iframeEl, ['styleId']);\r\n                        });\r\n                        return e;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    replace(iframeMirror, obj, iframeEl, keys) {\r\n        for (const key of keys) {\r\n            if (!Array.isArray(obj[key]) && typeof obj[key] !== 'number')\r\n                continue;\r\n            if (Array.isArray(obj[key])) {\r\n                obj[key] = iframeMirror.getIds(iframeEl, obj[key]);\r\n            }\r\n            else {\r\n                obj[key] = iframeMirror.getId(iframeEl, obj[key]);\r\n            }\r\n        }\r\n        return obj;\r\n    }\r\n    replaceIds(obj, iframeEl, keys) {\r\n        return this.replace(this.crossOriginIframeMirror, obj, iframeEl, keys);\r\n    }\r\n    replaceStyleIds(obj, iframeEl, keys) {\r\n        return this.replace(this.crossOriginIframeStyleMirror, obj, iframeEl, keys);\r\n    }\r\n    replaceIdOnNode(node, iframeEl) {\r\n        this.replaceIds(node, iframeEl, ['id']);\r\n        if ('childNodes' in node) {\r\n            node.childNodes.forEach((child) => {\r\n                this.replaceIdOnNode(child, iframeEl);\r\n            });\r\n        }\r\n    }\r\n}\n\nexport { IframeManager };\n","import { initMutationObserver, initScrollObserver, initAdoptedStyleSheetObserver } from './observer.js';\nimport { patch } from '../utils.js';\nimport { isNativeShadowDom } from '../../../rrweb-snapshot/es/rrweb-snapshot.js';\n\nclass ShadowDomManager {\r\n    constructor(options) {\r\n        this.shadowDoms = new WeakSet();\r\n        this.restorePatches = [];\r\n        this.mutationCb = options.mutationCb;\r\n        this.scrollCb = options.scrollCb;\r\n        this.bypassOptions = options.bypassOptions;\r\n        this.mirror = options.mirror;\r\n        const manager = this;\r\n        this.restorePatches.push(patch(Element.prototype, 'attachShadow', function (original) {\r\n            return function (option) {\r\n                const shadowRoot = original.call(this, option);\r\n                if (this.shadowRoot)\r\n                    manager.addShadowRoot(this.shadowRoot, this.ownerDocument);\r\n                return shadowRoot;\r\n            };\r\n        }));\r\n    }\r\n    addShadowRoot(shadowRoot, doc) {\r\n        if (!isNativeShadowDom(shadowRoot))\r\n            return;\r\n        if (this.shadowDoms.has(shadowRoot))\r\n            return;\r\n        this.shadowDoms.add(shadowRoot);\r\n        initMutationObserver(Object.assign(Object.assign({}, this.bypassOptions), { doc, mutationCb: this.mutationCb, mirror: this.mirror, shadowDomManager: this }), shadowRoot);\r\n        initScrollObserver(Object.assign(Object.assign({}, this.bypassOptions), { scrollCb: this.scrollCb, doc: shadowRoot, mirror: this.mirror }));\r\n        setTimeout(() => {\r\n            if (shadowRoot.adoptedStyleSheets &&\r\n                shadowRoot.adoptedStyleSheets.length > 0)\r\n                this.bypassOptions.stylesheetManager.adoptStyleSheets(shadowRoot.adoptedStyleSheets, this.mirror.getId(shadowRoot.host));\r\n            initAdoptedStyleSheetObserver({\r\n                mirror: this.mirror,\r\n                stylesheetManager: this.bypassOptions.stylesheetManager,\r\n            }, shadowRoot);\r\n        }, 0);\r\n    }\r\n    observeAttachShadow(iframeElement) {\r\n        if (iframeElement.contentWindow) {\r\n            const manager = this;\r\n            this.restorePatches.push(patch(iframeElement.contentWindow.HTMLElement.prototype, 'attachShadow', function (original) {\r\n                return function (option) {\r\n                    const shadowRoot = original.call(this, option);\r\n                    if (this.shadowRoot)\r\n                        manager.addShadowRoot(this.shadowRoot, iframeElement.contentDocument);\r\n                    return shadowRoot;\r\n                };\r\n            }));\r\n        }\r\n    }\r\n    reset() {\r\n        this.restorePatches.forEach((restorePatch) => restorePatch());\r\n        this.shadowDoms = new WeakSet();\r\n    }\r\n}\n\nexport { ShadowDomManager };\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\n\nexport { __awaiter, __rest };\n","/*\n * base64-arraybuffer 1.0.1 <https://github.com/niklasvh/base64-arraybuffer>\n * Copyright (c) 2021 Niklas von Hertzen <https://hertzen.com>\n * Released under MIT License\n */\nvar chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n// Use a lookup table to find the index.\nvar lookup = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\nfor (var i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n}\nvar encode = function (arraybuffer) {\n    var bytes = new Uint8Array(arraybuffer), i, len = bytes.length, base64 = '';\n    for (i = 0; i < len; i += 3) {\n        base64 += chars[bytes[i] >> 2];\n        base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n        base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n        base64 += chars[bytes[i + 2] & 63];\n    }\n    if (len % 3 === 2) {\n        base64 = base64.substring(0, base64.length - 1) + '=';\n    }\n    else if (len % 3 === 1) {\n        base64 = base64.substring(0, base64.length - 2) + '==';\n    }\n    return base64;\n};\nvar decode = function (base64) {\n    var bufferLength = base64.length * 0.75, len = base64.length, i, p = 0, encoded1, encoded2, encoded3, encoded4;\n    if (base64[base64.length - 1] === '=') {\n        bufferLength--;\n        if (base64[base64.length - 2] === '=') {\n            bufferLength--;\n        }\n    }\n    var arraybuffer = new ArrayBuffer(bufferLength), bytes = new Uint8Array(arraybuffer);\n    for (i = 0; i < len; i += 4) {\n        encoded1 = lookup[base64.charCodeAt(i)];\n        encoded2 = lookup[base64.charCodeAt(i + 1)];\n        encoded3 = lookup[base64.charCodeAt(i + 2)];\n        encoded4 = lookup[base64.charCodeAt(i + 3)];\n        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n        bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n    return arraybuffer;\n};\n\nexport { decode, encode };\n","import { encode } from './../../../../../../ext/base64-arraybuffer/dist/base64-arraybuffer.es5.js';\n\nconst canvasVarMap = new Map();\r\nfunction variableListFor(ctx, ctor) {\r\n    let contextMap = canvasVarMap.get(ctx);\r\n    if (!contextMap) {\r\n        contextMap = new Map();\r\n        canvasVarMap.set(ctx, contextMap);\r\n    }\r\n    if (!contextMap.has(ctor)) {\r\n        contextMap.set(ctor, []);\r\n    }\r\n    return contextMap.get(ctor);\r\n}\r\nconst saveWebGLVar = (value, win, ctx) => {\r\n    if (!value ||\r\n        !(isInstanceOfWebGLObject(value, win) || typeof value === 'object'))\r\n        return;\r\n    const name = value.constructor.name;\r\n    const list = variableListFor(ctx, name);\r\n    let index = list.indexOf(value);\r\n    if (index === -1) {\r\n        index = list.length;\r\n        list.push(value);\r\n    }\r\n    return index;\r\n};\r\nfunction serializeArg(value, win, ctx) {\r\n    if (value instanceof Array) {\r\n        return value.map((arg) => serializeArg(arg, win, ctx));\r\n    }\r\n    else if (value === null) {\r\n        return value;\r\n    }\r\n    else if (value instanceof Float32Array ||\r\n        value instanceof Float64Array ||\r\n        value instanceof Int32Array ||\r\n        value instanceof Uint32Array ||\r\n        value instanceof Uint8Array ||\r\n        value instanceof Uint16Array ||\r\n        value instanceof Int16Array ||\r\n        value instanceof Int8Array ||\r\n        value instanceof Uint8ClampedArray) {\r\n        const name = value.constructor.name;\r\n        return {\r\n            rr_type: name,\r\n            args: [Object.values(value)],\r\n        };\r\n    }\r\n    else if (value instanceof ArrayBuffer) {\r\n        const name = value.constructor.name;\r\n        const base64 = encode(value);\r\n        return {\r\n            rr_type: name,\r\n            base64,\r\n        };\r\n    }\r\n    else if (value instanceof DataView) {\r\n        const name = value.constructor.name;\r\n        return {\r\n            rr_type: name,\r\n            args: [\r\n                serializeArg(value.buffer, win, ctx),\r\n                value.byteOffset,\r\n                value.byteLength,\r\n            ],\r\n        };\r\n    }\r\n    else if (value instanceof HTMLImageElement) {\r\n        const name = value.constructor.name;\r\n        const { src } = value;\r\n        return {\r\n            rr_type: name,\r\n            src,\r\n        };\r\n    }\r\n    else if (value instanceof HTMLCanvasElement) {\r\n        const name = 'HTMLImageElement';\r\n        const src = value.toDataURL();\r\n        return {\r\n            rr_type: name,\r\n            src,\r\n        };\r\n    }\r\n    else if (value instanceof ImageData) {\r\n        const name = value.constructor.name;\r\n        return {\r\n            rr_type: name,\r\n            args: [serializeArg(value.data, win, ctx), value.width, value.height],\r\n        };\r\n    }\r\n    else if (isInstanceOfWebGLObject(value, win) || typeof value === 'object') {\r\n        const name = value.constructor.name;\r\n        const index = saveWebGLVar(value, win, ctx);\r\n        return {\r\n            rr_type: name,\r\n            index: index,\r\n        };\r\n    }\r\n    return value;\r\n}\r\nconst serializeArgs = (args, win, ctx) => {\r\n    return [...args].map((arg) => serializeArg(arg, win, ctx));\r\n};\r\nconst isInstanceOfWebGLObject = (value, win) => {\r\n    const webGLConstructorNames = [\r\n        'WebGLActiveInfo',\r\n        'WebGLBuffer',\r\n        'WebGLFramebuffer',\r\n        'WebGLProgram',\r\n        'WebGLRenderbuffer',\r\n        'WebGLShader',\r\n        'WebGLShaderPrecisionFormat',\r\n        'WebGLTexture',\r\n        'WebGLUniformLocation',\r\n        'WebGLVertexArrayObject',\r\n        'WebGLVertexArrayObjectOES',\r\n    ];\r\n    const supportedWebGLConstructorNames = webGLConstructorNames.filter((name) => typeof win[name] === 'function');\r\n    return Boolean(supportedWebGLConstructorNames.find((name) => value instanceof win[name]));\r\n};\n\nexport { isInstanceOfWebGLObject, saveWebGLVar, serializeArg, serializeArgs, variableListFor };\n","import { patch, isBlocked } from '../../../utils.js';\n\nfunction initCanvasContextObserver(win, blockClass, blockSelector) {\r\n    const handlers = [];\r\n    try {\r\n        const restoreHandler = patch(win.HTMLCanvasElement.prototype, 'getContext', function (original) {\r\n            return function (contextType, ...args) {\r\n                if (!isBlocked(this, blockClass, blockSelector, true)) {\r\n                    if (!('__context' in this))\r\n                        this.__context = contextType;\r\n                }\r\n                return original.apply(this, [contextType, ...args]);\r\n            };\r\n        });\r\n        handlers.push(restoreHandler);\r\n    }\r\n    catch (_a) {\r\n        console.error('failed to patch HTMLCanvasElement.prototype.getContext');\r\n    }\r\n    return () => {\r\n        handlers.forEach((h) => h());\r\n    };\r\n}\n\nexport { initCanvasContextObserver as default };\n","import { CanvasContext } from '../../../../../types/dist/types.js';\nimport { patch, isBlocked, hookSetter } from '../../../utils.js';\nimport { saveWebGLVar, serializeArgs } from './serialize-args.js';\n\nfunction patchGLPrototype(prototype, type, cb, blockClass, blockSelector, mirror, win) {\r\n    const handlers = [];\r\n    const props = Object.getOwnPropertyNames(prototype);\r\n    for (const prop of props) {\r\n        if ([\r\n            'isContextLost',\r\n            'canvas',\r\n            'drawingBufferWidth',\r\n            'drawingBufferHeight',\r\n        ].includes(prop)) {\r\n            continue;\r\n        }\r\n        try {\r\n            if (typeof prototype[prop] !== 'function') {\r\n                continue;\r\n            }\r\n            const restoreHandler = patch(prototype, prop, function (original) {\r\n                return function (...args) {\r\n                    const result = original.apply(this, args);\r\n                    saveWebGLVar(result, win, this);\r\n                    if (!isBlocked(this.canvas, blockClass, blockSelector, true)) {\r\n                        const recordArgs = serializeArgs([...args], win, this);\r\n                        const mutation = {\r\n                            type,\r\n                            property: prop,\r\n                            args: recordArgs,\r\n                        };\r\n                        cb(this.canvas, mutation);\r\n                    }\r\n                    return result;\r\n                };\r\n            });\r\n            handlers.push(restoreHandler);\r\n        }\r\n        catch (_a) {\r\n            const hookHandler = hookSetter(prototype, prop, {\r\n                set(v) {\r\n                    cb(this.canvas, {\r\n                        type,\r\n                        property: prop,\r\n                        args: [v],\r\n                        setter: true,\r\n                    });\r\n                },\r\n            });\r\n            handlers.push(hookHandler);\r\n        }\r\n    }\r\n    return handlers;\r\n}\r\nfunction initCanvasWebGLMutationObserver(cb, win, blockClass, blockSelector, mirror) {\r\n    const handlers = [];\r\n    handlers.push(...patchGLPrototype(win.WebGLRenderingContext.prototype, CanvasContext.WebGL, cb, blockClass, blockSelector, mirror, win));\r\n    if (typeof win.WebGL2RenderingContext !== 'undefined') {\r\n        handlers.push(...patchGLPrototype(win.WebGL2RenderingContext.prototype, CanvasContext.WebGL2, cb, blockClass, blockSelector, mirror, win));\r\n    }\r\n    return () => {\r\n        handlers.forEach((h) => h());\r\n    };\r\n}\n\nexport { initCanvasWebGLMutationObserver as default };\n","function decodeBase64(base64, enableUnicode) {\n    var binaryString = atob(base64);\n    if (enableUnicode) {\n        var binaryView = new Uint8Array(binaryString.length);\n        for (var i = 0, n = binaryString.length; i < n; ++i) {\n            binaryView[i] = binaryString.charCodeAt(i);\n        }\n        return String.fromCharCode.apply(null, new Uint16Array(binaryView.buffer));\n    }\n    return binaryString;\n}\n\nfunction createURL(base64, sourcemapArg, enableUnicodeArg) {\n    var sourcemap = sourcemapArg === undefined ? null : sourcemapArg;\n    var enableUnicode = enableUnicodeArg === undefined ? false : enableUnicodeArg;\n    var source = decodeBase64(base64, enableUnicode);\n    var start = source.indexOf('\\n', 10) + 1;\n    var body = source.substring(start) + (sourcemap ? '\\/\\/# sourceMappingURL=' + sourcemap : '');\n    var blob = new Blob([body], { type: 'application/javascript' });\n    return URL.createObjectURL(blob);\n}\n\nfunction createBase64WorkerFactory(base64, sourcemapArg, enableUnicodeArg) {\n    var url;\n    return function WorkerFactory(options) {\n        url = url || createURL(base64, sourcemapArg, enableUnicodeArg);\n        return new Worker(url, options);\n    };\n}\n\nexport { createBase64WorkerFactory };\n","import { createBase64WorkerFactory } from './_rollup-plugin-web-worker-loader__helper__auto__createBase64WorkerFactory.js';\n\nvar WorkerFactory = createBase64WorkerFactory('Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICAgJ3VzZSBzdHJpY3QnOwoKICAgIC8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KICAgIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLg0KDQogICAgUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55DQogICAgcHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLg0KDQogICAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEgNCiAgICBSRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkNCiAgICBBTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsDQogICAgSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NDQogICAgTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1INCiAgICBPVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SDQogICAgUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS4NCiAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqLw0KDQogICAgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikgew0KICAgICAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH0NCiAgICAgICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7DQogICAgICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvclsidGhyb3ciXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfQ0KICAgICAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpOw0KICAgICAgICB9KTsNCiAgICB9CgogICAgLyoKICAgICAqIGJhc2U2NC1hcnJheWJ1ZmZlciAxLjAuMSA8aHR0cHM6Ly9naXRodWIuY29tL25pa2xhc3ZoL2Jhc2U2NC1hcnJheWJ1ZmZlcj4KICAgICAqIENvcHlyaWdodCAoYykgMjAyMSBOaWtsYXMgdm9uIEhlcnR6ZW4gPGh0dHBzOi8vaGVydHplbi5jb20+CiAgICAgKiBSZWxlYXNlZCB1bmRlciBNSVQgTGljZW5zZQogICAgICovCiAgICB2YXIgY2hhcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyc7CiAgICAvLyBVc2UgYSBsb29rdXAgdGFibGUgdG8gZmluZCB0aGUgaW5kZXguCiAgICB2YXIgbG9va3VwID0gdHlwZW9mIFVpbnQ4QXJyYXkgPT09ICd1bmRlZmluZWQnID8gW10gOiBuZXcgVWludDhBcnJheSgyNTYpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGFycy5sZW5ndGg7IGkrKykgewogICAgICAgIGxvb2t1cFtjaGFycy5jaGFyQ29kZUF0KGkpXSA9IGk7CiAgICB9CiAgICB2YXIgZW5jb2RlID0gZnVuY3Rpb24gKGFycmF5YnVmZmVyKSB7CiAgICAgICAgdmFyIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlidWZmZXIpLCBpLCBsZW4gPSBieXRlcy5sZW5ndGgsIGJhc2U2NCA9ICcnOwogICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkgKz0gMykgewogICAgICAgICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaV0gPj4gMl07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1soKGJ5dGVzW2ldICYgMykgPDwgNCkgfCAoYnl0ZXNbaSArIDFdID4+IDQpXTsKICAgICAgICAgICAgYmFzZTY0ICs9IGNoYXJzWygoYnl0ZXNbaSArIDFdICYgMTUpIDw8IDIpIHwgKGJ5dGVzW2kgKyAyXSA+PiA2KV07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1tieXRlc1tpICsgMl0gJiA2M107CiAgICAgICAgfQogICAgICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgJz0nOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgJz09JzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGJhc2U2NDsKICAgIH07CgogICAgY29uc3QgbGFzdEJsb2JNYXAgPSBuZXcgTWFwKCk7DQogICAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gbmV3IE1hcCgpOw0KICAgIGZ1bmN0aW9uIGdldFRyYW5zcGFyZW50QmxvYkZvcih3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucykgew0KICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgew0KICAgICAgICAgICAgY29uc3QgaWQgPSBgJHt3aWR0aH0tJHtoZWlnaHR9YDsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgaWYgKHRyYW5zcGFyZW50QmxvYk1hcC5oYXMoaWQpKQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNwYXJlbnRCbG9iTWFwLmdldChpZCk7DQogICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsNCiAgICAgICAgICAgICAgICBvZmZzY3JlZW4uZ2V0Q29udGV4dCgnMmQnKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0geWllbGQgYmxvYi5hcnJheUJ1ZmZlcigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7DQogICAgICAgICAgICAgICAgdHJhbnNwYXJlbnRCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICByZXR1cm4gYmFzZTY0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9DQogICAgY29uc3Qgd29ya2VyID0gc2VsZjsNCiAgICB3b3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgY29uc3QgeyBpZCwgYml0bWFwLCB3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucyB9ID0gZS5kYXRhOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zKTsNCiAgICAgICAgICAgICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IG9mZnNjcmVlbi5nZXRDb250ZXh0KCcyZCcpOw0KICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoYml0bWFwLCAwLCAwKTsNCiAgICAgICAgICAgICAgICBiaXRtYXAuY2xvc2UoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBibG9iLnR5cGU7DQogICAgICAgICAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSB5aWVsZCBibG9iLmFycmF5QnVmZmVyKCk7DQogICAgICAgICAgICAgICAgY29uc3QgYmFzZTY0ID0gZW5jb2RlKGFycmF5QnVmZmVyKTsNCiAgICAgICAgICAgICAgICBpZiAoIWxhc3RCbG9iTWFwLmhhcyhpZCkgJiYgKHlpZWxkIHRyYW5zcGFyZW50QmFzZTY0KSA9PT0gYmFzZTY0KSB7DQogICAgICAgICAgICAgICAgICAgIGxhc3RCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7DQogICAgICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHsNCiAgICAgICAgICAgICAgICAgICAgaWQsDQogICAgICAgICAgICAgICAgICAgIHR5cGUsDQogICAgICAgICAgICAgICAgICAgIGJhc2U2NCwNCiAgICAgICAgICAgICAgICAgICAgd2lkdGgsDQogICAgICAgICAgICAgICAgICAgIGhlaWdodCwNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfTsKCn0pKCk7Cgo=', null, false);\n/* eslint-enable */\n\nexport { WorkerFactory as default };\n","import { createBase64WorkerFactory as createBase64WorkerFactory$1 } from './_rollup-plugin-web-worker-loader__helper__node__createBase64WorkerFactory.js';\nimport { createBase64WorkerFactory as createBase64WorkerFactory$2 } from './_rollup-plugin-web-worker-loader__helper__browser__createBase64WorkerFactory.js';\nimport { isNodeJS } from './_rollup-plugin-web-worker-loader__helper__auto__isNodeJS.js';\n\nfunction createBase64WorkerFactory(base64, sourcemapArg, enableUnicodeArg) {\n    if (isNodeJS()) {\n        return createBase64WorkerFactory$1(base64, sourcemapArg, enableUnicodeArg);\n    }\n    return createBase64WorkerFactory$2(base64, sourcemapArg, enableUnicodeArg);\n}\n\nexport { createBase64WorkerFactory };\n","import { __rest, __awaiter } from './../../../../../../ext/tslib/tslib.es6.js';\nimport { isBlocked } from '../../../utils.js';\nimport { CanvasContext } from '../../../../../types/dist/types.js';\nimport initCanvas2DMutationObserver from './2d.js';\nimport initCanvasContextObserver from './canvas.js';\nimport initCanvasWebGLMutationObserver from './webgl.js';\nimport WorkerFactory from '../../../../../../_virtual/image-bitmap-data-url-worker.js';\n\nclass CanvasManager {\r\n    constructor(options) {\r\n        this.pendingCanvasMutations = new Map();\r\n        this.rafStamps = { latestId: 0, invokeId: null };\r\n        this.frozen = false;\r\n        this.locked = false;\r\n        this.processMutation = (target, mutation) => {\r\n            const newFrame = this.rafStamps.invokeId &&\r\n                this.rafStamps.latestId !== this.rafStamps.invokeId;\r\n            if (newFrame || !this.rafStamps.invokeId)\r\n                this.rafStamps.invokeId = this.rafStamps.latestId;\r\n            if (!this.pendingCanvasMutations.has(target)) {\r\n                this.pendingCanvasMutations.set(target, []);\r\n            }\r\n            this.pendingCanvasMutations.get(target).push(mutation);\r\n        };\r\n        const { sampling = 'all', win, blockClass, blockSelector, recordCanvas, dataURLOptions, } = options;\r\n        this.mutationCb = options.mutationCb;\r\n        this.mirror = options.mirror;\r\n        if (recordCanvas && sampling === 'all')\r\n            this.initCanvasMutationObserver(win, blockClass, blockSelector);\r\n        if (recordCanvas && typeof sampling === 'number')\r\n            this.initCanvasFPSObserver(sampling, win, blockClass, blockSelector, {\r\n                dataURLOptions,\r\n            });\r\n    }\r\n    reset() {\r\n        this.pendingCanvasMutations.clear();\r\n        this.resetObservers && this.resetObservers();\r\n    }\r\n    freeze() {\r\n        this.frozen = true;\r\n    }\r\n    unfreeze() {\r\n        this.frozen = false;\r\n    }\r\n    lock() {\r\n        this.locked = true;\r\n    }\r\n    unlock() {\r\n        this.locked = false;\r\n    }\r\n    initCanvasFPSObserver(fps, win, blockClass, blockSelector, options) {\r\n        const canvasContextReset = initCanvasContextObserver(win, blockClass, blockSelector);\r\n        const snapshotInProgressMap = new Map();\r\n        const worker = new WorkerFactory();\r\n        worker.onmessage = (e) => {\r\n            const { id } = e.data;\r\n            snapshotInProgressMap.set(id, false);\r\n            if (!('base64' in e.data))\r\n                return;\r\n            const { base64, type, width, height } = e.data;\r\n            this.mutationCb({\r\n                id,\r\n                type: CanvasContext['2D'],\r\n                commands: [\r\n                    {\r\n                        property: 'clearRect',\r\n                        args: [0, 0, width, height],\r\n                    },\r\n                    {\r\n                        property: 'drawImage',\r\n                        args: [\r\n                            {\r\n                                rr_type: 'ImageBitmap',\r\n                                args: [\r\n                                    {\r\n                                        rr_type: 'Blob',\r\n                                        data: [{ rr_type: 'ArrayBuffer', base64 }],\r\n                                        type,\r\n                                    },\r\n                                ],\r\n                            },\r\n                            0,\r\n                            0,\r\n                        ],\r\n                    },\r\n                ],\r\n            });\r\n        };\r\n        const timeBetweenSnapshots = 1000 / fps;\r\n        let lastSnapshotTime = 0;\r\n        let rafId;\r\n        const getCanvas = () => {\r\n            const matchedCanvas = [];\r\n            win.document.querySelectorAll('canvas').forEach((canvas) => {\r\n                if (!isBlocked(canvas, blockClass, blockSelector, true)) {\r\n                    matchedCanvas.push(canvas);\r\n                }\r\n            });\r\n            return matchedCanvas;\r\n        };\r\n        const takeCanvasSnapshots = (timestamp) => {\r\n            if (lastSnapshotTime &&\r\n                timestamp - lastSnapshotTime < timeBetweenSnapshots) {\r\n                rafId = requestAnimationFrame(takeCanvasSnapshots);\r\n                return;\r\n            }\r\n            lastSnapshotTime = timestamp;\r\n            getCanvas()\r\n                .forEach((canvas) => __awaiter(this, void 0, void 0, function* () {\r\n                var _a;\r\n                const id = this.mirror.getId(canvas);\r\n                if (snapshotInProgressMap.get(id))\r\n                    return;\r\n                snapshotInProgressMap.set(id, true);\r\n                if (['webgl', 'webgl2'].includes(canvas.__context)) {\r\n                    const context = canvas.getContext(canvas.__context);\r\n                    if (((_a = context === null || context === void 0 ? void 0 : context.getContextAttributes()) === null || _a === void 0 ? void 0 : _a.preserveDrawingBuffer) === false) {\r\n                        context === null || context === void 0 ? void 0 : context.clear(context.COLOR_BUFFER_BIT);\r\n                    }\r\n                }\r\n                const bitmap = yield createImageBitmap(canvas);\r\n                worker.postMessage({\r\n                    id,\r\n                    bitmap,\r\n                    width: canvas.width,\r\n                    height: canvas.height,\r\n                    dataURLOptions: options.dataURLOptions,\r\n                }, [bitmap]);\r\n            }));\r\n            rafId = requestAnimationFrame(takeCanvasSnapshots);\r\n        };\r\n        rafId = requestAnimationFrame(takeCanvasSnapshots);\r\n        this.resetObservers = () => {\r\n            canvasContextReset();\r\n            cancelAnimationFrame(rafId);\r\n        };\r\n    }\r\n    initCanvasMutationObserver(win, blockClass, blockSelector) {\r\n        this.startRAFTimestamping();\r\n        this.startPendingCanvasMutationFlusher();\r\n        const canvasContextReset = initCanvasContextObserver(win, blockClass, blockSelector);\r\n        const canvas2DReset = initCanvas2DMutationObserver(this.processMutation.bind(this), win, blockClass, blockSelector);\r\n        const canvasWebGL1and2Reset = initCanvasWebGLMutationObserver(this.processMutation.bind(this), win, blockClass, blockSelector, this.mirror);\r\n        this.resetObservers = () => {\r\n            canvasContextReset();\r\n            canvas2DReset();\r\n            canvasWebGL1and2Reset();\r\n        };\r\n    }\r\n    startPendingCanvasMutationFlusher() {\r\n        requestAnimationFrame(() => this.flushPendingCanvasMutations());\r\n    }\r\n    startRAFTimestamping() {\r\n        const setLatestRAFTimestamp = (timestamp) => {\r\n            this.rafStamps.latestId = timestamp;\r\n            requestAnimationFrame(setLatestRAFTimestamp);\r\n        };\r\n        requestAnimationFrame(setLatestRAFTimestamp);\r\n    }\r\n    flushPendingCanvasMutations() {\r\n        this.pendingCanvasMutations.forEach((values, canvas) => {\r\n            const id = this.mirror.getId(canvas);\r\n            this.flushPendingCanvasMutationFor(canvas, id);\r\n        });\r\n        requestAnimationFrame(() => this.flushPendingCanvasMutations());\r\n    }\r\n    flushPendingCanvasMutationFor(canvas, id) {\r\n        if (this.frozen || this.locked) {\r\n            return;\r\n        }\r\n        const valuesWithType = this.pendingCanvasMutations.get(canvas);\r\n        if (!valuesWithType || id === -1)\r\n            return;\r\n        const values = valuesWithType.map((value) => {\r\n            const rest = __rest(value, [\"type\"]);\r\n            return rest;\r\n        });\r\n        const { type } = valuesWithType[0];\r\n        this.mutationCb({ id, type, commands: values });\r\n        this.pendingCanvasMutations.delete(canvas);\r\n    }\r\n}\n\nexport { CanvasManager };\n","import { CanvasContext } from '../../../../../types/dist/types.js';\nimport { patch, isBlocked, hookSetter } from '../../../utils.js';\nimport { serializeArgs } from './serialize-args.js';\n\nfunction initCanvas2DMutationObserver(cb, win, blockClass, blockSelector) {\r\n    const handlers = [];\r\n    const props2D = Object.getOwnPropertyNames(win.CanvasRenderingContext2D.prototype);\r\n    for (const prop of props2D) {\r\n        try {\r\n            if (typeof win.CanvasRenderingContext2D.prototype[prop] !== 'function') {\r\n                continue;\r\n            }\r\n            const restoreHandler = patch(win.CanvasRenderingContext2D.prototype, prop, function (original) {\r\n                return function (...args) {\r\n                    if (!isBlocked(this.canvas, blockClass, blockSelector, true)) {\r\n                        setTimeout(() => {\r\n                            const recordArgs = serializeArgs([...args], win, this);\r\n                            cb(this.canvas, {\r\n                                type: CanvasContext['2D'],\r\n                                property: prop,\r\n                                args: recordArgs,\r\n                            });\r\n                        }, 0);\r\n                    }\r\n                    return original.apply(this, args);\r\n                };\r\n            });\r\n            handlers.push(restoreHandler);\r\n        }\r\n        catch (_a) {\r\n            const hookHandler = hookSetter(win.CanvasRenderingContext2D.prototype, prop, {\r\n                set(v) {\r\n                    cb(this.canvas, {\r\n                        type: CanvasContext['2D'],\r\n                        property: prop,\r\n                        args: [v],\r\n                        setter: true,\r\n                    });\r\n                },\r\n            });\r\n            handlers.push(hookHandler);\r\n        }\r\n    }\r\n    return () => {\r\n        handlers.forEach((h) => h());\r\n    };\r\n}\n\nexport { initCanvas2DMutationObserver as default };\n","import { getCssRuleString } from '../../../rrweb-snapshot/es/rrweb-snapshot.js';\nimport { StyleSheetMirror } from '../utils.js';\n\nclass StylesheetManager {\r\n    constructor(options) {\r\n        this.trackedLinkElements = new WeakSet();\r\n        this.styleMirror = new StyleSheetMirror();\r\n        this.mutationCb = options.mutationCb;\r\n        this.adoptedStyleSheetCb = options.adoptedStyleSheetCb;\r\n    }\r\n    attachLinkElement(linkEl, childSn) {\r\n        if ('_cssText' in childSn.attributes)\r\n            this.mutationCb({\r\n                adds: [],\r\n                removes: [],\r\n                texts: [],\r\n                attributes: [\r\n                    {\r\n                        id: childSn.id,\r\n                        attributes: childSn\r\n                            .attributes,\r\n                    },\r\n                ],\r\n            });\r\n        this.trackLinkElement(linkEl);\r\n    }\r\n    trackLinkElement(linkEl) {\r\n        if (this.trackedLinkElements.has(linkEl))\r\n            return;\r\n        this.trackedLinkElements.add(linkEl);\r\n        this.trackStylesheetInLinkElement(linkEl);\r\n    }\r\n    adoptStyleSheets(sheets, hostId) {\r\n        if (sheets.length === 0)\r\n            return;\r\n        const adoptedStyleSheetData = {\r\n            id: hostId,\r\n            styleIds: [],\r\n        };\r\n        const styles = [];\r\n        for (const sheet of sheets) {\r\n            let styleId;\r\n            if (!this.styleMirror.has(sheet)) {\r\n                styleId = this.styleMirror.add(sheet);\r\n                const rules = Array.from(sheet.rules || CSSRule);\r\n                styles.push({\r\n                    styleId,\r\n                    rules: rules.map((r, index) => {\r\n                        return {\r\n                            rule: getCssRuleString(r),\r\n                            index,\r\n                        };\r\n                    }),\r\n                });\r\n            }\r\n            else\r\n                styleId = this.styleMirror.getId(sheet);\r\n            adoptedStyleSheetData.styleIds.push(styleId);\r\n        }\r\n        if (styles.length > 0)\r\n            adoptedStyleSheetData.styles = styles;\r\n        this.adoptedStyleSheetCb(adoptedStyleSheetData);\r\n    }\r\n    reset() {\r\n        this.styleMirror.reset();\r\n        this.trackedLinkElements = new WeakSet();\r\n    }\r\n    trackStylesheetInLinkElement(linkEl) {\r\n    }\r\n}\n\nexport { StylesheetManager };\n","import { createMirror, snapshot } from '../../../rrweb-snapshot/es/rrweb-snapshot.js';\nimport { initObservers, mutationBuffers } from './observer.js';\nimport { polyfill, on, getWindowWidth, getWindowHeight, isSerializedIframe, isSerializedStylesheet, hasShadowRoot } from '../utils.js';\nimport { EventType, IncrementalSource } from '../../../types/dist/types.js';\nimport { IframeManager } from './iframe-manager.js';\nimport { ShadowDomManager } from './shadow-dom-manager.js';\nimport { CanvasManager } from './observers/canvas/canvas-manager.js';\nimport { StylesheetManager } from './stylesheet-manager.js';\n\nfunction wrapEvent(e) {\r\n    return Object.assign(Object.assign({}, e), { timestamp: Date.now() });\r\n}\r\nlet wrappedEmit;\r\nlet takeFullSnapshot;\r\nlet canvasManager;\r\nlet recording = false;\r\nconst mirror = createMirror();\r\nfunction record(options = {}) {\r\n    const { emit, checkoutEveryNms, checkoutEveryNth, blockClass = 'rr-block', blockSelector = null, ignoreClass = 'rr-ignore', maskTextClass = 'rr-mask', maskTextSelector = null, inlineStylesheet = true, maskAllInputs, maskInputOptions: _maskInputOptions, slimDOMOptions: _slimDOMOptions, maskInputFn, maskTextFn, hooks, packFn, sampling = {}, dataURLOptions = {}, mousemoveWait, recordCanvas = false, recordCrossOriginIframes = false, userTriggeredOnInput = false, collectFonts = false, inlineImages = false, plugins, keepIframeSrcFn = () => false, ignoreCSSAttributes = new Set([]), } = options;\r\n    const inEmittingFrame = recordCrossOriginIframes\r\n        ? window.parent === window\r\n        : true;\r\n    let passEmitsToParent = false;\r\n    if (!inEmittingFrame) {\r\n        try {\r\n            window.parent.document;\r\n            passEmitsToParent = false;\r\n        }\r\n        catch (e) {\r\n            passEmitsToParent = true;\r\n        }\r\n    }\r\n    if (inEmittingFrame && !emit) {\r\n        throw new Error('emit function is required');\r\n    }\r\n    if (mousemoveWait !== undefined && sampling.mousemove === undefined) {\r\n        sampling.mousemove = mousemoveWait;\r\n    }\r\n    mirror.reset();\r\n    const maskInputOptions = maskAllInputs === true\r\n        ? {\r\n            color: true,\r\n            date: true,\r\n            'datetime-local': true,\r\n            email: true,\r\n            month: true,\r\n            number: true,\r\n            range: true,\r\n            search: true,\r\n            tel: true,\r\n            text: true,\r\n            time: true,\r\n            url: true,\r\n            week: true,\r\n            textarea: true,\r\n            select: true,\r\n            password: true,\r\n        }\r\n        : _maskInputOptions !== undefined\r\n            ? _maskInputOptions\r\n            : { password: true };\r\n    const slimDOMOptions = _slimDOMOptions === true || _slimDOMOptions === 'all'\r\n        ? {\r\n            script: true,\r\n            comment: true,\r\n            headFavicon: true,\r\n            headWhitespace: true,\r\n            headMetaSocial: true,\r\n            headMetaRobots: true,\r\n            headMetaHttpEquiv: true,\r\n            headMetaVerification: true,\r\n            headMetaAuthorship: _slimDOMOptions === 'all',\r\n            headMetaDescKeywords: _slimDOMOptions === 'all',\r\n        }\r\n        : _slimDOMOptions\r\n            ? _slimDOMOptions\r\n            : {};\r\n    polyfill();\r\n    let lastFullSnapshotEvent;\r\n    let incrementalSnapshotCount = 0;\r\n    const eventProcessor = (e) => {\r\n        for (const plugin of plugins || []) {\r\n            if (plugin.eventProcessor) {\r\n                e = plugin.eventProcessor(e);\r\n            }\r\n        }\r\n        if (packFn) {\r\n            e = packFn(e);\r\n        }\r\n        return e;\r\n    };\r\n    wrappedEmit = (e, isCheckout) => {\r\n        var _a;\r\n        if (((_a = mutationBuffers[0]) === null || _a === void 0 ? void 0 : _a.isFrozen()) &&\r\n            e.type !== EventType.FullSnapshot &&\r\n            !(e.type === EventType.IncrementalSnapshot &&\r\n                e.data.source === IncrementalSource.Mutation)) {\r\n            mutationBuffers.forEach((buf) => buf.unfreeze());\r\n        }\r\n        if (inEmittingFrame) {\r\n            emit === null || emit === void 0 ? void 0 : emit(eventProcessor(e), isCheckout);\r\n        }\r\n        else if (passEmitsToParent) {\r\n            const message = {\r\n                type: 'rrweb',\r\n                event: eventProcessor(e),\r\n                isCheckout,\r\n            };\r\n            window.parent.postMessage(message, '*');\r\n        }\r\n        if (e.type === EventType.FullSnapshot) {\r\n            lastFullSnapshotEvent = e;\r\n            incrementalSnapshotCount = 0;\r\n        }\r\n        else if (e.type === EventType.IncrementalSnapshot) {\r\n            if (e.data.source === IncrementalSource.Mutation &&\r\n                e.data.isAttachIframe) {\r\n                return;\r\n            }\r\n            incrementalSnapshotCount++;\r\n            const exceedCount = checkoutEveryNth && incrementalSnapshotCount >= checkoutEveryNth;\r\n            const exceedTime = checkoutEveryNms &&\r\n                e.timestamp - lastFullSnapshotEvent.timestamp > checkoutEveryNms;\r\n            if (exceedCount || exceedTime) {\r\n                takeFullSnapshot(true);\r\n            }\r\n        }\r\n    };\r\n    const wrappedMutationEmit = (m) => {\r\n        wrappedEmit(wrapEvent({\r\n            type: EventType.IncrementalSnapshot,\r\n            data: Object.assign({ source: IncrementalSource.Mutation }, m),\r\n        }));\r\n    };\r\n    const wrappedScrollEmit = (p) => wrappedEmit(wrapEvent({\r\n        type: EventType.IncrementalSnapshot,\r\n        data: Object.assign({ source: IncrementalSource.Scroll }, p),\r\n    }));\r\n    const wrappedCanvasMutationEmit = (p) => wrappedEmit(wrapEvent({\r\n        type: EventType.IncrementalSnapshot,\r\n        data: Object.assign({ source: IncrementalSource.CanvasMutation }, p),\r\n    }));\r\n    const wrappedAdoptedStyleSheetEmit = (a) => wrappedEmit(wrapEvent({\r\n        type: EventType.IncrementalSnapshot,\r\n        data: Object.assign({ source: IncrementalSource.AdoptedStyleSheet }, a),\r\n    }));\r\n    const stylesheetManager = new StylesheetManager({\r\n        mutationCb: wrappedMutationEmit,\r\n        adoptedStyleSheetCb: wrappedAdoptedStyleSheetEmit,\r\n    });\r\n    const iframeManager = new IframeManager({\r\n        mirror,\r\n        mutationCb: wrappedMutationEmit,\r\n        stylesheetManager: stylesheetManager,\r\n        recordCrossOriginIframes,\r\n        wrappedEmit,\r\n    });\r\n    for (const plugin of plugins || []) {\r\n        if (plugin.getMirror)\r\n            plugin.getMirror({\r\n                nodeMirror: mirror,\r\n                crossOriginIframeMirror: iframeManager.crossOriginIframeMirror,\r\n                crossOriginIframeStyleMirror: iframeManager.crossOriginIframeStyleMirror,\r\n            });\r\n    }\r\n    canvasManager = new CanvasManager({\r\n        recordCanvas,\r\n        mutationCb: wrappedCanvasMutationEmit,\r\n        win: window,\r\n        blockClass,\r\n        blockSelector,\r\n        mirror,\r\n        sampling: sampling.canvas,\r\n        dataURLOptions,\r\n    });\r\n    const shadowDomManager = new ShadowDomManager({\r\n        mutationCb: wrappedMutationEmit,\r\n        scrollCb: wrappedScrollEmit,\r\n        bypassOptions: {\r\n            blockClass,\r\n            blockSelector,\r\n            maskTextClass,\r\n            maskTextSelector,\r\n            inlineStylesheet,\r\n            maskInputOptions,\r\n            dataURLOptions,\r\n            maskTextFn,\r\n            maskInputFn,\r\n            recordCanvas,\r\n            inlineImages,\r\n            sampling,\r\n            slimDOMOptions,\r\n            iframeManager,\r\n            stylesheetManager,\r\n            canvasManager,\r\n            keepIframeSrcFn,\r\n        },\r\n        mirror,\r\n    });\r\n    takeFullSnapshot = (isCheckout = false) => {\r\n        var _a, _b, _c, _d, _e, _f;\r\n        wrappedEmit(wrapEvent({\r\n            type: EventType.Meta,\r\n            data: {\r\n                href: window.location.href,\r\n                width: getWindowWidth(),\r\n                height: getWindowHeight(),\r\n            },\r\n        }), isCheckout);\r\n        stylesheetManager.reset();\r\n        mutationBuffers.forEach((buf) => buf.lock());\r\n        const node = snapshot(document, {\r\n            mirror,\r\n            blockClass,\r\n            blockSelector,\r\n            maskTextClass,\r\n            maskTextSelector,\r\n            inlineStylesheet,\r\n            maskAllInputs: maskInputOptions,\r\n            maskTextFn,\r\n            slimDOM: slimDOMOptions,\r\n            dataURLOptions,\r\n            recordCanvas,\r\n            inlineImages,\r\n            onSerialize: (n) => {\r\n                if (isSerializedIframe(n, mirror)) {\r\n                    iframeManager.addIframe(n);\r\n                }\r\n                if (isSerializedStylesheet(n, mirror)) {\r\n                    stylesheetManager.trackLinkElement(n);\r\n                }\r\n                if (hasShadowRoot(n)) {\r\n                    shadowDomManager.addShadowRoot(n.shadowRoot, document);\r\n                }\r\n            },\r\n            onIframeLoad: (iframe, childSn) => {\r\n                iframeManager.attachIframe(iframe, childSn);\r\n                shadowDomManager.observeAttachShadow(iframe);\r\n            },\r\n            onStylesheetLoad: (linkEl, childSn) => {\r\n                stylesheetManager.attachLinkElement(linkEl, childSn);\r\n            },\r\n            keepIframeSrcFn,\r\n        });\r\n        if (!node) {\r\n            return console.warn('Failed to snapshot the document');\r\n        }\r\n        wrappedEmit(wrapEvent({\r\n            type: EventType.FullSnapshot,\r\n            data: {\r\n                node,\r\n                initialOffset: {\r\n                    left: window.pageXOffset !== undefined\r\n                        ? window.pageXOffset\r\n                        : (document === null || document === void 0 ? void 0 : document.documentElement.scrollLeft) ||\r\n                            ((_b = (_a = document === null || document === void 0 ? void 0 : document.body) === null || _a === void 0 ? void 0 : _a.parentElement) === null || _b === void 0 ? void 0 : _b.scrollLeft) ||\r\n                            ((_c = document === null || document === void 0 ? void 0 : document.body) === null || _c === void 0 ? void 0 : _c.scrollLeft) ||\r\n                            0,\r\n                    top: window.pageYOffset !== undefined\r\n                        ? window.pageYOffset\r\n                        : (document === null || document === void 0 ? void 0 : document.documentElement.scrollTop) ||\r\n                            ((_e = (_d = document === null || document === void 0 ? void 0 : document.body) === null || _d === void 0 ? void 0 : _d.parentElement) === null || _e === void 0 ? void 0 : _e.scrollTop) ||\r\n                            ((_f = document === null || document === void 0 ? void 0 : document.body) === null || _f === void 0 ? void 0 : _f.scrollTop) ||\r\n                            0,\r\n                },\r\n            },\r\n        }));\r\n        mutationBuffers.forEach((buf) => buf.unlock());\r\n        if (document.adoptedStyleSheets && document.adoptedStyleSheets.length > 0)\r\n            stylesheetManager.adoptStyleSheets(document.adoptedStyleSheets, mirror.getId(document));\r\n    };\r\n    try {\r\n        const handlers = [];\r\n        handlers.push(on('DOMContentLoaded', () => {\r\n            wrappedEmit(wrapEvent({\r\n                type: EventType.DomContentLoaded,\r\n                data: {},\r\n            }));\r\n        }));\r\n        const observe = (doc) => {\r\n            var _a;\r\n            return initObservers({\r\n                mutationCb: wrappedMutationEmit,\r\n                mousemoveCb: (positions, source) => wrappedEmit(wrapEvent({\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: {\r\n                        source,\r\n                        positions,\r\n                    },\r\n                })),\r\n                mouseInteractionCb: (d) => wrappedEmit(wrapEvent({\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: Object.assign({ source: IncrementalSource.MouseInteraction }, d),\r\n                })),\r\n                scrollCb: wrappedScrollEmit,\r\n                viewportResizeCb: (d) => wrappedEmit(wrapEvent({\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: Object.assign({ source: IncrementalSource.ViewportResize }, d),\r\n                })),\r\n                inputCb: (v) => wrappedEmit(wrapEvent({\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: Object.assign({ source: IncrementalSource.Input }, v),\r\n                })),\r\n                mediaInteractionCb: (p) => wrappedEmit(wrapEvent({\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: Object.assign({ source: IncrementalSource.MediaInteraction }, p),\r\n                })),\r\n                styleSheetRuleCb: (r) => wrappedEmit(wrapEvent({\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: Object.assign({ source: IncrementalSource.StyleSheetRule }, r),\r\n                })),\r\n                styleDeclarationCb: (r) => wrappedEmit(wrapEvent({\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: Object.assign({ source: IncrementalSource.StyleDeclaration }, r),\r\n                })),\r\n                canvasMutationCb: wrappedCanvasMutationEmit,\r\n                fontCb: (p) => wrappedEmit(wrapEvent({\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: Object.assign({ source: IncrementalSource.Font }, p),\r\n                })),\r\n                selectionCb: (p) => {\r\n                    wrappedEmit(wrapEvent({\r\n                        type: EventType.IncrementalSnapshot,\r\n                        data: Object.assign({ source: IncrementalSource.Selection }, p),\r\n                    }));\r\n                },\r\n                blockClass,\r\n                ignoreClass,\r\n                maskTextClass,\r\n                maskTextSelector,\r\n                maskInputOptions,\r\n                inlineStylesheet,\r\n                sampling,\r\n                recordCanvas,\r\n                inlineImages,\r\n                userTriggeredOnInput,\r\n                collectFonts,\r\n                doc,\r\n                maskInputFn,\r\n                maskTextFn,\r\n                keepIframeSrcFn,\r\n                blockSelector,\r\n                slimDOMOptions,\r\n                dataURLOptions,\r\n                mirror,\r\n                iframeManager,\r\n                stylesheetManager,\r\n                shadowDomManager,\r\n                canvasManager,\r\n                ignoreCSSAttributes,\r\n                plugins: ((_a = plugins === null || plugins === void 0 ? void 0 : plugins.filter((p) => p.observer)) === null || _a === void 0 ? void 0 : _a.map((p) => ({\r\n                    observer: p.observer,\r\n                    options: p.options,\r\n                    callback: (payload) => wrappedEmit(wrapEvent({\r\n                        type: EventType.Plugin,\r\n                        data: {\r\n                            plugin: p.name,\r\n                            payload,\r\n                        },\r\n                    })),\r\n                }))) || [],\r\n            }, hooks);\r\n        };\r\n        iframeManager.addLoadListener((iframeEl) => {\r\n            handlers.push(observe(iframeEl.contentDocument));\r\n        });\r\n        const init = () => {\r\n            takeFullSnapshot();\r\n            handlers.push(observe(document));\r\n            recording = true;\r\n        };\r\n        if (document.readyState === 'interactive' ||\r\n            document.readyState === 'complete') {\r\n            init();\r\n        }\r\n        else {\r\n            handlers.push(on('load', () => {\r\n                wrappedEmit(wrapEvent({\r\n                    type: EventType.Load,\r\n                    data: {},\r\n                }));\r\n                init();\r\n            }, window));\r\n        }\r\n        return () => {\r\n            handlers.forEach((h) => h());\r\n            recording = false;\r\n        };\r\n    }\r\n    catch (error) {\r\n        console.warn(error);\r\n    }\r\n}\r\nrecord.addCustomEvent = (tag, payload) => {\r\n    if (!recording) {\r\n        throw new Error('please add custom event after start recording');\r\n    }\r\n    wrappedEmit(wrapEvent({\r\n        type: EventType.Custom,\r\n        data: {\r\n            tag,\r\n            payload,\r\n        },\r\n    }));\r\n};\r\nrecord.freezePage = () => {\r\n    mutationBuffers.forEach((buf) => buf.freeze());\r\n};\r\nrecord.takeFullSnapshot = (isCheckout) => {\r\n    if (!recording) {\r\n        throw new Error('please take full snapshot after start recording');\r\n    }\r\n    takeFullSnapshot(isCheckout);\r\n};\r\nrecord.mirror = mirror;\n\nexport { record as default };\n","import * as rrweb from 'rrweb';\nimport { nanoid } from 'nanoid';\nvar SessionSuggester = /** @class */ (function () {\n    function SessionSuggester() {\n    }\n    SessionSuggester.startRecording = function (apiHost) {\n        this.recordingID = nanoid();\n        SessionSuggester.apiHost = apiHost;\n        console.log('started recording', {\n            recordingID: SessionSuggester.recordingID\n        });\n        rrweb.record({\n            emit: SessionSuggester.handleEvent,\n        });\n        setInterval(function () {\n            console.log('saving events');\n            SessionSuggester.saveEventINBE(SessionSuggester.events);\n            SessionSuggester.events = [];\n        }, 5000);\n    };\n    SessionSuggester.handleEvent = function (event) {\n        SessionSuggester.events.push(event);\n    };\n    SessionSuggester.saveEventINBE = function (events) {\n        fetch('http://localhost:3000/api/event', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                recordingID: SessionSuggester.recordingID,\n                events: events\n            })\n        });\n    };\n    SessionSuggester.stopRecording = function () {\n        console.log('stop recording');\n    };\n    SessionSuggester.recordingID = null;\n    SessionSuggester.events = [];\n    SessionSuggester.apiHost = '';\n    return SessionSuggester;\n}());\nexport default SessionSuggester;\n","import { urlAlphabet } from './url-alphabet/index.js'\nlet random = bytes => crypto.getRandomValues(new Uint8Array(bytes))\nlet customRandom = (alphabet, defaultSize, getRandom) => {\n  let mask = (2 << (Math.log(alphabet.length - 1) / Math.LN2)) - 1\n  let step = -~((1.6 * mask * defaultSize) / alphabet.length)\n  return (size = defaultSize) => {\n    let id = ''\n    while (true) {\n      let bytes = getRandom(step)\n      let j = step\n      while (j--) {\n        id += alphabet[bytes[j] & mask] || ''\n        if (id.length === size) return id\n      }\n    }\n  }\n}\nlet customAlphabet = (alphabet, size = 21) =>\n  customRandom(alphabet, size, random)\nlet nanoid = (size = 21) =>\n  crypto.getRandomValues(new Uint8Array(size)).reduce((id, byte) => {\n    byte &= 63\n    if (byte < 36) {\n      id += byte.toString(36)\n    } else if (byte < 62) {\n      id += (byte - 26).toString(36).toUpperCase()\n    } else if (byte > 62) {\n      id += '-'\n    } else {\n      id += '_'\n    }\n    return id\n  }, '')\nexport { nanoid, customAlphabet, customRandom, urlAlphabet, random }\n"],"sourceRoot":""}